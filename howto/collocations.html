<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: Sample usage for collocations</title>
  

  <link rel="stylesheet" href="../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api/nltk.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="sample-usage-for-collocations">
<h1>Sample usage for collocations<a class="headerlink" href="#sample-usage-for-collocations" title="Permalink to this heading">¶</a></h1>
<section id="collocations">
<h2>Collocations<a class="headerlink" href="#collocations" title="Permalink to this heading">¶</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h3>
<p>Collocations are expressions of multiple words which commonly co-occur. For
example, the top ten bigram collocations in Genesis are listed below, as
measured using Pointwise Mutual Information.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nltk</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.collocations</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bigram_measures</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">collocations</span><span class="o">.</span><span class="n">BigramAssocMeasures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trigram_measures</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">collocations</span><span class="o">.</span><span class="n">TrigramAssocMeasures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fourgram_measures</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">collocations</span><span class="o">.</span><span class="n">QuadgramAssocMeasures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">genesis</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english-web.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">[(&#39;Allon&#39;, &#39;Bacuth&#39;), (&#39;Ashteroth&#39;, &#39;Karnaim&#39;), (&#39;Ben&#39;, &#39;Ammi&#39;),</span>
<span class="go"> (&#39;En&#39;, &#39;Mishpat&#39;), (&#39;Jegar&#39;, &#39;Sahadutha&#39;), (&#39;Salt&#39;, &#39;Sea&#39;),</span>
<span class="go"> (&#39;Whoever&#39;, &#39;sheds&#39;), (&#39;appoint&#39;, &#39;overseers&#39;), (&#39;aromatic&#39;, &#39;resin&#39;),</span>
<span class="go"> (&#39;cutting&#39;, &#39;instrument&#39;)]</span>
</pre></div>
</div>
<p>While these words are highly collocated, the expressions are also very
infrequent.  Therefore it is useful to apply filters, such as ignoring all
bigrams which occur less than three times in the corpus:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_freq_filter</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">[(&#39;Beer&#39;, &#39;Lahai&#39;), (&#39;Lahai&#39;, &#39;Roi&#39;), (&#39;gray&#39;, &#39;hairs&#39;),</span>
<span class="go"> (&#39;ewe&#39;, &#39;lambs&#39;), (&#39;Most&#39;, &#39;High&#39;), (&#39;many&#39;, &#39;colors&#39;),</span>
<span class="go"> (&#39;burnt&#39;, &#39;offering&#39;), (&#39;Paddan&#39;, &#39;Aram&#39;), (&#39;east&#39;, &#39;wind&#39;),</span>
<span class="go"> (&#39;living&#39;, &#39;creature&#39;)]</span>
</pre></div>
</div>
<p>We may similarly find collocations among tagged words:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">tagged_words</span><span class="p">(</span><span class="s1">&#39;ca01&#39;</span><span class="p">,</span> <span class="n">tagset</span><span class="o">=</span><span class="s1">&#39;universal&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">[((&#39;1,119&#39;, &#39;NUM&#39;), (&#39;votes&#39;, &#39;NOUN&#39;)),</span>
<span class="go"> ((&#39;1962&#39;, &#39;NUM&#39;), (&quot;governor&#39;s&quot;, &#39;NOUN&#39;)),</span>
<span class="go"> ((&#39;637&#39;, &#39;NUM&#39;), (&#39;E.&#39;, &#39;NOUN&#39;)),</span>
<span class="go"> ((&#39;Alpharetta&#39;, &#39;NOUN&#39;), (&#39;prison&#39;, &#39;NOUN&#39;)),</span>
<span class="go"> ((&#39;Bar&#39;, &#39;NOUN&#39;), (&#39;Association&#39;, &#39;NOUN&#39;))]</span>
</pre></div>
</div>
<p>Or tags alone:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span>
<span class="gp">... </span>    <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">tagged_words</span><span class="p">(</span><span class="s1">&#39;ca01&#39;</span><span class="p">,</span> <span class="n">tagset</span><span class="o">=</span><span class="s1">&#39;universal&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">[(&#39;PRT&#39;, &#39;VERB&#39;), (&#39;PRON&#39;, &#39;VERB&#39;), (&#39;ADP&#39;, &#39;DET&#39;), (&#39;.&#39;, &#39;PRON&#39;), (&#39;DET&#39;, &#39;ADJ&#39;),</span>
<span class="go"> (&#39;CONJ&#39;, &#39;PRON&#39;), (&#39;ADP&#39;, &#39;NUM&#39;), (&#39;NUM&#39;, &#39;.&#39;), (&#39;ADV&#39;, &#39;ADV&#39;), (&#39;VERB&#39;, &#39;ADV&#39;)]</span>
</pre></div>
</div>
<p>Or spanning intervening words:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">genesis</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english-web.txt&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">window_size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_freq_filter</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ignored_words</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_word_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">ignored_words</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">likelihood_ratio</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">[(&#39;chief&#39;, &#39;chief&#39;), (&#39;became&#39;, &#39;father&#39;), (&#39;years&#39;, &#39;became&#39;),</span>
<span class="go"> (&#39;hundred&#39;, &#39;years&#39;), (&#39;lived&#39;, &#39;became&#39;), (&#39;king&#39;, &#39;king&#39;),</span>
<span class="go"> (&#39;lived&#39;, &#39;years&#39;), (&#39;became&#39;, &#39;became&#39;), (&#39;chief&#39;, &#39;chiefs&#39;),</span>
<span class="go"> (&#39;hundred&#39;, &#39;became&#39;)]</span>
</pre></div>
</div>
</section>
<section id="finders">
<h3>Finders<a class="headerlink" href="#finders" title="Permalink to this heading">¶</a></h3>
<p>The collocations package provides collocation finders which by default
consider all ngrams in a text as candidate collocations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;I do not like green eggs and ham, I do not like them Sam I am!&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tokens</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">wordpunct_tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scored</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">bigram</span> <span class="k">for</span> <span class="n">bigram</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scored</span><span class="p">)</span>
<span class="go">[(&#39;,&#39;, &#39;I&#39;), (&#39;I&#39;, &#39;am&#39;), (&#39;I&#39;, &#39;do&#39;), (&#39;Sam&#39;, &#39;I&#39;), (&#39;am&#39;, &#39;!&#39;),</span>
<span class="go"> (&#39;and&#39;, &#39;ham&#39;), (&#39;do&#39;, &#39;not&#39;), (&#39;eggs&#39;, &#39;and&#39;), (&#39;green&#39;, &#39;eggs&#39;),</span>
<span class="go"> (&#39;ham&#39;, &#39;,&#39;), (&#39;like&#39;, &#39;green&#39;), (&#39;like&#39;, &#39;them&#39;), (&#39;not&#39;, &#39;like&#39;),</span>
<span class="go"> (&#39;them&#39;, &#39;Sam&#39;)]</span>
</pre></div>
</div>
<p>We could otherwise construct the collocation finder from manually-derived
FreqDists:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">word_fd</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bigram_fd</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">nltk</span><span class="o">.</span><span class="n">bigrams</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">BigramCollocationFinder</span><span class="p">(</span><span class="n">word_fd</span><span class="p">,</span> <span class="n">bigram_fd</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scored</span> <span class="o">==</span> <span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">bigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>A similar interface is provided for trigrams:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">TrigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scored</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">(</span><span class="n">trigram</span> <span class="k">for</span> <span class="n">trigram</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scored</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">nltk</span><span class="o">.</span><span class="n">trigrams</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We may want to select only the top n results:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">[(&#39;I&#39;, &#39;do&#39;, &#39;not&#39;), (&#39;do&#39;, &#39;not&#39;, &#39;like&#39;)]</span>
</pre></div>
</div>
<p>Alternatively, we can select those above a minimum score value:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">above_score</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="mf">1.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">nltk</span><span class="o">.</span><span class="n">trigrams</span><span class="p">(</span><span class="n">tokens</span><span class="p">)))))</span>
<span class="go">[(&#39;I&#39;, &#39;do&#39;, &#39;not&#39;), (&#39;do&#39;, &#39;not&#39;, &#39;like&#39;)]</span>
</pre></div>
</div>
<p>Now spanning intervening words:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">TrigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">TrigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">window_size</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">nbest</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="go">[(&#39;I&#39;, &#39;do&#39;, &#39;like&#39;), (&#39;I&#39;, &#39;do&#39;, &#39;not&#39;), (&#39;I&#39;, &#39;not&#39;, &#39;like&#39;), (&#39;do&#39;, &#39;not&#39;, &#39;like&#39;)]</span>
</pre></div>
</div>
<p>A closer look at the finder’s ngram frequencies:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">ngram_fd</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[:</span><span class="mi">10</span><span class="p">]</span>
<span class="go">[((&#39;I&#39;, &#39;do&#39;, &#39;like&#39;), 2), ((&#39;I&#39;, &#39;do&#39;, &#39;not&#39;), 2), ((&#39;I&#39;, &#39;not&#39;, &#39;like&#39;), 2),</span>
<span class="go"> ((&#39;do&#39;, &#39;not&#39;, &#39;like&#39;), 2), ((&#39;,&#39;, &#39;I&#39;, &#39;do&#39;), 1), ((&#39;,&#39;, &#39;I&#39;, &#39;not&#39;), 1),</span>
<span class="go"> ((&#39;,&#39;, &#39;do&#39;, &#39;not&#39;), 1), ((&#39;I&#39;, &#39;am&#39;, &#39;!&#39;), 1), ((&#39;Sam&#39;, &#39;I&#39;, &#39;!&#39;), 1),</span>
<span class="go"> ((&#39;Sam&#39;, &#39;I&#39;, &#39;am&#39;), 1)]</span>
</pre></div>
</div>
<p>A similar interface is provided for fourgrams:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder_4grams</span> <span class="o">=</span> <span class="n">QuadgramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scored_4grams</span> <span class="o">=</span> <span class="n">finder_4grams</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">fourgram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">(</span><span class="n">fourgram</span> <span class="k">for</span> <span class="n">fourgram</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scored_4grams</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">nltk</span><span class="o">.</span><span class="n">ngrams</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="filtering-candidates">
<h3>Filtering candidates<a class="headerlink" href="#filtering-candidates" title="Permalink to this heading">¶</a></h3>
<p>All the ngrams in a text are often too many to be useful when finding
collocations.  It is generally useful to remove some words or punctuation,
and to require a minimum frequency for candidate collocations.</p>
<p>Given our sample text above, if we remove all trigrams containing personal
pronouns from candidature, score_ngrams should return 6 less results, and
‘do not like’ will be the only candidate which occurs more than once:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span> <span class="o">=</span> <span class="n">TrigramCollocationFinder</span><span class="o">.</span><span class="n">from_words</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">))</span>
<span class="go">14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_word_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;me&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">))</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">above_score</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="mf">1.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">nltk</span><span class="o">.</span><span class="n">trigrams</span><span class="p">(</span><span class="n">tokens</span><span class="p">)))))</span>
<span class="go">[(&#39;do&#39;, &#39;not&#39;, &#39;like&#39;)]</span>
</pre></div>
</div>
<p>Sometimes a filter is a function on the whole ngram, rather than each word,
such as if we may permit ‘and’ to appear in the middle of a trigram, but
not on either edge:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_ngram_filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">w3</span><span class="p">:</span> <span class="s1">&#39;and&#39;</span> <span class="ow">in</span> <span class="p">(</span><span class="n">w1</span><span class="p">,</span> <span class="n">w3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">))</span>
<span class="go">6</span>
</pre></div>
</div>
<p>Finally, it is often important to remove low frequency candidates, as we
lack sufficient evidence about their significance as collocations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">finder</span><span class="o">.</span><span class="n">apply_freq_filter</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">finder</span><span class="o">.</span><span class="n">score_ngrams</span><span class="p">(</span><span class="n">trigram_measures</span><span class="o">.</span><span class="n">raw_freq</span><span class="p">))</span>
<span class="go">1</span>
</pre></div>
</div>
</section>
<section id="association-measures">
<h3>Association measures<a class="headerlink" href="#association-measures" title="Permalink to this heading">¶</a></h3>
<p>A number of measures are available to score collocations or other associations.
The arguments to measure functions are marginals of a contingency table, in the
bigram case (n_ii, (n_ix, n_xi), n_xx):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>        <span class="n">w1</span>    <span class="o">~</span><span class="n">w1</span>
     <span class="o">------</span> <span class="o">------</span>
 <span class="n">w2</span> <span class="o">|</span> <span class="n">n_ii</span> <span class="o">|</span> <span class="n">n_oi</span> <span class="o">|</span> <span class="o">=</span> <span class="n">n_xi</span>
     <span class="o">------</span> <span class="o">------</span>
<span class="o">~</span><span class="n">w2</span> <span class="o">|</span> <span class="n">n_io</span> <span class="o">|</span> <span class="n">n_oo</span> <span class="o">|</span>
     <span class="o">------</span> <span class="o">------</span>
     <span class="o">=</span> <span class="n">n_ix</span>        <span class="n">TOTAL</span> <span class="o">=</span> <span class="n">n_xx</span>
</pre></div>
</div>
<p>We test their calculation using some known values presented in Manning and
Schutze’s text and other papers.</p>
<p>Student’s t: examples from Manning and Schutze 5.3.2</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.4f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">student_t</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="p">(</span><span class="mi">15828</span><span class="p">,</span> <span class="mi">4675</span><span class="p">),</span> <span class="mi">14307668</span><span class="p">))</span>
<span class="go">0.9999</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.4f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">student_t</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">14307668</span><span class="p">))</span>
<span class="go">4.4721</span>
</pre></div>
</div>
<p>Chi-square: examples from Manning and Schutze 5.3.3</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">chi_sq</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="p">(</span><span class="mi">15828</span><span class="p">,</span> <span class="mi">4675</span><span class="p">),</span> <span class="mi">14307668</span><span class="p">))</span>
<span class="go">1.55</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.0f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">chi_sq</span><span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">65</span><span class="p">),</span> <span class="mi">571007</span><span class="p">))</span>
<span class="go">456400</span>
</pre></div>
</div>
<p>Likelihood ratios: examples from Dunning, CL, 1993</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">likelihood_ratio</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="p">(</span><span class="mi">2552</span><span class="p">,</span> <span class="mi">221</span><span class="p">),</span> <span class="mi">31777</span><span class="p">))</span>
<span class="go">270.72</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">likelihood_ratio</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="mi">31777</span><span class="p">))</span>
<span class="go">95.29</span>
</pre></div>
</div>
<p>Pointwise Mutual Information: examples from Manning and Schutze 5.4</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">14307668</span><span class="p">))</span>
<span class="go">18.38</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">pmi</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="p">(</span><span class="mi">15019</span><span class="p">,</span> <span class="mi">15629</span><span class="p">),</span> <span class="mi">14307668</span><span class="p">))</span>
<span class="go">0.29</span>
</pre></div>
</div>
<p>TODO: Find authoritative results for trigrams.</p>
</section>
<section id="using-contingency-table-values">
<h3>Using contingency table values<a class="headerlink" href="#using-contingency-table-values" title="Permalink to this heading">¶</a></h3>
<p>While frequency counts make marginals readily available for collocation
finding, it is common to find published contingency table values. The
collocations package therefore provides a wrapper, ContingencyMeasures, which
wraps an association measures class, providing association measures which
take contingency values as arguments, (n_ii, n_io, n_oi, n_oo) in the
bigram case.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.metrics</span> <span class="kn">import</span> <span class="n">ContingencyMeasures</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cont_bigram_measures</span> <span class="o">=</span> <span class="n">ContingencyMeasures</span><span class="p">(</span><span class="n">bigram_measures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cont_bigram_measures</span><span class="o">.</span><span class="n">likelihood_ratio</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">31740</span><span class="p">))</span>
<span class="go">95.29</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cont_bigram_measures</span><span class="o">.</span><span class="n">chi_sq</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">15820</span><span class="p">,</span> <span class="mi">4667</span><span class="p">,</span> <span class="mi">14287173</span><span class="p">))</span>
<span class="go">1.55</span>
</pre></div>
</div>
</section>
<section id="ranking-and-correlation">
<h3>Ranking and correlation<a class="headerlink" href="#ranking-and-correlation" title="Permalink to this heading">¶</a></h3>
<p>It is useful to consider the results of finding collocations as a ranking, and
the rankings output using different association measures can be compared using
the Spearman correlation coefficient.</p>
<p>Ranks can be assigned to a sorted list of results trivially by assigning
strictly increasing ranks to each result:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.metrics.spearman</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item1&#39;</span><span class="p">,</span> <span class="s1">&#39;item2&#39;</span><span class="p">,</span> <span class="s1">&#39;item3&#39;</span><span class="p">,</span> <span class="s1">&#39;item4&#39;</span><span class="p">,</span> <span class="s1">&#39;item5&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list</span><span class="p">)))</span>
<span class="go">[(&#39;item1&#39;, 0), (&#39;item2&#39;, 1), (&#39;item3&#39;, 2), (&#39;item4&#39;, 3), (&#39;item5&#39;, 4)]</span>
</pre></div>
</div>
<p>If scores are available for each result, we may allow sufficiently similar
results (differing by no more than rank_gap) to be assigned the same rank:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">results_scored</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;item1&#39;</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;item2&#39;</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;item3&#39;</span><span class="p">,</span> <span class="mf">38.0</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="p">(</span><span class="s1">&#39;item4&#39;</span><span class="p">,</span> <span class="mf">35.0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;item5&#39;</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ranks_from_scores</span><span class="p">(</span><span class="n">results_scored</span><span class="p">,</span> <span class="n">rank_gap</span><span class="o">=</span><span class="mi">5</span><span class="p">)))</span>
<span class="go">[(&#39;item1&#39;, 0), (&#39;item2&#39;, 1), (&#39;item3&#39;, 1), (&#39;item4&#39;, 1), (&#39;item5&#39;, 4)]</span>
</pre></div>
</div>
<p>The Spearman correlation coefficient gives a number from -1.0 to 1.0 comparing
two rankings.  A coefficient of 1.0 indicates identical rankings; -1.0 indicates
exact opposite rankings.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">spearman_correlation</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list</span><span class="p">),</span>
<span class="gp">... </span>        <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list</span><span class="p">)))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">spearman_correlation</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">results_list</span><span class="p">)),</span>
<span class="gp">... </span>        <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list</span><span class="p">)))</span>
<span class="go">-1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results_list2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;item2&#39;</span><span class="p">,</span> <span class="s1">&#39;item3&#39;</span><span class="p">,</span> <span class="s1">&#39;item1&#39;</span><span class="p">,</span> <span class="s1">&#39;item5&#39;</span><span class="p">,</span> <span class="s1">&#39;item4&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">spearman_correlation</span><span class="p">(</span>
<span class="gp">... </span>       <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list</span><span class="p">),</span>
<span class="gp">... </span>       <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list2</span><span class="p">)))</span>
<span class="go">0.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%0.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">spearman_correlation</span><span class="p">(</span>
<span class="gp">... </span>       <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">results_list</span><span class="p">)),</span>
<span class="gp">... </span>       <span class="n">ranks_from_sequence</span><span class="p">(</span><span class="n">results_list2</span><span class="p">)))</span>
<span class="go">-0.6</span>
</pre></div>
</div>
</section>
<section id="keywords">
<h3>Keywords<a class="headerlink" href="#keywords" title="Permalink to this heading">¶</a></h3>
<p>Bigram association metrics can also be used to perform keyword analysis. . For example, this finds the keywords
associated with the “romance” section of the Brown corpus as measured by likelihood ratio:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">romance</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="s1">&#39;romance&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freq</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">brown</span><span class="o">.</span><span class="n">words</span><span class="p">()</span> <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">romance</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">key</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">bigram_measures</span><span class="o">.</span><span class="n">likelihood_ratio</span><span class="p">(</span><span class="n">romance</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="p">(</span><span class="n">freq</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">romance</span><span class="o">.</span><span class="n">N</span><span class="p">()),</span> <span class="n">freq</span><span class="o">.</span><span class="n">N</span><span class="p">())</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">:</span><span class="s1">10s</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">v</span><span class="si">:</span><span class="s1">9.3f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">she         1163.325</span>
<span class="go">i            995.961</span>
<span class="go">her          930.528</span>
<span class="go">you          513.149</span>
<span class="go">of           501.891</span>
<span class="go">is           463.386</span>
<span class="go">had          421.615</span>
<span class="go">he           411.000</span>
<span class="go">the          347.632</span>
<span class="go">said         300.811</span>
</pre></div>
</div>
</section>
</section>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../_sources/howto/collocations.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>