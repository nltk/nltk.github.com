<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: Sample usage for tree</title>
  

  <link rel="stylesheet" href="../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api/nltk.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="sample-usage-for-tree">
<h1>Sample usage for tree<a class="headerlink" href="#sample-usage-for-tree" title="Permalink to this heading">¶</a></h1>
<section id="unit-tests-for-nltk-tree-tree">
<h2>Unit tests for nltk.tree.Tree<a class="headerlink" href="#unit-tests-for-nltk-tree-tree" title="Permalink to this heading">¶</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.tree</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Some trees to run tests on:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dp1</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;dp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">]),</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;np&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dp2</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;dp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">]),</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;np&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vp</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;vp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;chased&#39;</span><span class="p">]),</span> <span class="n">dp2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">dp1</span><span class="p">,</span> <span class="n">vp</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="go">(s (dp (d the) (np dog)) (vp (v chased) (dp (d the) (np cat))))</span>
</pre></div>
</div>
<p>The node label is accessed using the <cite>label()</cite> method:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dp1</span><span class="o">.</span><span class="n">label</span><span class="p">(),</span> <span class="n">dp2</span><span class="o">.</span><span class="n">label</span><span class="p">(),</span> <span class="n">vp</span><span class="o">.</span><span class="n">label</span><span class="p">(),</span> <span class="n">tree</span><span class="o">.</span><span class="n">label</span><span class="p">()</span>
<span class="go">(&#39;dp&#39;, &#39;dp&#39;, &#39;vp&#39;, &#39;s&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="go">cat</span>
</pre></div>
</div>
<p>The <cite>treepositions</cite> method returns a list of the tree positions of
subtrees and leaves in a tree.  By default, it gives the position of
every tree, subtree, and leaf, in prefix order:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">treepositions</span><span class="p">())</span>
<span class="go">[(), (0,), (0, 0), (0, 0, 0), (0, 1), (0, 1, 0), (1,), (1, 0), (1, 0, 0), (1, 1), (1, 1, 0), (1, 1, 0, 0), (1, 1, 1), (1, 1, 1, 0)]</span>
</pre></div>
</div>
<p>In addition to <cite>str</cite> and <cite>repr</cite>, several methods exist to convert a
tree object to one of several standard tree encodings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">pformat_latex_qtree</span><span class="p">())</span>
<span class="go">\Tree [.s</span>
<span class="go">        [.dp [.d the ] [.np dog ] ]</span>
<span class="go">        [.vp [.v chased ] [.dp [.d the ] [.np cat ] ] ] ]</span>
</pre></div>
</div>
<p>There is also a fancy ASCII art representation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go">              s</span>
<span class="go">      ________|_____</span>
<span class="go">     |              vp</span>
<span class="go">     |         _____|___</span>
<span class="go">     dp       |         dp</span>
<span class="go">  ___|___     |      ___|___</span>
<span class="go"> d       np   v     d       np</span>
<span class="go"> |       |    |     |       |</span>
<span class="go">the     dog chased the     cat</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">(</span><span class="n">unicodelines</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nodedist</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                       s</span>
<span class="go">        ┌──────────────┴────────┐</span>
<span class="go">        │                       vp</span>
<span class="go">        │              ┌────────┴──────┐</span>
<span class="go">        dp             │               dp</span>
<span class="go"> ┌──────┴──────┐       │        ┌──────┴──────┐</span>
<span class="go"> d             np      v        d             np</span>
<span class="go"> │             │       │        │             │</span>
<span class="go">the           dog    chased    the           cat</span>
</pre></div>
</div>
<p>Trees can be initialized from treebank strings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree2</span> <span class="o">=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(S (NP I) (VP (V enjoyed) (NP my cookie)))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree2</span><span class="p">)</span>
<span class="go">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
</pre></div>
</div>
<p>Trees can be compared for equality:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">==</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree2</span> <span class="o">==</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree2</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">==</span> <span class="n">tree2</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">==</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree2</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree2</span> <span class="o">==</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">!=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree2</span> <span class="o">!=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree2</span><span class="p">))</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">!=</span> <span class="n">tree2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">!=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree2</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree2</span> <span class="o">!=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">&lt;</span> <span class="n">tree2</span> <span class="ow">or</span> <span class="n">tree</span> <span class="o">&gt;</span> <span class="n">tree2</span>
<span class="go">True</span>
</pre></div>
</div>
<section id="tree-parsing">
<h3>Tree Parsing<a class="headerlink" href="#tree-parsing" title="Permalink to this heading">¶</a></h3>
<p>The class method <cite>Tree.fromstring()</cite> can be used to parse trees, and it
provides some additional options.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(S (NP I) (VP (V enjoyed) (NP my cookie)))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="go">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
</pre></div>
</div>
<p>When called on a subclass of <cite>Tree</cite>, it will create trees of that
type:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">ImmutableTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(VP (V enjoyed) (NP my cookie))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="go">(VP (V enjoyed) (NP my cookie))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
<span class="go">&lt;class &#39;nltk.tree.immutable.ImmutableTree&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableTree may not be modified</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">tree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableTree may not be modified</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">brackets</span></code> parameter can be used to specify two characters that
should be used as brackets:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;[S [NP I] [VP [V enjoyed] [NP my cookie]]]&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">brackets</span><span class="o">=</span><span class="s1">&#39;[]&#39;</span><span class="p">))</span>
<span class="go">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&lt;S &lt;NP I&gt; &lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;&gt;&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">brackets</span><span class="o">=</span><span class="s1">&#39;&lt;&gt;&#39;</span><span class="p">))</span>
<span class="go">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">brackets</span></code> is not a string, or is not exactly two characters,
then <cite>Tree.fromstring</cite> raises an exception:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">brackets</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">brackets must be a length-2 string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">brackets</span><span class="o">=</span><span class="s1">&#39;&lt;&lt;&gt;&gt;&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">brackets must be a length-2 string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">brackets</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">brackets must be a length-2 string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&lt;&lt;NP my cookie&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">brackets</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;&lt;&lt;&#39;</span><span class="p">,</span><span class="s1">&#39;&gt;&gt;&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">brackets must be a length-2 string</span>
</pre></div>
</div>
<p>(We may add support for multi-character brackets in the future, in
which case the <code class="docutils literal notranslate"><span class="pre">brackets=('&lt;&lt;','&gt;&gt;')</span></code> example would start working.)</p>
<p>Whitespace brackets are not permitted:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(NP my cookie</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">brackets</span><span class="o">=</span><span class="s1">&#39;(</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">whitespace brackets not allowed</span>
</pre></div>
</div>
<p>If an invalid tree is given to Tree.fromstring, then it raises a
ValueError, with a description of the problem:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(NP my cookie) (NP my milk)&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;end-of-string&#39; but got &#39;(NP&#39;</span>
<span class="go">            at index 15.</span>
<span class="go">                &quot;...y cookie) (NP my mil...&quot;</span>
<span class="go">                              ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;)NP my cookie(&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;(&#39; but got &#39;)&#39;</span>
<span class="go">            at index 0.</span>
<span class="go">                &quot;)NP my coo...&quot;</span>
<span class="go">                 ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(NP my cookie))&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;end-of-string&#39; but got &#39;)&#39;</span>
<span class="go">            at index 14.</span>
<span class="go">                &quot;...my cookie))&quot;</span>
<span class="go">                              ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;my cookie)&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;(&#39; but got &#39;my&#39;</span>
<span class="go">            at index 0.</span>
<span class="go">                &quot;my cookie)&quot;</span>
<span class="go">                 ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(NP my cookie&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;)&#39; but got &#39;end-of-string&#39;</span>
<span class="go">            at index 13.</span>
<span class="go">                &quot;... my cookie&quot;</span>
<span class="go">                              ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Tree.fromstring(): expected &#39;(&#39; but got &#39;end-of-string&#39;</span>
<span class="go">            at index 0.</span>
<span class="go">                &quot;&quot;</span>
<span class="go">                 ^</span>
</pre></div>
</div>
<p>Trees with no children are supported:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(S)&#39;</span><span class="p">))</span>
<span class="go">(S )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(X (Y) (Z))&#39;</span><span class="p">))</span>
<span class="go">(X (Y ) (Z ))</span>
</pre></div>
</div>
<p>Trees with an empty node label and no children are supported:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;()&#39;</span><span class="p">))</span>
<span class="go">( )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(X () ())&#39;</span><span class="p">))</span>
<span class="go">(X ( ) ( ))</span>
</pre></div>
</div>
<p>Trees with an empty node label and children are supported, but only if the
first child is not a leaf (otherwise, it will be treated as the node label).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;((A) (B) (C))&#39;</span><span class="p">))</span>
<span class="go">( (A ) (B ) (C ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;((A) leaf)&#39;</span><span class="p">))</span>
<span class="go">( (A ) leaf)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(((())))&#39;</span><span class="p">))</span>
<span class="go">( ( ( ( ))))</span>
</pre></div>
</div>
<p>The optional arguments <cite>read_node</cite> and <cite>read_leaf</cite> may be used to
transform the string values of nodes or leaves.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(A b (C d e) (F (G h i)))&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">read_node</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">read_leaf</span><span class="o">=</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">))</span>
<span class="go">(&lt;A&gt; &quot;b&quot; (&lt;C&gt; &quot;d&quot; &quot;e&quot;) (&lt;F&gt; (&lt;G&gt; &quot;h&quot; &quot;i&quot;)))</span>
</pre></div>
</div>
<p>These transformation functions are typically used when the node or
leaf labels should be parsed to a non-string value (such as a feature
structure).  If node and leaf labels need to be able to include
whitespace, then you must also use the optional <cite>node_pattern</cite> and
<cite>leaf_pattern</cite> arguments.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.featstruct</span> <span class="kn">import</span> <span class="n">FeatStruct</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;([cat=NP] [lex=the] [lex=dog])&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">read_node</span><span class="o">=</span><span class="n">FeatStruct</span><span class="p">,</span> <span class="n">read_leaf</span><span class="o">=</span><span class="n">FeatStruct</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">label</span><span class="p">()</span><span class="o">.</span><span class="n">unify</span><span class="p">(</span><span class="n">FeatStruct</span><span class="p">(</span><span class="s1">&#39;[num=singular]&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="go">([cat=&#39;NP&#39;, num=&#39;singular&#39;] [lex=&#39;the&#39;] [lex=&#39;dog&#39;])</span>
</pre></div>
</div>
<p>The optional argument <code class="docutils literal notranslate"><span class="pre">remove_empty_top_bracketing</span></code> can be used to
remove any top-level empty bracketing that occurs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;((S (NP I) (VP (V enjoyed) (NP my cookie))))&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">remove_empty_top_bracketing</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
</pre></div>
</div>
<p>It will not remove a top-level empty bracketing with multiple children:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;((A a) (B b))&#39;</span><span class="p">))</span>
<span class="go">( (A a) (B b))</span>
</pre></div>
</div>
<section id="tree-fromlist">
<h4>Tree.fromlist()<a class="headerlink" href="#tree-fromlist" title="Permalink to this heading">¶</a></h4>
<p>The class method <cite>Tree.fromlist()</cite> can be used to parse trees
that are expressed as nested lists, such as those produced by
the tree() function from the wordnet module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">wordnet</span> <span class="k">as</span> <span class="n">wn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">=</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromlist</span><span class="p">(</span><span class="n">wn</span><span class="o">.</span><span class="n">synset</span><span class="p">(</span><span class="s1">&#39;dog.n.01&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tree</span><span class="p">(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">:</span><span class="n">s</span><span class="o">.</span><span class="n">hypernyms</span><span class="p">()))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">height</span><span class="p">())</span>
<span class="go">14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">leaves</span><span class="p">())</span>
<span class="go">[&quot;Synset(&#39;entity.n.01&#39;)&quot;, &quot;Synset(&#39;entity.n.01&#39;)&quot;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go">                  Synset(&#39;dog.n.01&#39;)</span>
<span class="go">         _________________|__________________</span>
<span class="go">Synset(&#39;canine.n.                            |</span>
<span class="go">       02&#39;)                                  |</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;carnivor                            |</span>
<span class="go">     e.n.01&#39;)                                |</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;placenta                            |</span>
<span class="go">     l.n.01&#39;)                                |</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;mammal.n.                            |</span>
<span class="go">       01&#39;)                                  |</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;vertebra                            |</span>
<span class="go">    te.n.01&#39;)                                |</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;chordate.                     Synset(&#39;domestic</span>
<span class="go">      n.01&#39;)                           _animal.n.01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;animal.n.                    Synset(&#39;animal.n.</span>
<span class="go">       01&#39;)                                 01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;organism.                    Synset(&#39;organism.</span>
<span class="go">      n.01&#39;)                               n.01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;living_t                     Synset(&#39;living_t</span>
<span class="go">   hing.n.01&#39;)                          hing.n.01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;whole.n.                     Synset(&#39;whole.n.</span>
<span class="go">       02&#39;)                                 02&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;object.n.                    Synset(&#39;object.n.</span>
<span class="go">       01&#39;)                                 01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go"> Synset(&#39;physical                     Synset(&#39;physical</span>
<span class="go">  _entity.n.01&#39;)                       _entity.n.01&#39;)</span>
<span class="go">        |                                    |</span>
<span class="go">Synset(&#39;entity.n.                    Synset(&#39;entity.n.</span>
<span class="go">       01&#39;)                                 01&#39;)</span>
</pre></div>
</div>
</section>
</section>
<section id="parented-trees">
<h3>Parented Trees<a class="headerlink" href="#parented-trees" title="Permalink to this heading">¶</a></h3>
<p><cite>ParentedTree</cite> is a subclass of <cite>Tree</cite> that automatically maintains
parent pointers for single-parented trees.  Parented trees can be
created directly from a node label and a list of children:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;VP&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;VERB&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;saw&#39;</span><span class="p">]),</span>
<span class="gp">... </span>        <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;NP&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;DET&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">]),</span>
<span class="gp">... </span>            <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;NOUN&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">])])]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
</pre></div>
</div>
<p>Parented trees can be created from strings using the classmethod
<cite>ParentedTree.fromstring</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(VP (VERB saw) (NP (DET the) (NOUN dog)))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ptree</span><span class="p">))</span>
<span class="go">&lt;class &#39;nltk.tree.parented.ParentedTree&#39;&gt;</span>
</pre></div>
</div>
<p>Parented trees can also be created by using the classmethod
<cite>ParentedTree.convert</cite> to convert another type of tree to a parented
tree:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(VP (VERB saw) (NP (DET the) (NOUN dog)))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">ptree</span><span class="p">))</span>
<span class="go">&lt;class &#39;nltk.tree.parented.ParentedTree&#39;&gt;</span>
</pre></div>
</div>
<p><cite>ParentedTree</cite>s should never be used in the same tree as <cite>Tree</cite>s
or <cite>MultiParentedTree</cite>s.  Mixing tree implementations may result in
incorrect parent pointers and in <cite>TypeError</cite> exceptions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Inserting a Tree in a ParentedTree gives an exception:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;NP&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;DET&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">]),</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;NOUN&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">])])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">TypeError</span>: <span class="n">Can not insert a non-ParentedTree into a ParentedTree</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># inserting a ParentedTree in a Tree gives incorrect parent pointers:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broken_tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="s1">&#39;NP&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;DET&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">]),</span> <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;NOUN&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">broken_tree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span>
<span class="go">None</span>
</pre></div>
</div>
<section id="parented-tree-methods">
<h4>Parented Tree Methods<a class="headerlink" href="#parented-tree-methods" title="Permalink to this heading">¶</a></h4>
<p>In addition to all the methods defined by the <cite>Tree</cite> class, the
<cite>ParentedTree</cite> class adds six new methods whose values are
automatically updated whenever a parented tree is modified: <cite>parent()</cite>,
<cite>parent_index()</cite>, <cite>left_sibling()</cite>, <cite>right_sibling()</cite>, <cite>root()</cite>, and
<cite>treeposition()</cite>.</p>
<p>The <cite>parent()</cite> method contains a <cite>ParentedTree</cite>‘s parent, if it has
one; and <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise.  <cite>ParentedTree</cite>s that do not have
parents are known as “root trees.”</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subtree</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">subtree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Parent = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">subtree</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">  Parent = None</span>
<span class="go">(VERB saw)</span>
<span class="go">  Parent = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(NP (DET the) (NOUN dog))</span>
<span class="go">  Parent = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(DET the)</span>
<span class="go">  Parent = (NP (DET the) (NOUN dog))</span>
<span class="go">(NOUN dog)</span>
<span class="go">  Parent = (NP (DET the) (NOUN dog))</span>
</pre></div>
</div>
<p>The <cite>parent_index()</cite> method stores the index of a tree in its parent’s
child list.  If a tree does not have a parent, then its <cite>parent_index</cite>
is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subtree</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">subtree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Parent Index = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">subtree</span><span class="o">.</span><span class="n">parent_index</span><span class="p">())</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="p">(</span><span class="n">subtree</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span>
<span class="gp">... </span>            <span class="n">subtree</span><span class="o">.</span><span class="n">parent</span><span class="p">()[</span><span class="n">subtree</span><span class="o">.</span><span class="n">parent_index</span><span class="p">()]</span> <span class="ow">is</span> <span class="n">subtree</span><span class="p">)</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">  Parent Index = None</span>
<span class="go">(VERB saw)</span>
<span class="go">  Parent Index = 0</span>
<span class="go">(NP (DET the) (NOUN dog))</span>
<span class="go">  Parent Index = 1</span>
<span class="go">(DET the)</span>
<span class="go">  Parent Index = 0</span>
<span class="go">(NOUN dog)</span>
<span class="go">  Parent Index = 1</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">ptree.parent().index(ptree)</span></code> is <em>not</em> equivalent to
<code class="docutils literal notranslate"><span class="pre">ptree.parent_index()</span></code>.  In particular, <code class="docutils literal notranslate"><span class="pre">ptree.parent().index(ptree)</span></code>
will return the index of the first child of <code class="docutils literal notranslate"><span class="pre">ptree.parent()</span></code> that is
equal to <code class="docutils literal notranslate"><span class="pre">ptree</span></code> (using <code class="docutils literal notranslate"><span class="pre">==</span></code>); and that child may not be
<code class="docutils literal notranslate"><span class="pre">ptree</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">on_and_on</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;CONJP&#39;</span><span class="p">,</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;PREP&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;on&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;COJN&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;and&#39;</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;PREP&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;on&#39;</span><span class="p">])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">second_on</span> <span class="o">=</span> <span class="n">on_and_on</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">second_on</span><span class="o">.</span><span class="n">parent_index</span><span class="p">())</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">second_on</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">second_on</span><span class="p">))</span>
<span class="go">0</span>
</pre></div>
</div>
<p>The methods <cite>left_sibling()</cite> and <cite>right_sibling()</cite> can be used to get a
parented tree’s siblings.  If a tree does not have a left or right
sibling, then the corresponding method’s value is <code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subtree</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">subtree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Left Sibling  = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">subtree</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">())</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Right Sibling = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">subtree</span><span class="o">.</span><span class="n">right_sibling</span><span class="p">())</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">  Left Sibling  = None</span>
<span class="go">  Right Sibling = None</span>
<span class="go">(VERB saw)</span>
<span class="go">  Left Sibling  = None</span>
<span class="go">  Right Sibling = (NP (DET the) (NOUN dog))</span>
<span class="go">(NP (DET the) (NOUN dog))</span>
<span class="go">  Left Sibling  = (VERB saw)</span>
<span class="go">  Right Sibling = None</span>
<span class="go">(DET the)</span>
<span class="go">  Left Sibling  = None</span>
<span class="go">  Right Sibling = (NOUN dog)</span>
<span class="go">(NOUN dog)</span>
<span class="go">  Left Sibling  = (DET the)</span>
<span class="go">  Right Sibling = None</span>
</pre></div>
</div>
<p>A parented tree’s root tree can be accessed using the <cite>root()</cite>
method.  This method follows the tree’s parent pointers until it
finds a tree without a parent.  If a tree does not have a parent, then
it is its own root:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subtree</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">subtree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Root = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">subtree</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(VERB saw)</span>
<span class="go">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(NP (DET the) (NOUN dog))</span>
<span class="go">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(DET the)</span>
<span class="go">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">(NOUN dog)</span>
<span class="go">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
</pre></div>
</div>
<p>The <cite>treeposition()</cite> method can be used to find a tree’s treeposition
relative to its root:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subtree</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">subtree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Tree Position = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">subtree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">(),))</span>
<span class="gp">... </span>    <span class="k">assert</span> <span class="n">subtree</span><span class="o">.</span><span class="n">root</span><span class="p">()[</span><span class="n">subtree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">()]</span> <span class="ow">is</span> <span class="n">subtree</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="go">  Tree Position = ()</span>
<span class="go">(VERB saw)</span>
<span class="go">  Tree Position = (0,)</span>
<span class="go">(NP (DET the) (NOUN dog))</span>
<span class="go">  Tree Position = (1,)</span>
<span class="go">(DET the)</span>
<span class="go">  Tree Position = (1, 0)</span>
<span class="go">(NOUN dog)</span>
<span class="go">  Tree Position = (1, 1)</span>
</pre></div>
</div>
<p>Whenever a parented tree is modified, all of the methods described
above (<cite>parent()</cite>, <cite>parent_index()</cite>, <cite>left_sibling()</cite>, <cite>right_sibling()</cite>,
<cite>root()</cite>, and <cite>treeposition()</cite>) are automatically updated.  For example,
if we replace <code class="docutils literal notranslate"><span class="pre">ptree</span></code>‘s subtree for the word “dog” with a new
subtree for “cat,” the method values for both the “dog” subtree and the
“cat” subtree get automatically updated:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Replace the dog with a cat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dog</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="p">(</span><span class="s1">&#39;NOUN&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cat</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># the noun phrase is no longer the dog&#39;s parent:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dog</span><span class="o">.</span><span class="n">parent</span><span class="p">(),</span> <span class="n">dog</span><span class="o">.</span><span class="n">parent_index</span><span class="p">(),</span> <span class="n">dog</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">())</span>
<span class="go">None None None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># dog is now its own root.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dog</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>
<span class="go">(NOUN dog)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dog</span><span class="o">.</span><span class="n">treeposition</span><span class="p">())</span>
<span class="go">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># the cat&#39;s parent is now the noun phrase:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span>
<span class="go">(NP (DET the) (NOUN cat))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">parent_index</span><span class="p">())</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">())</span>
<span class="go">(DET the)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">root</span><span class="p">())</span>
<span class="go">(VP (VERB saw) (NP (DET the) (NOUN cat)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">treeposition</span><span class="p">())</span>
<span class="go">(1, 1)</span>
</pre></div>
</div>
</section>
<section id="parentedtree-regression-tests">
<h4>ParentedTree Regression Tests<a class="headerlink" href="#parentedtree-regression-tests" title="Permalink to this heading">¶</a></h4>
<p>Keep track of all trees that we create (including subtrees) using this
variable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">all_ptrees</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Define a helper function to create new parented trees:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">make_ptree</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">ptree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">all_ptrees</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">()</span>
<span class="gp">... </span>                      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">Tree</span><span class="p">))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">ptree</span>
</pre></div>
</div>
<p>Define a test function that examines every subtree in all_ptrees; and
checks that all six of its methods are defined correctly.  If any
ptrees are passed as arguments, then they are printed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">pcheck</span><span class="p">(</span><span class="o">*</span><span class="n">print_ptrees</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">ptree</span> <span class="ow">in</span> <span class="n">all_ptrees</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c1"># Check ptree&#39;s methods.</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">i</span> <span class="o">=</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent_index</span><span class="p">()</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="n">ptree</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">right_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ptree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="p">(</span><span class="n">ptree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">()</span> <span class="o">==</span>
<span class="gp">... </span>                    <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">treeposition</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">ptree</span><span class="o">.</span><span class="n">parent_index</span><span class="p">(),))</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">root</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ptree</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">root</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">root</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span><span class="o">.</span><span class="n">root</span><span class="p">()</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">root</span><span class="p">()[</span><span class="n">ptree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">()]</span> <span class="ow">is</span> <span class="n">ptree</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">parent_index</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">right_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">root</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">ptree</span><span class="o">.</span><span class="n">treeposition</span><span class="p">()</span> <span class="o">==</span> <span class="p">()</span>
<span class="gp">... </span>        <span class="c1"># Check ptree&#39;s children&#39;s methods:</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ptree</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">Tree</span><span class="p">):</span>
<span class="gp">... </span>                <span class="c1"># pcheck parent() &amp; parent_index() methods</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">parent_index</span><span class="p">()</span> <span class="o">==</span> <span class="n">i</span>
<span class="gp">... </span>                <span class="c1"># pcheck sibling methods</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">... </span>                <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">left_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">right_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">... </span>                <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">child</span><span class="o">.</span><span class="n">right_sibling</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ptree</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">print_ptrees</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ok!&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">ptree</span> <span class="ow">in</span> <span class="n">print_ptrees</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ok!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run our test function on a variety of newly-created trees:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pcheck</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A)&#39;</span><span class="p">))</span>
<span class="go">ok! (A )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcheck</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f)) g) h)&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B (C (D ) (E f)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcheck</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B) (C c) (D d d) (E e e e))&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B ) (C c) (D d d) (E e e e))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcheck</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B) (C (c)) (D (d) (d)) (E (e) (e) (e)))&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B ) (C (c )) (D (d ) (d )) (E (e ) (e ) (e )))</span>
</pre></div>
</div>
<p>Run our test function after performing various tree-modification
operations:</p>
<p><strong>__delitem__()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p))) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[()]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">The tree position () may not be deleted.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With slices:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f g (H i) j (K l))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[:</span><span class="mi">1</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">ok! (A (D e) f g (H i) j (K l))</span>
<span class="go">ok! (B c)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) f g (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">1000</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f g (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">1000</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) f (H i) j (K l))</span>
</pre></div>
</div>
<p><strong>__setitem__()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (E f) (Q p)) g) h)</span>
<span class="go">ok! (D )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) (D ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) x)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[()]</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X y)&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">The tree position () may not be assigned to.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With slices:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(Y)&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (B c) (D e) f g (H i) j (K l))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">();</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (H i) j (K l))</span>
<span class="go">ok! (B c)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (H i) z p)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) z p)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) (X ) (X ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) n)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(U v)&#39;</span><span class="p">)];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) (X ) (X ) n)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) (X ) (X ) (X ) (X ) (X ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">];</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) x (X ) y (X ) (X ))</span>
</pre></div>
</div>
<p><strong>append()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x (X (Y z)))</span>
</pre></div>
</div>
<p><strong>extend()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">)]);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">extend</span><span class="p">([]);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)) (X ) (X ) (X ))</span>
</pre></div>
</div>
<p><strong>insert()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note: as with ``list``, inserting at a negative index that</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># gives a position before the start of the list does *not*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># raise an IndexError exception; it just inserts at 0.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">400</span><span class="p">,</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (B (C (D ) (E f) (Q p)) g)</span>
<span class="go">  (X (Y z))</span>
<span class="go">  h)</span>
</pre></div>
</div>
<p><strong>pop()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ParentedTree(&#39;E&#39;, [&#39;f&#39;])</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">&#39;g&#39;</span>
<span class="go">ok! (A (B (C (D ) (Q p))) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">pop</span><span class="p">();</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">&#39;h&#39;</span>
<span class="go">ok! (A (B (C (D ) (Q p))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
</pre></div>
</div>
<p><strong>remove()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(Q p)&#39;</span><span class="p">));</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D )) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(Q p)&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ParentedTree(&#39;Q&#39;, [&#39;p&#39;]) is not in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D )) g))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">);</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">&#39;h&#39; is not in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># remove() removes the first subtree that is equal (==) to the</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># given tree, which may not be the identical tree we give it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (X x) (Y y) (X x))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">ptree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="go">ok! (A (Y y) (X x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x1</span><span class="o">.</span><span class="n">parent</span><span class="p">());</span> <span class="n">pcheck</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
<span class="go">None</span>
<span class="go">ok! (X x)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x2</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span>
<span class="go">(A (Y y) (X x))</span>
</pre></div>
</div>
<p>Test that a tree can not be given multiple parents:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">make_ptree</span><span class="p">(</span><span class="s1">&#39;(A (X x) (Y y) (Z z))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ptree</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">Can not insert a subtree that already has a parent.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcheck</span><span class="p">()</span>
<span class="go">ok!</span>
</pre></div>
</div>
<p>[more to be written]</p>
<p>Shallow copying can be tricky for Tree and several of its subclasses.
For shallow copies of Tree, only the root node is reconstructed, while
all the children are shared between the two trees. Modify the children
of one tree - and the shallowly copied tree will also update.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.tree</span> <span class="kn">import</span> <span class="n">Tree</span><span class="p">,</span> <span class="n">ParentedTree</span><span class="p">,</span> <span class="n">MultiParentedTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;(TOP (S (NP (NNP Bell,)) (NP (NP (DT a) (NN company)) (SBAR (WHNP (WDT which)) (S (VP (VBZ is) (VP (VBN based) (PP (IN in) (NP (NNP LA,)))))))) (VP (VBZ makes) (CC and) (VBZ distributes) (NP (NN computer))) (. products.)))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy_tree</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">==</span> <span class="n">copy_tree</span> <span class="c1"># Ensure identical labels and nodes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">copy_tree</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">tree</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># Ensure shallow copy - the children are the same objects in memory</span>
<span class="go">True</span>
</pre></div>
</div>
<p>For ParentedTree objects, this behaviour is not possible. With a shallow
copy, the children of the root node would be reused for both the original
and the shallow copy. For this to be possible, some children would need
to have multiple parents. As this is forbidden for ParentedTree objects,
attempting to make a shallow copy will cause a warning, and a deep copy
is made instead.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ptree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;(TOP (S (NP (NNP Bell,)) (NP (NP (DT a) (NN company)) (SBAR (WHNP (WDT which)) (S (VP (VBZ is) (VP (VBN based) (PP (IN in) (NP (NNP LA,)))))))) (VP (VBZ makes) (CC and) (VBZ distributes) (NP (NN computer))) (. products.)))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy_ptree</span> <span class="o">=</span> <span class="n">ptree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy_ptree</span> <span class="o">==</span> <span class="n">ptree</span> <span class="c1"># Ensure identical labels and nodes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">copy_ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">(</span><span class="n">ptree</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># Shallow copying isn&#39;t supported - it defaults to deep copy.</span>
<span class="go">True</span>
</pre></div>
</div>
<p>For MultiParentedTree objects, the issue of only allowing one parent that
can be seen for ParentedTree objects is no more. Shallow copying a
MultiParentedTree gives the children of the root node two parents:
the original and the newly copied root.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">MultiParentedTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;(TOP (S (NP (NNP Bell,)) (NP (NP (DT a) (NN company)) (SBAR (WHNP (WDT which)) (S (VP (VBZ is) (VP (VBN based) (PP (IN in) (NP (NNP LA,)))))))) (VP (VBZ makes) (CC and) (VBZ distributes) (NP (NN computer))) (. products.)))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parents</span><span class="p">())</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy_mptree</span> <span class="o">=</span> <span class="n">mptree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">copy_mptree</span> <span class="o">==</span> <span class="n">mptree</span> <span class="c1"># Ensure identical labels and nodes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parents</span><span class="p">())</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">copy_mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">parents</span><span class="p">())</span>
<span class="go">2</span>
</pre></div>
</div>
<p>Shallow copying a MultiParentedTree is similar to creating a second root
which is identically labeled as the root on which the copy method was called.</p>
</section>
<section id="immutableparentedtree-regression-tests">
<h4>ImmutableParentedTree Regression Tests<a class="headerlink" href="#immutableparentedtree-regression-tests" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">iptree</span> <span class="o">=</span> <span class="n">ImmutableParentedTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">ptree</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">iptree</span><span class="p">)</span>
<span class="go">&lt;class &#39;nltk.tree.immutable.ImmutableParentedTree&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">iptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableParentedTree may not be modified</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iptree</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;newnode&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableParentedTree may not be modified</span>
</pre></div>
</div>
</section>
<section id="multiparentedtree-regression-tests">
<h4>MultiParentedTree Regression Tests<a class="headerlink" href="#multiparentedtree-regression-tests" title="Permalink to this heading">¶</a></h4>
<p>Keep track of all trees that we create (including subtrees) using this
variable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">all_mptrees</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Define a helper function to create new parented trees:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">make_mptree</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">mptree</span> <span class="o">=</span> <span class="n">MultiParentedTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="gp">... </span>    <span class="n">all_mptrees</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">subtrees</span><span class="p">()</span>
<span class="gp">... </span>                      <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">Tree</span><span class="p">))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">mptree</span>
</pre></div>
</div>
<p>Define a test function that examines every subtree in all_mptrees; and
checks that all six of its methods are defined correctly.  If any
mptrees are passed as arguments, then they are printed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mpcheck</span><span class="p">(</span><span class="o">*</span><span class="n">print_mptrees</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">has</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span> <span class="c1"># uses identity comparison</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">seq</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="n">val</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="kc">False</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">mptree</span> <span class="ow">in</span> <span class="n">all_mptrees</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c1"># Check mptree&#39;s methods.</span>
<span class="gp">... </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="o">.</span><span class="n">parents</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="o">.</span><span class="n">left_siblings</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="o">.</span><span class="n">right_siblings</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="o">.</span><span class="n">roots</span><span class="p">())</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">mptree</span><span class="o">.</span><span class="n">roots</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">mptree</span>
<span class="gp">... </span>            <span class="k">assert</span> <span class="n">mptree</span><span class="o">.</span><span class="n">treepositions</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span> <span class="o">==</span> <span class="p">[()]</span>
<span class="gp">... </span>            <span class="n">left_siblings</span> <span class="o">=</span> <span class="n">right_siblings</span> <span class="o">=</span> <span class="p">()</span>
<span class="gp">... </span>            <span class="n">roots</span> <span class="o">=</span> <span class="p">{</span><span class="nb">id</span><span class="p">(</span><span class="n">mptree</span><span class="p">):</span> <span class="mi">1</span><span class="p">}</span>
<span class="gp">... </span>        <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">roots</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="nb">id</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">roots</span><span class="p">())</span>
<span class="gp">... </span>            <span class="n">left_siblings</span> <span class="o">=</span> <span class="n">mptree</span><span class="o">.</span><span class="n">left_siblings</span><span class="p">()</span>
<span class="gp">... </span>            <span class="n">right_siblings</span> <span class="o">=</span> <span class="n">mptree</span><span class="o">.</span><span class="n">right_siblings</span><span class="p">()</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">parents</span><span class="p">():</span>
<span class="gp">... </span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">parent_indices</span><span class="p">(</span><span class="n">parent</span><span class="p">):</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">parent</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">is</span> <span class="n">mptree</span>
<span class="gp">... </span>                <span class="c1"># check left siblings</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">left_siblings</span><span class="p">)):</span>
<span class="gp">... </span>                        <span class="k">if</span> <span class="n">left_siblings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">is</span> <span class="n">parent</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
<span class="gp">... </span>                            <span class="k">del</span> <span class="n">left_siblings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<span class="gp">... </span>                            <span class="k">break</span>
<span class="gp">... </span>                    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;sibling not found!&#39;</span>
<span class="gp">... </span>                <span class="c1"># check ight siblings</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">right_siblings</span><span class="p">)):</span>
<span class="gp">... </span>                        <span class="k">if</span> <span class="n">right_siblings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="ow">is</span> <span class="n">parent</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
<span class="gp">... </span>                            <span class="k">del</span> <span class="n">right_siblings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<span class="gp">... </span>                            <span class="k">break</span>
<span class="gp">... </span>                    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>                        <span class="k">assert</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;sibling not found!&#39;</span>
<span class="gp">... </span>            <span class="c1"># check roots</span>
<span class="gp">... </span>            <span class="k">for</span> <span class="n">root</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">roots</span><span class="p">():</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="nb">id</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="ow">in</span> <span class="n">roots</span><span class="p">,</span> <span class="s1">&#39;missing root&#39;</span>
<span class="gp">... </span>                <span class="n">roots</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">root</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">... </span>        <span class="c1"># check that we don&#39;t have any unexplained values</span>
<span class="gp">... </span>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">left_siblings</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;unexpected sibling&#39;</span>
<span class="gp">... </span>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">right_siblings</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;unexpected sibling&#39;</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">roots</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="k">assert</span> <span class="n">v</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="n">roots</span> <span class="c1">#&#39;unexpected root&#39;</span>
<span class="gp">... </span>        <span class="c1"># check treepositions</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">root</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">roots</span><span class="p">():</span>
<span class="gp">... </span>            <span class="k">for</span> <span class="n">treepos</span> <span class="ow">in</span> <span class="n">mptree</span><span class="o">.</span><span class="n">treepositions</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">root</span><span class="p">[</span><span class="n">treepos</span><span class="p">]</span> <span class="ow">is</span> <span class="n">mptree</span>
<span class="gp">... </span>        <span class="c1"># Check mptree&#39;s children&#39;s methods:</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">mptree</span><span class="p">):</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">Tree</span><span class="p">):</span>
<span class="gp">... </span>                <span class="c1"># mpcheck parent() &amp; parent_index() methods</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">has</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">parents</span><span class="p">(),</span> <span class="n">mptree</span><span class="p">)</span>
<span class="gp">... </span>                <span class="k">assert</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">child</span><span class="o">.</span><span class="n">parent_indices</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="gp">... </span>                <span class="c1"># mpcheck sibling methods</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">has</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">left_siblings</span><span class="p">(),</span> <span class="n">mptree</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">assert</span> <span class="n">has</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">right_siblings</span><span class="p">(),</span> <span class="n">mptree</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">print_mptrees</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ok!&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">for</span> <span class="n">mptree</span> <span class="ow">in</span> <span class="n">print_mptrees</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ok!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Run our test function on a variety of newly-created trees:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mpcheck</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A)&#39;</span><span class="p">))</span>
<span class="go">ok! (A )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpcheck</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f)) g) h)&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B (C (D ) (E f)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpcheck</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B) (C c) (D d d) (E e e e))&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B ) (C c) (D d d) (E e e e))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpcheck</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B) (C (c)) (D (d) (d)) (E (e) (e) (e)))&#39;</span><span class="p">))</span>
<span class="go">ok! (A (B ) (C (c )) (D (d ) (d )) (E (e ) (e ) (e )))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subtree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f)) g) h)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Including some trees that contain multiple parents:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mpcheck</span><span class="p">(</span><span class="n">MultiParentedTree</span><span class="p">(</span><span class="s1">&#39;Z&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">subtree</span><span class="p">,</span> <span class="n">subtree</span><span class="p">]))</span>
<span class="go">ok! (Z (A (B (C (D ) (E f)) g) h) (A (B (C (D ) (E f)) g) h))</span>
</pre></div>
</div>
<p>Run our test function after performing various tree-modification
operations (n.b., these are the same tests that we ran for
<cite>ParentedTree</cite>, above; thus, none of these trees actually <em>uses</em>
multiple parents.)</p>
<p><strong>__delitem__()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p))) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (Q p))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[()]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">The tree position () may not be deleted.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With slices:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f g (H i) j (K l))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[:</span><span class="mi">1</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">ok! (A (D e) f g (H i) j (K l))</span>
<span class="go">ok! (B c)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) f g (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">1000</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f g (H i))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">1000</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) (D e) f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (D e) f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B c) f (H i) j (K l))</span>
</pre></div>
</div>
<p><strong>__setitem__()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (E f) (Q p)) g) h)</span>
<span class="go">ok! (D )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">;</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) (D ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C x (X (Y z)) (Q p)) g) x)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[()]</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X y)&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">The tree position () may not be assigned to.</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With slices:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B c) (D e) f g (H i) j (K l))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(Y)&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (B c) (D e) f g (H i) j (K l))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">();</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (H i) j (K l))</span>
<span class="go">ok! (B c)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A x (Y ) (H i) z p)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) z p)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) (X ) (X ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A x (X ) (X ) n)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(U v)&#39;</span><span class="p">)];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) (X ) (X ) n)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) (X ) (X ) (X ) (X ) (X ))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">];</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (U v) x (X ) y (X ) (X ))</span>
</pre></div>
</div>
<p><strong>append()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x (X (Y z)))</span>
</pre></div>
</div>
<p><strong>extend()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">)]);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">extend</span><span class="p">([]);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X)&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)) (X ) (X ) (X ))</span>
</pre></div>
</div>
<p><strong>insert()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (X (Y z)) (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note: as with ``list``, inserting at a negative index that</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># gives a position before the start of the list does *not*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># raise an IndexError exception; it just inserts at 0.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">400</span><span class="p">,</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(X (Y z))&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (X (Y z))</span>
<span class="go">  (B (C (D ) (E f) (Q p)) g)</span>
<span class="go">  (X (Y z))</span>
<span class="go">  h)</span>
</pre></div>
</div>
<p><strong>pop()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">MultiParentedTree(&#39;E&#39;, [&#39;f&#39;])</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">&#39;g&#39;</span>
<span class="go">ok! (A (B (C (D ) (Q p))) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">pop</span><span class="p">();</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">&#39;h&#39;</span>
<span class="go">ok! (A (B (C (D ) (Q p))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">IndexError</span>: <span class="n">index out of range</span>
</pre></div>
</div>
<p><strong>remove()</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (B (C (D) (E f) (Q p)) g) h)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="go">ok! (E f)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(Q p)&#39;</span><span class="p">));</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D )) g) h)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(Q p)&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">MultiParentedTree(&#39;Q&#39;, [&#39;p&#39;]) is not in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (B (C (D )) g))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">);</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">&#39;h&#39; is not in list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># remove() removes the first subtree that is equal (==) to the</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># given tree, which may not be the identical tree we give it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span> <span class="o">=</span> <span class="n">make_mptree</span><span class="p">(</span><span class="s1">&#39;(A (X x) (Y y) (X x))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">mptree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mptree</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mptree</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span> <span class="n">mpcheck</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="go">ok! (A (Y y) (X x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">x1</span><span class="o">.</span><span class="n">parents</span><span class="p">()])</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">x2</span><span class="o">.</span><span class="n">parents</span><span class="p">()])</span>
<span class="go">[&#39;(A (Y y) (X x))&#39;]</span>
</pre></div>
</div>
</section>
<section id="immutablemultiparentedtree-regression-tests">
<h4>ImmutableMultiParentedTree Regression Tests<a class="headerlink" href="#immutablemultiparentedtree-regression-tests" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imptree</span> <span class="o">=</span> <span class="n">ImmutableMultiParentedTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">mptree</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">imptree</span><span class="p">)</span>
<span class="go">&lt;class &#39;nltk.tree.immutable.ImmutableMultiParentedTree&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">imptree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableMultiParentedTree may not be modified</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imptree</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;newnode&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableMultiParentedTree may not be modified</span>
</pre></div>
</div>
</section>
<section id="probabilistictree-regression-tests">
<h4>ProbabilisticTree Regression Tests<a class="headerlink" href="#probabilistictree-regression-tests" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prtree</span> <span class="o">=</span> <span class="n">ProbabilisticTree</span><span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">ProbabilisticTree</span><span class="p">(</span><span class="s2">&quot;NP&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;N&quot;</span><span class="p">],</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)],</span> <span class="n">prob</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">prtree</span><span class="p">)</span>
<span class="go">(S (NP N)) (p=0.6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prtree</span> <span class="o">==</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">prtree</span><span class="p">)</span> <span class="o">==</span> <span class="n">prtree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">prtree</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prtree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">prtree</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prtree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">prtree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imprtree</span> <span class="o">=</span> <span class="n">ImmutableProbabilisticTree</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">prtree</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">imprtree</span><span class="p">)</span>
<span class="go">&lt;class &#39;nltk.tree.immutable.ImmutableProbabilisticTree&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">imprtree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableProbabilisticTree may not be modified</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imprtree</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;newnode&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">  . . .</span>
<span class="gr">ValueError</span>: <span class="n">ImmutableProbabilisticTree may not be modified</span>
</pre></div>
</div>
</section>
</section>
<section id="squashed-bugs">
<h3>Squashed Bugs<a class="headerlink" href="#squashed-bugs" title="Permalink to this heading">¶</a></h3>
<p>This used to discard the <code class="docutils literal notranslate"><span class="pre">(B</span> <span class="pre">b)</span></code> subtree (fixed in svn 6270):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Tree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;((A a) (B b))&#39;</span><span class="p">))</span>
<span class="go">( (A a) (B b))</span>
</pre></div>
</div>
<p>Pickling ParentedTree instances didn’t work for Python 3.7 onwards (See #2478)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;(S (NN x) (NP x) (NN x))&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="go">(S (NN x) (NP x) (NN x))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pickled</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree_loaded</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">pickled</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree_loaded</span><span class="p">)</span>
<span class="go">(S (NN x) (NP x) (NN x))</span>
</pre></div>
</div>
<p>ParentedTree used to be impossible to (deep)copy. (See #1324)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.tree</span> <span class="kn">import</span> <span class="n">ParentedTree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">ParentedTree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;(TOP (S (NP (NNP Bell,)) (NP (NP (DT a) (NN company)) (SBAR (WHNP (WDT which)) (S (VP (VBZ is) (VP (VBN based) (PP (IN in) (NP (NNP LA,)))))))) (VP (VBZ makes) (CC and) (VBZ distributes) (NP (NN computer))) (. products.)))&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">==</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">==</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">==</span> <span class="n">tree</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">tree</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</section>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../_sources/howto/tree.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>