<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: Sample usage for translate</title>
  

  <link rel="stylesheet" href="../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api/nltk.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="sample-usage-for-translate">
<h1>Sample usage for translate<a class="headerlink" href="#sample-usage-for-translate" title="Permalink to this heading">¶</a></h1>
<section id="alignment">
<h2>Alignment<a class="headerlink" href="#alignment" title="Permalink to this heading">¶</a></h2>
<section id="corpus-reader">
<h3>Corpus Reader<a class="headerlink" href="#corpus-reader" title="Permalink to this heading">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">comtrans</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">words</span> <span class="o">=</span> <span class="n">comtrans</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;alignment-en-fr.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[:</span><span class="mi">6</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
<span class="go">Resumption</span>
<span class="go">of</span>
<span class="go">the</span>
<span class="go">session</span>
<span class="go">I</span>
<span class="go">declare</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span> <span class="o">=</span> <span class="n">comtrans</span><span class="o">.</span><span class="n">aligned_sents</span><span class="p">(</span><span class="s1">&#39;alignment-en-fr.txt&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span>
<span class="go">AlignedSent([&#39;Resumption&#39;, &#39;of&#39;, &#39;the&#39;, &#39;session&#39;],</span>
<span class="go">[&#39;Reprise&#39;, &#39;de&#39;, &#39;la&#39;, &#39;session&#39;],</span>
<span class="go">Alignment([(0, 0), (1, 1), (2, 2), (3, 3)]))</span>
</pre></div>
</div>
</section>
<section id="alignment-objects">
<h3>Alignment Objects<a class="headerlink" href="#alignment-objects" title="Permalink to this heading">¶</a></h3>
<p>Aligned sentences are simply a mapping between words in a sentence:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">words</span><span class="p">))</span>
<span class="go">Resumption of the session</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">mots</span><span class="p">))</span>
<span class="go">Reprise de la session</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span>
<span class="go">Alignment([(0, 0), (1, 1), (2, 2), (3, 3)])</span>
</pre></div>
</div>
<p>Usually we look at them from the perspective of a source to a target language,
but they are easily inverted:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">invert</span><span class="p">()</span>
<span class="go">AlignedSent([&#39;Reprise&#39;, &#39;de&#39;, &#39;la&#39;, &#39;session&#39;],</span>
<span class="go">[&#39;Resumption&#39;, &#39;of&#39;, &#39;the&#39;, &#39;session&#39;],</span>
<span class="go">Alignment([(0, 0), (1, 1), (2, 2), (3, 3)]))</span>
</pre></div>
</div>
<p>We can create new alignments, but these need to be in the correct range of
the corresponding sentences:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.translate</span> <span class="kn">import</span> <span class="n">Alignment</span><span class="p">,</span> <span class="n">AlignedSent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span> <span class="o">=</span> <span class="n">AlignedSent</span><span class="p">([</span><span class="s1">&#39;Reprise&#39;</span><span class="p">,</span> <span class="s1">&#39;de&#39;</span><span class="p">,</span> <span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;session&#39;</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="p">[</span><span class="s1">&#39;Resumption&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;session&#39;</span><span class="p">],</span>
<span class="gp">... </span>                  <span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]))</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">IndexError</span>: <span class="n">Alignment is outside boundary of mots</span>
</pre></div>
</div>
<p>You can set alignments with any sequence of tuples, so long as the first two
indexes of the tuple are the alignment indices:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span> <span class="o">=</span> <span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;boat&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;boat&quot;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))])</span>
<span class="go">Alignment([(0, 0), (1, 1), (2, 2, &#39;boat&#39;), (3, 3, False, (1, 2))])</span>
</pre></div>
</div>
</section>
<section id="alignment-algorithms">
<h3>Alignment Algorithms<a class="headerlink" href="#alignment-algorithms" title="Permalink to this heading">¶</a></h3>
<section id="em-for-ibm-model-1">
<h4>EM for IBM Model 1<a class="headerlink" href="#em-for-ibm-model-1" title="Permalink to this heading">¶</a></h4>
<p>Here is an example from Koehn, 2010:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.translate</span> <span class="kn">import</span> <span class="n">IBMModel1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">corpus</span> <span class="o">=</span> <span class="p">[</span><span class="n">AlignedSent</span><span class="p">([</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;house&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;das&#39;</span><span class="p">,</span> <span class="s1">&#39;Haus&#39;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="n">AlignedSent</span><span class="p">([</span><span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;book&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;das&#39;</span><span class="p">,</span> <span class="s1">&#39;Buch&#39;</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="n">AlignedSent</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;book&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;ein&#39;</span><span class="p">,</span> <span class="s1">&#39;Buch&#39;</span><span class="p">])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">em_ibm1</span> <span class="o">=</span> <span class="n">IBMModel1</span><span class="p">(</span><span class="n">corpus</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">][</span><span class="s1">&#39;das&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">][</span><span class="s1">&#39;das&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;house&#39;</span><span class="p">][</span><span class="s1">&#39;das&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">][</span><span class="s1">&#39;Buch&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">][</span><span class="s1">&#39;Buch&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;Buch&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">][</span><span class="s1">&#39;ein&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;ein&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;the&#39;</span><span class="p">][</span><span class="s1">&#39;Haus&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;house&#39;</span><span class="p">][</span><span class="s1">&#39;Haus&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">em_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">][</span><span class="kc">None</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.5</span>
</pre></div>
</div>
<p>And using an NLTK corpus. We train on only 10 sentences, since it is so slow:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">comtrans</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">com_ibm1</span> <span class="o">=</span> <span class="n">IBMModel1</span><span class="p">(</span><span class="n">comtrans</span><span class="o">.</span><span class="n">aligned_sents</span><span class="p">()[:</span><span class="mi">10</span><span class="p">],</span> <span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">com_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;bitte&#39;</span><span class="p">][</span><span class="s1">&#39;Please&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">com_ibm1</span><span class="o">.</span><span class="n">translation_table</span><span class="p">[</span><span class="s1">&#39;Sitzungsperiode&#39;</span><span class="p">][</span><span class="s1">&#39;session&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.0</span>
</pre></div>
</div>
</section>
</section>
<section id="evaluation">
<h3>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this heading">¶</a></h3>
<p>The evaluation metrics for alignments are usually not interested in the
contents of alignments but more often the comparison to a “gold standard”
alignment that has been been constructed by human experts. For this reason we
often want to work just with raw set operations against the alignment points.
This then gives us a very clean form for defining our evaluation metrics.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The AlignedSent class has no distinction of “possible” or “sure”
alignments. Thus all alignments are treated as “sure”.</p>
</div>
<p>Consider the following aligned sentence for evaluation:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_als</span> <span class="o">=</span> <span class="n">AlignedSent</span><span class="p">([</span><span class="s1">&#39;Resumption&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;session&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;Reprise&#39;</span><span class="p">,</span> <span class="s1">&#39;de&#39;</span><span class="p">,</span> <span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;session&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]))</span>
</pre></div>
</div>
<section id="precision">
<h4>Precision<a class="headerlink" href="#precision" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">precision</span> <span class="pre">=</span> <span class="pre">|A∩P|</span> <span class="pre">/</span> <span class="pre">|A|</span></code></p>
<p><strong>Precision</strong> is probably the most well known evaluation metric and it is implemented
in <a class="reference external" href="https://www.nltk.org/api/nltk.metrics.html#nltk.metrics.scores.precision">nltk.metrics.scores.precision</a>.  Since precision is simply interested in the
proportion of correct alignments, we calculate the ratio of the number of our
test alignments (<em>A</em>) that match a possible alignment (<em>P</em>), over the number of
test alignments provided. There is no penalty for missing a possible alignment
in our test alignments. An easy way to game this metric is to provide just one
test alignment that is in <em>P</em> <a class="reference internal" href="#och2000" id="id1"><span>[OCH2000]</span></a>.</p>
<p>Here are some examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.metrics</span> <span class="kn">import</span> <span class="n">precision</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span> <span class="o">=</span> <span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">Alignment</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;0-0 3-3&#39;</span><span class="p">),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">,</span> <span class="n">my_als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.6</span>
</pre></div>
</div>
</section>
<section id="recall">
<h4>Recall<a class="headerlink" href="#recall" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">recall</span> <span class="pre">=</span> <span class="pre">|A∩S|</span> <span class="pre">/</span> <span class="pre">|S|</span></code></p>
<p><strong>Recall</strong> is another well known evaluation metric that has a set based
implementation in NLTK as <a class="reference external" href="https://www.nltk.org/api/nltk.metrics.html#nltk.metrics.scores.recall">nltk.metrics.scores.recall</a>. Since recall is
simply interested in the proportion of found alignments, we calculate the
ratio of the number of our test alignments (<em>A</em>) that match a sure alignment
(<em>S</em>) over the number of sure alignments. There is no penalty for producing
a lot of test alignments. An easy way to game this metric is to include every
possible alignment in our test alignments, regardless if they are correct or
not <a class="reference internal" href="#och2000" id="id2"><span>[OCH2000]</span></a>.</p>
<p>Here are some examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.metrics</span> <span class="kn">import</span> <span class="n">recall</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">recall</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">))</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">(</span><span class="n">Alignment</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;0-0 3-3&#39;</span><span class="p">),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.66666...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">,</span> <span class="n">my_als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.75</span>
</pre></div>
</div>
</section>
<section id="alignment-error-rate-aer">
<h4>Alignment Error Rate (AER)<a class="headerlink" href="#alignment-error-rate-aer" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">AER</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">-</span> <span class="pre">(|A∩S|</span> <span class="pre">+</span> <span class="pre">|A∩P|)</span> <span class="pre">/</span> <span class="pre">(|A|</span> <span class="pre">+</span> <span class="pre">|S|)</span></code></p>
<p><strong>Alignment Error Rate</strong> is commonly used metric for assessing sentence
alignments. It combines precision and recall metrics together such that a
perfect alignment must have all of the sure alignments and may have some
possible alignments <a class="reference internal" href="#mihalcea2003" id="id3"><span>[MIHALCEA2003]</span></a> <a class="reference internal" href="#koehn2010" id="id4"><span>[KOEHN2010]</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#koehn2010" id="id5"><span>[KOEHN2010]</span></a> defines the AER as <code class="docutils literal notranslate"><span class="pre">AER</span> <span class="pre">=</span> <span class="pre">(|A∩S|</span> <span class="pre">+</span> <span class="pre">|A∩P|)</span> <span class="pre">/</span> <span class="pre">(|A|</span> <span class="pre">+</span> <span class="pre">|S|)</span></code>
in his book, but corrects it to the above in his online errata. This is
in line with <a class="reference internal" href="#mihalcea2003" id="id6"><span>[MIHALCEA2003]</span></a>.</p>
</div>
<p>Here are some examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.translate</span> <span class="kn">import</span> <span class="n">alignment_error_rate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alignment_error_rate</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alignment_error_rate</span><span class="p">(</span><span class="n">Alignment</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)]),</span> <span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alignment_error_rate</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">,</span> <span class="n">my_als</span><span class="o">.</span><span class="n">alignment</span><span class="p">)</span>
<span class="go">0.333333...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alignment_error_rate</span><span class="p">(</span><span class="n">als</span><span class="o">.</span><span class="n">alignment</span><span class="p">,</span> <span class="n">my_als</span><span class="o">.</span><span class="n">alignment</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">als</span><span class="o">.</span><span class="n">alignment</span> <span class="o">|</span> <span class="n">Alignment</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)]))</span>
<span class="go">0.222222...</span>
</pre></div>
</div>
<dl class="citation">
<dt class="label" id="och2000"><span class="brackets">OCH2000</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>)</span></dt>
<dd><p>Och, F. and Ney, H. (2000)
<em>Statistical Machine Translation</em>, EAMT Workshop</p>
</dd>
<dt class="label" id="mihalcea2003"><span class="brackets">MIHALCEA2003</span><span class="fn-backref">(<a href="#id3">1</a>,<a href="#id6">2</a>)</span></dt>
<dd><p>Mihalcea, R. and Pedersen, T. (2003)
<em>An evaluation exercise for word alignment</em>, HLT-NAACL 2003</p>
</dd>
<dt class="label" id="koehn2010"><span class="brackets">KOEHN2010</span><span class="fn-backref">(<a href="#id4">1</a>,<a href="#id5">2</a>)</span></dt>
<dd><p>Koehn, P. (2010)
<em>Statistical Machine Translation</em>, Cambridge University Press</p>
</dd>
</dl>
</section>
</section>
</section>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../_sources/howto/translate.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>