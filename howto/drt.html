<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: Sample usage for drt</title>
  

  <link rel="stylesheet" href="../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api/nltk.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <section id="sample-usage-for-drt">
<h1>Sample usage for drt<a class="headerlink" href="#sample-usage-for-drt" title="Permalink to this heading">¶</a></h1>
<section id="discourse-representation-theory">
<h2>Discourse Representation Theory<a class="headerlink" href="#discourse-representation-theory" title="Permalink to this heading">¶</a></h2>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.sem</span> <span class="kn">import</span> <span class="n">logic</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.inference</span> <span class="kn">import</span> <span class="n">TableauProver</span>
</pre></div>
</div>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h3>
<p>A DRS can be created with the <code class="docutils literal notranslate"><span class="pre">DRS()</span></code> constructor. This takes two arguments: a list of
discourse referents and list of conditions. .</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.sem.drt</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span> <span class="o">=</span> <span class="n">DrtExpression</span><span class="o">.</span><span class="n">fromstring</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">man_x</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;man(x)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">walk_x</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;walk(x)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">DRS</span><span class="p">([</span><span class="n">x</span><span class="p">],</span> <span class="p">[</span><span class="n">man_x</span><span class="p">,</span> <span class="n">walk_x</span><span class="p">]))</span>
<span class="go">([x],[man(x), walk(x)])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">parse()</span></code> method can also be applied directly to DRS
expressions, which allows them to be specified more
easily.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">drs1</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x],[man(x),walk(x)])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">drs1</span><span class="p">)</span>
<span class="go">([x],[man(x), walk(x)])</span>
</pre></div>
</div>
<p>DRSs can be <em>merged</em> using the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">drs2</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([y],[woman(y),stop(y)])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drs3</span> <span class="o">=</span> <span class="n">drs1</span> <span class="o">+</span> <span class="n">drs2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">drs3</span><span class="p">)</span>
<span class="go">(([x],[man(x), walk(x)]) + ([y],[woman(y), stop(y)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">drs3</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([x,y],[man(x), walk(x), woman(y), stop(y)])</span>
</pre></div>
</div>
<p>We can embed DRSs as components of an <code class="docutils literal notranslate"><span class="pre">implies</span></code> condition.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;([], [(</span><span class="si">%s</span><span class="s1"> -&gt; </span><span class="si">%s</span><span class="s1">)])&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">drs1</span><span class="p">,</span> <span class="n">drs2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="go">([],[(([x],[man(x), walk(x)]) -&gt; ([y],[woman(y), stop(y)]))])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">fol()</span></code> method converts DRSs into FOL formulae.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(man(x) &amp; walks(x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">all x.(man(x) -&gt; walks(x))</span>
</pre></div>
</div>
<p>In order to visualize a DRS, the <code class="docutils literal notranslate"><span class="pre">pretty_format()</span></code> method can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">drs3</span><span class="o">.</span><span class="n">pretty_format</span><span class="p">())</span>
<span class="go">  _________     __________</span>
<span class="go"> | x       |   | y        |</span>
<span class="go">(|---------| + |----------|)</span>
<span class="go"> | man(x)  |   | woman(y) |</span>
<span class="go"> | walk(x) |   | stop(y)  |</span>
<span class="go"> |_________|   |__________|</span>
</pre></div>
</div>
<section id="parse-to-semantics">
<h4>Parse to semantics<a class="headerlink" href="#parse-to-semantics" title="Permalink to this heading">¶</a></h4>
<p>DRSs can be used for building compositional semantics in a feature
based grammar. To specify that we want to use DRSs, the appropriate
logic parser needs be passed as a parameter to <code class="docutils literal notranslate"><span class="pre">load_earley()</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.parse</span> <span class="kn">import</span> <span class="n">load_parser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.sem.drt</span> <span class="kn">import</span> <span class="n">DrtParser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">load_parser</span><span class="p">(</span><span class="s1">&#39;grammars/book_grammars/drt.fcfg&#39;</span><span class="p">,</span> <span class="n">trace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">logic_parser</span><span class="o">=</span><span class="n">DrtParser</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tree</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;a dog barks&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">label</span><span class="p">()[</span><span class="s1">&#39;SEM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="gp">...</span>
<span class="go">([x],[dog(x), bark(x)])</span>
</pre></div>
</div>
<p>Alternatively, a <code class="docutils literal notranslate"><span class="pre">FeatStructReader</span></code> can be passed with the <code class="docutils literal notranslate"><span class="pre">logic_parser</span></code> set on it</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.featstruct</span> <span class="kn">import</span> <span class="n">FeatStructReader</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.grammar</span> <span class="kn">import</span> <span class="n">FeatStructNonterminal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">load_parser</span><span class="p">(</span><span class="s1">&#39;grammars/book_grammars/drt.fcfg&#39;</span><span class="p">,</span> <span class="n">trace</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fstruct_reader</span><span class="o">=</span><span class="n">FeatStructReader</span><span class="p">(</span><span class="n">fdict_class</span><span class="o">=</span><span class="n">FeatStructNonterminal</span><span class="p">,</span> <span class="n">logic_parser</span><span class="o">=</span><span class="n">DrtParser</span><span class="p">()))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tree</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;every girl chases a dog&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">label</span><span class="p">()[</span><span class="s1">&#39;SEM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">())</span>
<span class="gp">...</span>
<span class="go">([],[(([z1],[girl(z1)]) -&gt; ([z2],[dog(z2), chase(z1,z2)]))])</span>
</pre></div>
</div>
</section>
</section>
<section id="unit-tests">
<h3>Unit Tests<a class="headerlink" href="#unit-tests" title="Permalink to this heading">¶</a></h3>
<section id="parser">
<h4>Parser<a class="headerlink" href="#parser" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,y],[sees(x,y)])&#39;</span><span class="p">))</span>
<span class="go">([x,y],[sees(x,y)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), walks(x)])&#39;</span><span class="p">))</span>
<span class="go">([x],[man(x), walks(x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.([],[man(x), walks(x)])&#39;</span><span class="p">))</span>
<span class="go">\x.([],[man(x), walks(x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.\y.([],[sees(x,y)])&#39;</span><span class="p">))</span>
<span class="go">\x y.([],[sees(x,y)])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,y],[(x = y)])&#39;</span><span class="p">))</span>
<span class="go">([x,y],[(x = y)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,y],[(x != y)])&#39;</span><span class="p">))</span>
<span class="go">([x,y],[-(x = y)])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.([],[walks(x)])(john)&#39;</span><span class="p">))</span>
<span class="go">(\x.([],[walks(x)]))(john)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\R.\x.([],[big(x,R)])(\y.([],[mouse(y)]))&#39;</span><span class="p">))</span>
<span class="go">(\R x.([],[big(x,R)]))(\y.([],[mouse(y)]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x],[walks(x)]) + ([y],[runs(y)]))&#39;</span><span class="p">))</span>
<span class="go">(([x],[walks(x)]) + ([y],[runs(y)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x,y],[walks(x), jumps(y)]) + (([z],[twos(z)]) + ([w],[runs(w)])))&#39;</span><span class="p">))</span>
<span class="go">(([x,y],[walks(x), jumps(y)]) + ([z],[twos(z)]) + ([w],[runs(w)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;((([],[walks(x)]) + ([],[twos(x)])) + ([],[runs(x)]))&#39;</span><span class="p">))</span>
<span class="go">(([],[walks(x)]) + ([],[twos(x)]) + ([],[runs(x)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;((([],[walks(x)]) + ([],[runs(x)])) + (([],[threes(x)]) + ([],[fours(x)])))&#39;</span><span class="p">))</span>
<span class="go">(([],[walks(x)]) + ([],[runs(x)]) + ([],[threes(x)]) + ([],[fours(x)]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([],[walks(x)]) -&gt; ([],[runs(x)]))&#39;</span><span class="p">))</span>
<span class="go">(([],[walks(x)]) -&gt; ([],[runs(x)]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[PRO(x), sees(John,x)])&#39;</span><span class="p">))</span>
<span class="go">([x],[PRO(x), sees(John,x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), -([],[walks(x)])])&#39;</span><span class="p">))</span>
<span class="go">([x],[man(x), -([],[walks(x)])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])&#39;</span><span class="p">))</span>
<span class="go">([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;DRS([x],[walk(x)])&#39;</span><span class="p">))</span>
<span class="go">([x],[walk(x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;DRS([x][walk(x)])&#39;</span><span class="p">))</span>
<span class="go">([x],[walk(x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x][walk(x)])&#39;</span><span class="p">))</span>
<span class="go">([x],[walk(x)])</span>
</pre></div>
</div>
</section>
<section id="simplify">
<h4><code class="docutils literal notranslate"><span class="pre">simplify()</span></code><a class="headerlink" href="#simplify" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.([],[man(x), walks(x)])(john)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([],[man(john), walks(john)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.\y.([z],[dog(z),sees(x,y)])(john)(mary)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([z],[dog(z), sees(john,mary)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\R x.([],[big(x,R)])(\y.([],[mouse(y)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">\x.([],[big(x,\y.([],[mouse(y)]))])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x],[walks(x)]) + ([y],[runs(y)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([x,y],[walks(x), runs(y)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x,y],[walks(x), jumps(y)]) + (([z],[twos(z)]) + ([w],[runs(w)])))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([w,x,y,z],[walks(x), jumps(y), twos(z), runs(w)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;((([],[walks(x)]) + ([],[runs(x)]) + ([],[threes(x)]) + ([],[fours(x)])))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([],[walks(x), runs(x), threes(x), fours(x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x)])+([x],[walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,z1],[man(x), walks(z1)])&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([y],[boy(y), (([x],[dog(x)]) -&gt; ([],[chase(x,y)]))])+([x],[run(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([y,z1],[boy(y), (([x],[dog(x)]) -&gt; ([],[chase(x,y)])), run(z1)])&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\Q.(([x],[john(x),walks(x)]) + Q)(([x],[PRO(x),leaves(x)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,z1],[john(x), walks(x), PRO(z1), leaves(z1)])&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">logic</span><span class="o">.</span><span class="n">_counter</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([],[(([x],[dog(x)]) -&gt; ([e,y],[boy(y), chase(e), subj(e,x), obj(e,y)]))])+([e,x],[PRO(x), run(e), subj(e,x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">simplify</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">normalize</span><span class="p">())</span>
<span class="go">([e02,z5],[(([z3],[dog(z3)]) -&gt; ([e01,z4],[boy(z4), chase(e01), subj(e01,z3), obj(e01,z4)])), PRO(z5), run(e02), subj(e02,z5)])</span>
</pre></div>
</div>
</section>
<section id="fol">
<h4><code class="docutils literal notranslate"><span class="pre">fol()</span></code><a class="headerlink" href="#fol" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,y],[sees(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x y.sees(x,y)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(man(x) &amp; walks(x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.([],[man(x), walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">\x.(man(x) &amp; walks(x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x y.([],[sees(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">\x y.sees(x,y)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\x.([],[walks(x)])(john)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">\x.walks(x)(john)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\R x.([],[big(x,R)])(\y.([],[mouse(y)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">(\R x.big(x,R))(\y.mouse(y))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x],[walks(x)]) + ([y],[runs(y)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">(exists x.walks(x) &amp; exists y.runs(y))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([],[walks(x)]) -&gt; ([],[runs(x)]))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">(walks(x) -&gt; runs(x))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[PRO(x), sees(John,x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(PRO(x) &amp; sees(John,x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), -([],[walks(x)])])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(man(x) &amp; -walks(x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">all x.(man(x) -&gt; walks(x))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x) | walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(man(x) | walks(x))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;P(x) + ([x],[walks(x)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">(P(x) &amp; exists x.walks(x))</span>
</pre></div>
</div>
</section>
<section id="resolve-anaphora">
<h4><code class="docutils literal notranslate"><span class="pre">resolve_anaphora()</span></code><a class="headerlink" href="#resolve-anaphora" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nltk.sem.drt</span> <span class="kn">import</span> <span class="n">AnaphoraResolutionException</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">resolve_anaphora</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,y,z],[dog(x), cat(y), walks(z), PRO(z)])&#39;</span><span class="p">)))</span>
<span class="go">([x,y,z],[dog(x), cat(y), walks(z), (z = [x,y])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">resolve_anaphora</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([],[(([x],[dog(x)]) -&gt; ([y],[walks(y), PRO(y)]))])&#39;</span><span class="p">)))</span>
<span class="go">([],[(([x],[dog(x)]) -&gt; ([y],[walks(y), (y = x)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">resolve_anaphora</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([x,y],[]) + ([],[PRO(x)]))&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">simplify</span><span class="p">())</span>
<span class="go">([x,y],[(x = y)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">resolve_anaphora</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[walks(x), PRO(x)])&#39;</span><span class="p">)))</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">AnaphoraResolutionException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">Variable &#39;x&#39; does not resolve to anything.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">resolve_anaphora</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([e01,z6,z7],[boy(z6), PRO(z7), run(e01), subj(e01,z7)])&#39;</span><span class="p">)))</span>
<span class="go">([e01,z6,z7],[boy(z6), (z7 = z6), run(e01), subj(e01,z7)])</span>
</pre></div>
</div>
</section>
<section id="equiv">
<h4><code class="docutils literal notranslate"><span class="pre">equiv()</span></code>:<a class="headerlink" href="#equiv" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[man(x), walks(x)])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[walks(x), man(x)])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">equiv</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">TableauProver</span><span class="p">()))</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="replace">
<h4><code class="docutils literal notranslate"><span class="pre">replace()</span></code>:<a class="headerlink" href="#replace" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="replace-bound">
<h4>replace bound<a class="headerlink" href="#replace-bound" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">([x],[give(x,y,z)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([a],[give(a,y,z)])</span>
</pre></div>
</div>
</section>
<section id="replace-unbound">
<h4>replace unbound<a class="headerlink" href="#replace-unbound" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">([x],[give(x,a,z)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([x],[give(x,a,z)])</span>
</pre></div>
</div>
</section>
<section id="replace-unbound-with-bound">
<h4>replace unbound with bound<a class="headerlink" href="#replace-unbound-with-bound" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([z1],[give(z1,x,z)])&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([z1],[give(z1,x,z)])&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="replace-unbound-with-unbound">
<h4>replace unbound with unbound<a class="headerlink" href="#replace-unbound-with-unbound" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">([x],[give(x,z,z)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[give(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([x],[give(x,z,z)])</span>
</pre></div>
</div>
</section>
<section id="id1">
<h4>replace unbound<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>replace bound<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">(([x],[P(x,y,z)]) + ([y],[Q(x,y,z)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">(([a],[P(a,y,z)]) + ([y],[Q(a,y,z)]))</span>
</pre></div>
</div>
</section>
<section id="id3">
<h4>replace unbound with unbound<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="go">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,z)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
</pre></div>
</div>
</section>
<section id="replace-unbound-with-bound-on-same-side">
<h4>replace unbound with bound on same side<a class="headerlink" href="#replace-unbound-with-bound-on-same-side" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,x)]) + ([y],[Q(z1,y,w)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,x)]) + ([y],[Q(z1,y,w)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="replace-unbound-with-bound-on-other-side">
<h4>replace unbound with bound on other side<a class="headerlink" href="#replace-unbound-with-bound-on-other-side" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,z)]) + ([y],[Q(z1,y,x)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([y],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,z)]) + ([y],[Q(z1,y,x)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="replace-unbound-with-double-bound">
<h4>replace unbound with double bound<a class="headerlink" href="#replace-unbound-with-double-bound" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([x],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,x)]) + ([z1],[Q(z1,y,w)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x],[P(x,y,z)])+([x],[Q(x,y,w)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> \
<span class="gp">... </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(([z1],[P(z1,y,x)]) + ([z1],[Q(z1,y,w)]))&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="regression-tests">
<h4>regression tests<a class="headerlink" href="#regression-tests" title="Permalink to this heading">¶</a></h4>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x],[A(c), ([y],[B(x,y,z,a)])-&gt;([z],[C(x,y,z,a)])])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">pretty_format</span><span class="p">())</span>
<span class="go"> ____________________________________</span>
<span class="go">| x                                  |</span>
<span class="go">|------------------------------------|</span>
<span class="go">| A(c)                               |</span>
<span class="go">|   ____________      ____________   |</span>
<span class="go">|  | y          |    | z          |  |</span>
<span class="go">| (|------------| -&gt; |------------|) |</span>
<span class="go">|  | B(x,y,z,a) |    | C(x,y,z,a) |  |</span>
<span class="go">|  |____________|    |____________|  |</span>
<span class="go">|____________________________________|</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">fol</span><span class="p">())</span>
<span class="go">exists x.(A(c) &amp; all y.(B(x,y,z,a) -&gt; exists z.C(x,y,z,a)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,z,r)]) -&gt; ([z],[C(x,y,z,r)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,r,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([r],[A(c), (([y],[B(r,y,z,a)]) -&gt; ([z],[C(r,y,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([x],[A(c), (([r],[B(x,r,z,a)]) -&gt; ([z],[C(x,r,z,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)),</span> <span class="kc">True</span><span class="p">))</span>
<span class="go">([x],[A(c), (([y],[B(x,y,r,a)]) -&gt; ([r],[C(x,y,r,a)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span> <span class="o">==</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([l],[A(c), ([m],[B(l,m,z,a)])-&gt;([n],[C(l,m,n,a)])])&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([],[([x,y],[B(x,y,h), ([a,b],[dee(x,a,g)])])-&gt;([z,w],[cee(x,y,f), ([c,d],[E(x,c,d,e)])])])&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">free</span><span class="p">())</span>
<span class="go">[Variable(&#39;B&#39;), Variable(&#39;E&#39;), Variable(&#39;e&#39;), Variable(&#39;f&#39;), Variable(&#39;g&#39;), Variable(&#39;h&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">variables</span><span class="p">())</span>
<span class="go">[Variable(&#39;B&#39;), Variable(&#39;E&#39;), Variable(&#39;e&#39;), Variable(&#39;f&#39;), Variable(&#39;g&#39;), Variable(&#39;h&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">get_refs</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[Variable(&#39;a&#39;), Variable(&#39;b&#39;), Variable(&#39;c&#39;), Variable(&#39;d&#39;), Variable(&#39;w&#39;), Variable(&#39;x&#39;), Variable(&#39;y&#39;), Variable(&#39;z&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">conds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_refs</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
<span class="go">[Variable(&#39;x&#39;), Variable(&#39;y&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y), (x=y), ([],[B(x,y)])-&gt;([],[C(x,y)]), ([x,y],[D(x,y)])-&gt;([],[E(x,y)]), ([],[F(x,y)])-&gt;([x,y],[G(x,y)])])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([x],[A(x,x), (([],[B(x,x)]) -&gt; ([],[C(x,x)])), (([x,y],[D(x,y)]) -&gt; ([],[E(x,y)])), (([],[F(x,x)]) -&gt; ([x,y],[G(x,y)]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y), (x=y)]) -&gt; ([],[B(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">(([x],[A(x,x)]) -&gt; ([],[B(x,x)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y)]) -&gt; ([],[B(x,y), (x=y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">(([x,y],[A(x,y)]) -&gt; ([],[B(x,x)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y), (x=y), ([],[B(x,y)])])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([x],[A(x,x), ([],[B(x,x)])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y), ([],[B(x,y), (x=y)])])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([x,y],[A(x,y), ([],[B(x,x)])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([z8 z9 z10],[A(z8), z8=z10, z9=z10, B(z9), C(z10), D(z10)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([z9],[A(z9), B(z9), C(z9), D(z9)])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y), (x=y), ([],[B(x,y)]), ([x,y],[C(x,y)])])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([x],[A(x,x), ([],[B(x,x)]), ([x,y],[C(x,y)])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[A(x,y)]) + ([],[B(x,y), (x=y)]) + ([],[C(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">eliminate_equality</span><span class="p">())</span>
<span class="go">([x],[A(x,x), B(x,x), C(x,x)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;([x,y],[B(x,y)])+([x,y],[C(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))))</span>
<span class="go">(([x,y],[B(x,y)]) + ([x,y],[C(x,y)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;(([x,y],[B(x,y)])+([],[C(x,y)]))+([],[D(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))))</span>
<span class="go">(([x,y],[B(x,y)]) + ([],[C(x,y)]) + ([],[D(x,y)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;(([],[B(x,y)])+([],[C(x,y)]))+([],[D(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">))))</span>
<span class="go">(([],[B(x,x)]) + ([],[C(x,x)]) + ([],[D(x,x)]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dexpr</span><span class="p">(</span><span class="s1">&#39;(([],[B(x,y), ([x,y],[A(x,y)])])+([],[C(x,y)]))+([],[D(x,y)])&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span> <span class="n">DrtVariableExpression</span><span class="p">(</span><span class="n">Variable</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)))</span><span class="o">.</span><span class="n">normalize</span><span class="p">())</span>
<span class="go">(([],[B(z3,z1), ([z2,z3],[A(z3,z2)])]) + ([],[C(z3,z1)]) + ([],[D(z3,z1)]))</span>
</pre></div>
</div>
</section>
</section>
<section id="parse-errors">
<h3>Parse errors<a class="headerlink" href="#parse-errors" title="Permalink to this heading">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_error</span><span class="p">(</span><span class="n">drtstring</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span> <span class="n">dexpr</span><span class="p">(</span><span class="n">drtstring</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">except</span> <span class="n">logic</span><span class="o">.</span><span class="n">LogicalExpressionException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expression expected.</span>

<span class="go">^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expression expected.</span>
<span class="go">(</span>
<span class="go"> ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;()&#39;</span><span class="p">)</span>
<span class="go">Unexpected token: &#39;)&#39;.  Expression expected.</span>
<span class="go">()</span>
<span class="go"> ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expected token &#39;]&#39;.</span>
<span class="go">([</span>
<span class="go">  ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([,&#39;</span><span class="p">)</span>
<span class="go">&#39;,&#39; is an illegal variable name.  Constants may not be quantified.</span>
<span class="go">([,</span>
<span class="go">  ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x,&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Variable expected.</span>
<span class="go">([x,</span>
<span class="go">    ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([]&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expected token &#39;[&#39;.</span>
<span class="go">([]</span>
<span class="go">   ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([][&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expected token &#39;]&#39;.</span>
<span class="go">([][</span>
<span class="go">    ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([][,&#39;</span><span class="p">)</span>
<span class="go">Unexpected token: &#39;,&#39;.  Expression expected.</span>
<span class="go">([][,</span>
<span class="go">    ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([][]&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expected token &#39;)&#39;.</span>
<span class="go">([][]</span>
<span class="go">     ^</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_error</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;([x][man(x)]) |&#39;</span><span class="p">)</span>
<span class="go">End of input found.  Expression expected.</span>
<span class="go">([x][man(x)]) |</span>
<span class="go">               ^</span>
</pre></div>
</div>
</section>
<section id="pretty-printing">
<h3>Pretty Printing<a class="headerlink" href="#pretty-printing" title="Permalink to this heading">¶</a></h3>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([],[])&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go"> __</span>
<span class="go">|  |</span>
<span class="go">|--|</span>
<span class="go">|__|</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([],[([x],[big(x), dog(x)]) -&gt; ([],[bark(x)]) -([x],[walk(x)])])&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go"> _____________________________</span>
<span class="go">|                             |</span>
<span class="go">|-----------------------------|</span>
<span class="go">|   ________      _________   |</span>
<span class="go">|  | x      |    |         |  |</span>
<span class="go">| (|--------| -&gt; |---------|) |</span>
<span class="go">|  | big(x) |    | bark(x) |  |</span>
<span class="go">|  | dog(x) |    |_________|  |</span>
<span class="go">|  |________|                 |</span>
<span class="go">|      _________              |</span>
<span class="go">|     | x       |             |</span>
<span class="go">| __  |---------|             |</span>
<span class="go">|   | | walk(x) |             |</span>
<span class="go">|     |_________|             |</span>
<span class="go">|_____________________________|</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([x,y],[x=y]) + ([z],[dog(z), walk(z)])&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go">  _________     _________</span>
<span class="go"> | x y     |   | z       |</span>
<span class="go">(|---------| + |---------|)</span>
<span class="go"> | (x = y) |   | dog(z)  |</span>
<span class="go"> |_________|   | walk(z) |</span>
<span class="go">               |_________|</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([],[([x],[]) | ([y],[]) | ([z],[dog(z), walk(z)])])&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go"> _______________________________</span>
<span class="go">|                               |</span>
<span class="go">|-------------------------------|</span>
<span class="go">|   ___     ___     _________   |</span>
<span class="go">|  | x |   | y |   | z       |  |</span>
<span class="go">| (|---| | |---| | |---------|) |</span>
<span class="go">|  |___|   |___|   | dog(z)  |  |</span>
<span class="go">|                  | walk(z) |  |</span>
<span class="go">|                  |_________|  |</span>
<span class="go">|_______________________________|</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dexpr</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\P.\Q.(([x],[]) + P(x) + Q(x))(\x.([],[dog(x)]))&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="go">          ___                        ________</span>
<span class="go"> \       | x |                 \    |        |</span>
<span class="go"> /\ P Q.(|---| + P(x) + Q(x))( /\ x.|--------|)</span>
<span class="go">         |___|                      | dog(x) |</span>
<span class="go">                                    |________|</span>
</pre></div>
</div>
</section>
</section>
</section>


        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../_sources/howto/drt.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>