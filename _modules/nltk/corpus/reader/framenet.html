<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: nltk.corpus.reader.framenet</title>
  

  <link rel="stylesheet" href="../../../../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../../../../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../../../../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../api/nltk.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <h1>Source code for nltk.corpus.reader.framenet</h1><div class="highlight"><pre>
<span></span><span class="c1"># Natural Language Toolkit: Framenet Corpus Reader</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2001-2023 NLTK Project</span>
<span class="c1"># Authors: Chuck Wooters &lt;wooters@icsi.berkeley.edu&gt;,</span>
<span class="c1">#          Nathan Schneider &lt;nathan.schneider@georgetown.edu&gt;</span>
<span class="c1"># URL: &lt;https://www.nltk.org/&gt;</span>
<span class="c1"># For license information, see LICENSE.TXT</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Corpus reader for the FrameNet 1.7 lexicon and corpus.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">textwrap</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span><span class="p">,</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">zip_longest</span>
<span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">nltk.corpus.reader</span> <span class="kn">import</span> <span class="n">XMLCorpusReader</span><span class="p">,</span> <span class="n">XMLCorpusView</span>
<span class="kn">from</span> <span class="nn">nltk.util</span> <span class="kn">import</span> <span class="n">LazyConcatenation</span><span class="p">,</span> <span class="n">LazyIteratorList</span><span class="p">,</span> <span class="n">LazyMap</span>

<span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;epytext en&quot;</span>


<div class="viewcode-block" id="mimic_wrap"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.mimic_wrap">[docs]</a><span class="k">def</span> <span class="nf">mimic_wrap</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">wrap_at</span><span class="o">=</span><span class="mi">65</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrap the first of &#39;lines&#39; with textwrap and the remaining lines at exactly the same</span>
<span class="sd">    positions as the first.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">l0</span> <span class="o">=</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">wrap_at</span><span class="p">,</span> <span class="n">drop_whitespace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">l0</span>

    <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
        <span class="n">il0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">line</span> <span class="ow">and</span> <span class="n">il0</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">l0</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">l0</span><span class="p">[</span><span class="n">il0</span><span class="p">])]</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">l0</span><span class="p">[</span><span class="n">il0</span><span class="p">])</span> <span class="p">:]</span>
            <span class="n">il0</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">:</span>  <span class="c1"># Remaining stuff on this line past the end of the mimicked line.</span>
            <span class="c1"># So just textwrap this line.</span>
            <span class="k">yield from</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">wrap_at</span><span class="p">,</span> <span class="n">drop_whitespace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
        <span class="k">yield</span> <span class="nb">list</span><span class="p">(</span><span class="n">_</span><span class="p">(</span><span class="n">l</span><span class="p">))</span></div>


<span class="k">def</span> <span class="nf">_pretty_longstring</span><span class="p">(</span><span class="n">defstr</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">wrap_at</span><span class="o">=</span><span class="mi">65</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a long string.</span>

<span class="sd">    :param defstr: The string to be printed.</span>
<span class="sd">    :type defstr: str</span>
<span class="sd">    :return: A nicely formatted string representation of the long string.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">defstr</span><span class="p">,</span> <span class="n">wrap_at</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">line</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_any</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing any AttrDict object.</span>

<span class="sd">    :param obj: The obj to be printed.</span>
<span class="sd">    :type obj: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the AttrDict object.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">65</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">]</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_pretty_longstring</span><span class="p">(</span><span class="n">obj</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;  &quot;</span><span class="p">))</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">obj</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_semtype</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a semantic type.</span>

<span class="sd">    :param st: The semantic type to be printed.</span>
<span class="sd">    :type st: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the semantic type.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">semkeys</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">semkeys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;None&gt;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;semantic type (</span><span class="si">{0.ID}</span><span class="s2">): </span><span class="si">{0.name}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;abbrev&quot;</span> <span class="ow">in</span> <span class="n">semkeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[abbrev] </span><span class="si">{</span><span class="n">st</span><span class="o">.</span><span class="n">abbrev</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;definition&quot;</span> <span class="ow">in</span> <span class="n">semkeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[definition]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="n">_pretty_longstring</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="s2">&quot;  &quot;</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[rootType] </span><span class="si">{</span><span class="n">st</span><span class="o">.</span><span class="n">rootType</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">st</span><span class="o">.</span><span class="n">rootType</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">superType</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[superType] &lt;None&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[superType] </span><span class="si">{</span><span class="n">st</span><span class="o">.</span><span class="n">superType</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">st</span><span class="o">.</span><span class="n">superType</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[subTypes] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">subTypes</span><span class="p">)</span><span class="si">}</span><span class="s2"> subtypes</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="s2">&quot;  &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">subTypes</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">subTypes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_frame_relation_type</span><span class="p">(</span><span class="n">freltyp</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a frame relation type.</span>

<span class="sd">    :param freltyp: The frame relation type to be printed.</span>
<span class="sd">    :type freltyp: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the frame relation type.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&lt;frame relation type (</span><span class="si">{0.ID}</span><span class="s2">): </span><span class="si">{0.superFrameName}</span><span class="s2"> -- </span><span class="si">{0.name}</span><span class="s2"> -&gt; </span><span class="si">{0.subFrameName}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">freltyp</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_frame_relation</span><span class="p">(</span><span class="n">frel</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a frame relation.</span>

<span class="sd">    :param frel: The frame relation to be printed.</span>
<span class="sd">    :type frel: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the frame relation.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{0.type.superFrameName}</span><span class="s2">=</span><span class="si">{0.superFrameName}</span><span class="s2"> -- </span><span class="si">{0.type.name}</span><span class="s2"> -&gt; </span><span class="si">{0.type.subFrameName}</span><span class="s2">=</span><span class="si">{0.subFrameName}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">frel</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_fe_relation</span><span class="p">(</span><span class="n">ferel</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing an FE relation.</span>

<span class="sd">    :param ferel: The FE relation to be printed.</span>
<span class="sd">    :type ferel: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the FE relation.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&lt;</span><span class="si">{0.type.superFrameName}</span><span class="s2">=</span><span class="si">{0.frameRelation.superFrameName}</span><span class="s2">.</span><span class="si">{0.superFEName}</span><span class="s2"> -- </span><span class="si">{0.type.name}</span><span class="s2"> -&gt; </span><span class="si">{0.type.subFrameName}</span><span class="s2">=</span><span class="si">{0.frameRelation.subFrameName}</span><span class="s2">.</span><span class="si">{0.subFEName}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">ferel</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_lu</span><span class="p">(</span><span class="n">lu</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a lexical unit.</span>

<span class="sd">    :param lu: The lu to be printed.</span>
<span class="sd">    :type lu: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the lexical unit.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">lukeys</span> <span class="o">=</span> <span class="n">lu</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;lexical unit (</span><span class="si">{0.ID}</span><span class="s2">): </span><span class="si">{0.name}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lu</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;definition&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[definition]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="n">_pretty_longstring</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="s2">&quot;  &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;frame&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[frame] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;incorporatedFE&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[incorporatedFE] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">incorporatedFE</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;POS&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[POS] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">POS</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[status] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;totalAnnotated&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[totalAnnotated] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">totalAnnotated</span><span class="si">}</span><span class="s2"> annotated examples</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;lexemes&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[lexemes] </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lex</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">lex</span><span class="o">.</span><span class="n">POS</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">lex</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">lexemes</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;semTypes&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[semTypes] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span><span class="si">}</span><span class="s2"> semantic types</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;URL&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[URL] </span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">URL</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;subCorpus&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">subc</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">subCorpus</span><span class="p">]</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[subCorpus] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">subCorpus</span><span class="p">)</span><span class="si">}</span><span class="s2"> subcorpora</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">textwrap</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">subc</span><span class="p">)),</span> <span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;exemplars&quot;</span> <span class="ow">in</span> <span class="n">lukeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[exemplars] </span><span class="si">{}</span><span class="s2"> sentences across all subcorpora</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">exemplars</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_exemplars</span><span class="p">(</span><span class="n">exemplars</span><span class="p">,</span> <span class="n">lu</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a list of exemplar sentences for a lexical unit.</span>

<span class="sd">    :param sent: The list of exemplar sentences to be printed.</span>
<span class="sd">    :type sent: list(AttrDict)</span>
<span class="sd">    :return: An index of the text of the exemplar sentences.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;exemplar sentences for </span><span class="si">{0.name}</span><span class="s2"> in </span><span class="si">{0.frame.name}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lu</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">exemplars</span><span class="p">):</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_fulltext_sentences</span><span class="p">(</span><span class="n">sents</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a list of annotated sentences for a full-text document.</span>

<span class="sd">    :param sent: The list of sentences to be printed.</span>
<span class="sd">    :type sent: list(AttrDict)</span>
<span class="sd">    :return: An index of the text of the sentences.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;full-text document (</span><span class="si">{0.ID}</span><span class="s2">) </span><span class="si">{0.name}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sents</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[corpid] </span><span class="si">{0.corpid}</span><span class="se">\n</span><span class="s2">[corpname] </span><span class="si">{0.corpname}</span><span class="se">\n</span><span class="s2">[description] </span><span class="si">{0.description}</span><span class="se">\n</span><span class="s2">[URL] </span><span class="si">{0.URL}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">sents</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[sentence]</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">sent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sents</span><span class="o">.</span><span class="n">sentence</span><span class="p">):</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_fulltext_sentence</span><span class="p">(</span><span class="n">sent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing an annotated sentence from a full-text document.</span>

<span class="sd">    :param sent: The sentence to be printed.</span>
<span class="sd">    :type sent: list(AttrDict)</span>
<span class="sd">    :return: The text of the sentence with annotation set indices on frame targets.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;full-text sentence (</span><span class="si">{0.ID}</span><span class="s2">) in </span><span class="si">{1}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">sent</span><span class="p">,</span> <span class="n">sent</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">sent</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[POS] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">POS</span><span class="p">)</span><span class="si">}</span><span class="s2"> tags</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[POS_tagset] </span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">POS_tagset</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[text] + [annotationSet]</span><span class="se">\n\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="n">sent</span><span class="o">.</span><span class="n">_ascii</span><span class="p">()</span>  <span class="c1"># -&gt; _annotation_ascii()</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_pos</span><span class="p">(</span><span class="n">aset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a sentence with its POS tags.</span>

<span class="sd">    :param aset: The POS annotation set of the sentence to be printed.</span>
<span class="sd">    :type sent: list(AttrDict)</span>
<span class="sd">    :return: The text of the sentence and its POS tags.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;POS annotation set (</span><span class="si">{0.ID}</span><span class="s2">) </span><span class="si">{0.POS_tagset}</span><span class="s2"> in sentence </span><span class="si">{0.sent.ID}</span><span class="s2">:</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">aset</span>
    <span class="p">)</span>

    <span class="c1"># list the target spans and their associated aset index</span>
    <span class="n">overt</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">aset</span><span class="o">.</span><span class="n">POS</span><span class="p">)</span>

    <span class="n">sent</span> <span class="o">=</span> <span class="n">aset</span><span class="o">.</span><span class="n">sent</span>
    <span class="n">s0</span> <span class="o">=</span> <span class="n">sent</span><span class="o">.</span><span class="n">text</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">adjust</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;Overlapping targets?&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">lbl</span><span class="p">))</span>
        <span class="n">s1</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lbl</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">):</span>
            <span class="c1"># add space in the sentence to make room for the annotation index</span>
            <span class="n">amt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">lbl</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">s0</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">s0</span><span class="p">[:</span> <span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;~&quot;</span> <span class="o">*</span> <span class="n">amt</span> <span class="o">+</span> <span class="n">s0</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span> <span class="p">:]</span>
            <span class="p">)</span>  <span class="c1"># &#39;~&#39; to prevent line wrapping</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[:</span> <span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">amt</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span> <span class="p">:]</span>
            <span class="n">adjust</span> <span class="o">+=</span> <span class="n">amt</span>
        <span class="n">s2</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">lbl</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">k</span>

    <span class="n">long_lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">]</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">mimic_wrap</span><span class="p">(</span><span class="n">long_lines</span><span class="p">),</span> <span class="n">fillvalue</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_annotation</span><span class="p">(</span><span class="n">sent</span><span class="p">,</span> <span class="n">aset_level</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing an exemplar sentence for a lexical unit.</span>

<span class="sd">    :param sent: An annotation set or exemplar sentence to be printed.</span>
<span class="sd">    :param aset_level: If True, &#39;sent&#39; is actually an annotation set within a sentence.</span>
<span class="sd">    :type sent: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the exemplar sentence</span>
<span class="sd">    with its target, frame, and FE annotations.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">sentkeys</span> <span class="o">=</span> <span class="n">sent</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;annotation set&quot;</span> <span class="k">if</span> <span class="n">aset_level</span> <span class="k">else</span> <span class="s2">&quot;exemplar sentence&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">):</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">aset_level</span><span class="p">:</span>  <span class="c1"># TODO: any UNANN exemplars?</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[status] </span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;corpID&quot;</span><span class="p">,</span> <span class="s2">&quot;docID&quot;</span><span class="p">,</span> <span class="s2">&quot;paragNo&quot;</span><span class="p">,</span> <span class="s2">&quot;sentNo&quot;</span><span class="p">,</span> <span class="s2">&quot;aPos&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">sentkeys</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">sent</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[LU] (</span><span class="si">{0.ID}</span><span class="s2">) </span><span class="si">{0.name}</span><span class="s2"> in </span><span class="si">{0.frame.name}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">LU</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sent</span><span class="o">.</span><span class="n">LU</span>
        <span class="k">else</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[LU] Not found!&quot;</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[frame] (</span><span class="si">{0.ID}</span><span class="s2">) </span><span class="si">{0.name}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">sent</span><span class="o">.</span><span class="n">frame</span>
    <span class="p">)</span>  <span class="c1"># redundant with above, but .frame is convenient</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">aset_level</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[annotationSet] </span><span class="si">{}</span><span class="s2"> annotation sets</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[POS] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">POS</span><span class="p">)</span><span class="si">}</span><span class="s2"> tags</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[POS_tagset] </span><span class="si">{</span><span class="n">sent</span><span class="o">.</span><span class="n">POS_tagset</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[GF] </span><span class="si">{}</span><span class="s2"> relation</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">GF</span><span class="p">),</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">GF</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[PT] </span><span class="si">{}</span><span class="s2"> phrase</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">PT</span><span class="p">),</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">PT</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Special Layers</span>
<span class="sd">    --------------</span>

<span class="sd">    The &#39;NER&#39; layer contains, for some of the data, named entity labels.</span>

<span class="sd">    The &#39;WSL&#39; (word status layer) contains, for some of the data,</span>
<span class="sd">    spans which should not in principle be considered targets (NT).</span>

<span class="sd">    The &#39;Other&#39; layer records relative clause constructions (Rel=relativizer, Ant=antecedent),</span>
<span class="sd">    pleonastic &#39;it&#39; (Null), and existential &#39;there&#39; (Exist).</span>
<span class="sd">    On occasion they are duplicated by accident (e.g., annotationSet 1467275 in lu6700.xml).</span>

<span class="sd">    The &#39;Sent&#39; layer appears to contain labels that the annotator has flagged the</span>
<span class="sd">    sentence with for their convenience: values include</span>
<span class="sd">    &#39;sense1&#39;, &#39;sense2&#39;, &#39;sense3&#39;, etc.;</span>
<span class="sd">    &#39;Blend&#39;, &#39;Canonical&#39;, &#39;Idiom&#39;, &#39;Metaphor&#39;, &#39;Special-Sent&#39;,</span>
<span class="sd">    &#39;keepS&#39;, &#39;deleteS&#39;, &#39;reexamine&#39;</span>
<span class="sd">    (sometimes they are duplicated for no apparent reason).</span>

<span class="sd">    The POS-specific layers may contain the following kinds of spans:</span>
<span class="sd">    Asp (aspectual particle), Non-Asp (non-aspectual particle),</span>
<span class="sd">    Cop (copula), Supp (support), Ctrlr (controller),</span>
<span class="sd">    Gov (governor), X. Gov and X always cooccur.</span>

<span class="sd">    &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">    &gt;&gt;&gt; def f(luRE, lyr, ignore=set()):</span>
<span class="sd">    ...   for i,ex in enumerate(fn.exemplars(luRE)):</span>
<span class="sd">    ...     if lyr in ex and ex[lyr] and set(zip(*ex[lyr])[2]) - ignore:</span>
<span class="sd">    ...       print(i,ex[lyr])</span>

<span class="sd">    - Verb: Asp, Non-Asp</span>
<span class="sd">    - Noun: Cop, Supp, Ctrlr, Gov, X</span>
<span class="sd">    - Adj: Cop, Supp, Ctrlr, Gov, X</span>
<span class="sd">    - Prep: Cop, Supp, Ctrlr</span>
<span class="sd">    - Adv: Ctrlr</span>
<span class="sd">    - Scon: (none)</span>
<span class="sd">    - Art: (none)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;NER&quot;</span><span class="p">,</span> <span class="s2">&quot;WSL&quot;</span><span class="p">,</span> <span class="s2">&quot;Other&quot;</span><span class="p">,</span> <span class="s2">&quot;Sent&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">sent</span> <span class="ow">and</span> <span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">]:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[</span><span class="si">{}</span><span class="s2">] </span><span class="si">{}</span><span class="s2"> entr</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">lyr</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">]),</span> <span class="s2">&quot;ies&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;y&quot;</span>
            <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[text] + [Target] + [FE]&quot;</span>
    <span class="c1"># POS-specific layers: syntactically important words that are neither the target</span>
    <span class="c1"># nor the FEs. Include these along with the first FE layer but with &#39;^&#39; underlining.</span>
    <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Verb&quot;</span><span class="p">,</span> <span class="s2">&quot;Noun&quot;</span><span class="p">,</span> <span class="s2">&quot;Adj&quot;</span><span class="p">,</span> <span class="s2">&quot;Adv&quot;</span><span class="p">,</span> <span class="s2">&quot;Prep&quot;</span><span class="p">,</span> <span class="s2">&quot;Scon&quot;</span><span class="p">,</span> <span class="s2">&quot;Art&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">sent</span> <span class="ow">and</span> <span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">]:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; + [</span><span class="si">{</span><span class="n">lyr</span><span class="si">}</span><span class="s2">]&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;FE2&quot;</span> <span class="ow">in</span> <span class="n">sentkeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot; + [FE2]&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;FE3&quot;</span> <span class="ow">in</span> <span class="n">sentkeys</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot; + [FE3]&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="n">sent</span><span class="o">.</span><span class="n">_ascii</span><span class="p">()</span>  <span class="c1"># -&gt; _annotation_ascii()</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_annotation_ascii</span><span class="p">(</span><span class="n">sent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a sentence or FE annotation set, construct the width-limited string showing</span>
<span class="sd">    an ASCII visualization of the sentence&#39;s annotations, calling either</span>
<span class="sd">    _annotation_ascii_frames() or _annotation_ascii_FEs() as appropriate.</span>
<span class="sd">    This will be attached as a method to appropriate AttrDict instances</span>
<span class="sd">    and called in the full pretty-printing of the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sent</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s2">&quot;fulltext_sentence&quot;</span> <span class="ow">or</span> <span class="p">(</span>
        <span class="s2">&quot;annotationSet&quot;</span> <span class="ow">in</span> <span class="n">sent</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span>
    <span class="p">):</span>
        <span class="c1"># a full-text sentence OR sentence with multiple targets.</span>
        <span class="c1"># (multiple targets = &gt;2 annotation sets, because the first annotation set is POS.)</span>
        <span class="k">return</span> <span class="n">_annotation_ascii_frames</span><span class="p">(</span><span class="n">sent</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># an FE annotation set, or an LU sentence with 1 target</span>
        <span class="k">return</span> <span class="n">_annotation_ascii_FEs</span><span class="p">(</span><span class="n">sent</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_annotation_ascii_frames</span><span class="p">(</span><span class="n">sent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ASCII string rendering of the sentence along with its targets and frame names.</span>
<span class="sd">    Called for all full-text sentences, as well as the few LU sentences with multiple</span>
<span class="sd">    targets (e.g., fn.lu(6412).exemplars[82] has two want.v targets).</span>
<span class="sd">    Line-wrapped to limit the display width.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># list the target spans and their associated aset index</span>
    <span class="n">overt</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">aset</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">aset</span><span class="o">.</span><span class="n">Target</span><span class="p">:</span>
            <span class="n">indexS</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="si">}</span><span class="s2">]&quot;</span>
            <span class="k">if</span> <span class="n">aset</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;UNANN&quot;</span> <span class="ow">or</span> <span class="n">aset</span><span class="o">.</span><span class="n">LU</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;Problem&quot;</span><span class="p">:</span>
                <span class="n">indexS</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span>
                <span class="k">if</span> <span class="n">aset</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;UNANN&quot;</span><span class="p">:</span>
                    <span class="n">indexS</span> <span class="o">+=</span> <span class="s2">&quot;!&quot;</span>  <span class="c1"># warning indicator that there is a frame annotation but no FE annotation</span>
                <span class="k">if</span> <span class="n">aset</span><span class="o">.</span><span class="n">LU</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;Problem&quot;</span><span class="p">:</span>
                    <span class="n">indexS</span> <span class="o">+=</span> <span class="s2">&quot;?&quot;</span>  <span class="c1"># warning indicator that there is a missing LU definition (because the LU has Problem status)</span>
            <span class="n">overt</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">aset</span><span class="o">.</span><span class="n">LU</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">indexS</span><span class="p">))</span>
    <span class="n">overt</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">overt</span><span class="p">)</span>

    <span class="n">duplicates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">o</span><span class="p">,</span> <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">asetIndex</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">overt</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">o</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
            <span class="c1"># multiple annotation sets on the same target</span>
            <span class="c1"># (e.g. due to a coordination construction or multiple annotators)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="ow">and</span> <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">fname</span>
            <span class="p">):</span>  <span class="c1"># same target, same frame</span>
                <span class="c1"># splice indices together</span>
                <span class="n">combinedIndex</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">asetIndex</span>
                <span class="p">)</span>  <span class="c1"># e.g., &#39;[1][2]&#39;, &#39;[1]! [2]&#39;</span>
                <span class="n">combinedIndex</span> <span class="o">=</span> <span class="n">combinedIndex</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; !&quot;</span><span class="p">,</span> <span class="s2">&quot;! &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; ?&quot;</span><span class="p">,</span> <span class="s2">&quot;? &quot;</span><span class="p">)</span>
                <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">overt</span><span class="p">[</span><span class="n">o</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">combinedIndex</span><span class="p">,)</span>
                <span class="n">duplicates</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># different frames, same or overlapping targets</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">sent</span><span class="o">.</span><span class="n">text</span>
                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">asetIndex</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">asetIndex</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">sent</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; :: &quot;</span> <span class="o">+</span> <span class="n">fname</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">(Unable to display sentence with targets marked inline due to overlap)&quot;</span>
                <span class="k">return</span> <span class="n">s</span>
    <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">duplicates</span><span class="p">)):</span>
        <span class="k">del</span> <span class="n">overt</span><span class="p">[</span><span class="n">o</span><span class="p">]</span>

    <span class="n">s0</span> <span class="o">=</span> <span class="n">sent</span><span class="o">.</span><span class="n">text</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">s11</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">adjust</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">fAbbrevs</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">asetIndex</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">i</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span>
                <span class="s2">&quot;Overlapping targets?&quot;</span>
                <span class="o">+</span> <span class="p">(</span>
                    <span class="s2">&quot; UNANN&quot;</span>
                    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">aset</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;UNANN&quot;</span> <span class="k">for</span> <span class="n">aset</span> <span class="ow">in</span> <span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                    <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="p">),</span>
                <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">asetIndex</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">s1</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">short</span> <span class="o">=</span> <span class="n">fname</span><span class="p">[:</span> <span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">short</span> <span class="ow">in</span> <span class="n">fAbbrevs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fAbbrevs</span><span class="p">[</span><span class="n">short</span><span class="p">]</span> <span class="o">==</span> <span class="n">fname</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">r</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">short</span> <span class="o">=</span> <span class="n">fname</span><span class="p">[:</span> <span class="n">k</span> <span class="o">-</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># short not in fAbbrevs</span>
                <span class="n">fAbbrevs</span><span class="p">[</span><span class="n">short</span><span class="p">]</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="n">s11</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">short</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">asetIndex</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">):</span>
            <span class="c1"># add space in the sentence to make room for the annotation index</span>
            <span class="n">amt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asetIndex</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">s0</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">s0</span><span class="p">[:</span> <span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;~&quot;</span> <span class="o">*</span> <span class="n">amt</span> <span class="o">+</span> <span class="n">s0</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span> <span class="p">:]</span>
            <span class="p">)</span>  <span class="c1"># &#39;~&#39; to prevent line wrapping</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="n">s1</span><span class="p">[:</span> <span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">amt</span> <span class="o">+</span> <span class="n">s1</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span> <span class="p">:]</span>
            <span class="n">s11</span> <span class="o">=</span> <span class="n">s11</span><span class="p">[:</span> <span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">amt</span> <span class="o">+</span> <span class="n">s11</span><span class="p">[</span><span class="n">k</span> <span class="o">+</span> <span class="n">adjust</span> <span class="p">:]</span>
            <span class="n">adjust</span> <span class="o">+=</span> <span class="n">amt</span>
        <span class="n">s2</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">asetIndex</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">k</span>

    <span class="n">long_lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s11</span><span class="p">,</span> <span class="n">s2</span><span class="p">]</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">mimic_wrap</span><span class="p">(</span><span class="n">long_lines</span><span class="p">),</span> <span class="n">fillvalue</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">fAbbrevs</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot; (&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">fAbbrevs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">fAbbrevs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">fAbbrevs</span><span class="p">)),</span> <span class="s2">&quot;Abbreviation clash&quot;</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_annotation_ascii_FE_layer</span><span class="p">(</span><span class="n">overt</span><span class="p">,</span> <span class="n">ni</span><span class="p">,</span> <span class="n">feAbbrevs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Helper for _annotation_ascii_FEs().&quot;&quot;&quot;</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">fename</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">:</span>
        <span class="n">s1</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;^&quot;</span> <span class="k">if</span> <span class="n">fename</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">short</span> <span class="o">=</span> <span class="n">fename</span><span class="p">[:</span> <span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fename</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">short</span><span class="p">):</span>
            <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">short</span> <span class="ow">in</span> <span class="n">feAbbrevs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">feAbbrevs</span><span class="p">[</span><span class="n">short</span><span class="p">]</span> <span class="o">==</span> <span class="n">fename</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">r</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">short</span> <span class="o">=</span> <span class="n">fename</span><span class="p">[:</span> <span class="n">k</span> <span class="o">-</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># short not in feAbbrevs</span>
                <span class="n">feAbbrevs</span><span class="p">[</span><span class="n">short</span><span class="p">]</span> <span class="o">=</span> <span class="n">fename</span>
        <span class="n">s2</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">short</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">k</span>

    <span class="n">sNI</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">ni</span><span class="p">:</span>
        <span class="n">sNI</span> <span class="o">+=</span> <span class="s2">&quot; [&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">ni</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">sNI</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">_annotation_ascii_FEs</span><span class="p">(</span><span class="n">sent</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ASCII string rendering of the sentence along with a single target and its FEs.</span>
<span class="sd">    Secondary and tertiary FE layers are included if present.</span>
<span class="sd">    &#39;sent&#39; can be an FE annotation set or an LU sentence with a single target.</span>
<span class="sd">    Line-wrapped to limit the display width.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">feAbbrevs</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="n">posspec</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># POS-specific layer spans (e.g., Supp[ort], Cop[ula])</span>
    <span class="n">posspec_separate</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;Verb&quot;</span><span class="p">,</span> <span class="s2">&quot;Noun&quot;</span><span class="p">,</span> <span class="s2">&quot;Adj&quot;</span><span class="p">,</span> <span class="s2">&quot;Adv&quot;</span><span class="p">,</span> <span class="s2">&quot;Prep&quot;</span><span class="p">,</span> <span class="s2">&quot;Scon&quot;</span><span class="p">,</span> <span class="s2">&quot;Art&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">sent</span> <span class="ow">and</span> <span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">sent</span><span class="p">[</span><span class="n">lyr</span><span class="p">]:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">lbl</span> <span class="o">==</span> <span class="s2">&quot;X&quot;</span>
                <span class="p">):</span>  <span class="c1"># skip this, which covers an entire phrase typically containing the target and all its FEs</span>
                    <span class="c1"># (but do display the Gov)</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">felbl</span> <span class="ow">in</span> <span class="n">sent</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="ow">or</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">):</span>
                    <span class="c1"># overlap between one of the POS-specific layers and first FE layer</span>
                    <span class="n">posspec_separate</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="kc">True</span>  <span class="c1"># show POS-specific layers on a separate line</span>
                    <span class="p">)</span>
                <span class="n">posspec</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">lbl</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
                <span class="p">)</span>  <span class="c1"># lowercase Cop=&gt;cop, Non-Asp=&gt;nonasp, etc. to distinguish from FE names</span>
    <span class="k">if</span> <span class="n">posspec_separate</span><span class="p">:</span>
        <span class="n">POSSPEC</span> <span class="o">=</span> <span class="n">_annotation_ascii_FE_layer</span><span class="p">(</span><span class="n">posspec</span><span class="p">,</span> <span class="p">{},</span> <span class="n">feAbbrevs</span><span class="p">)</span>
    <span class="n">FE1</span> <span class="o">=</span> <span class="n">_annotation_ascii_FE_layer</span><span class="p">(</span>
        <span class="nb">sorted</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">posspec</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">posspec_separate</span> <span class="k">else</span> <span class="p">[])),</span>
        <span class="n">sent</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">feAbbrevs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">FE2</span> <span class="o">=</span> <span class="n">FE3</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="s2">&quot;FE2&quot;</span> <span class="ow">in</span> <span class="n">sent</span><span class="p">:</span>
        <span class="n">FE2</span> <span class="o">=</span> <span class="n">_annotation_ascii_FE_layer</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">FE2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sent</span><span class="o">.</span><span class="n">FE2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">feAbbrevs</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;FE3&quot;</span> <span class="ow">in</span> <span class="n">sent</span><span class="p">:</span>
            <span class="n">FE3</span> <span class="o">=</span> <span class="n">_annotation_ascii_FE_layer</span><span class="p">(</span><span class="n">sent</span><span class="o">.</span><span class="n">FE3</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sent</span><span class="o">.</span><span class="n">FE3</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">feAbbrevs</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">sent</span><span class="o">.</span><span class="n">Target</span><span class="p">:</span>
        <span class="n">FE1span</span><span class="p">,</span> <span class="n">FE1name</span><span class="p">,</span> <span class="n">FE1exp</span> <span class="o">=</span> <span class="n">FE1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">FE1span</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">FE1span</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">FE1span</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">FE1name</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">:</span>
            <span class="n">FE1name</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">FE1name</span><span class="p">))</span>
            <span class="n">FE1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">FE1name</span>
        <span class="n">FE1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">FE1span</span><span class="p">[:</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">FE1span</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">FE1span</span><span class="p">[</span><span class="n">j</span><span class="p">:]</span>
        <span class="p">)</span>
    <span class="n">long_lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">sent</span><span class="o">.</span><span class="n">text</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">posspec_separate</span><span class="p">:</span>
        <span class="n">long_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">POSSPEC</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">long_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">FE1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">FE1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">FE1</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>  <span class="c1"># lines with no length limit</span>
    <span class="k">if</span> <span class="n">FE2</span><span class="p">:</span>
        <span class="n">long_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">FE2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">FE2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">FE2</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">FE3</span><span class="p">:</span>
            <span class="n">long_lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">FE3</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">FE3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">FE3</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
    <span class="n">long_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">mimic_wrap</span><span class="p">(</span><span class="n">long_lines</span><span class="p">),</span> <span class="n">fillvalue</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">feAbbrevs</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">feAbbrevs</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">feAbbrevs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">feAbbrevs</span><span class="p">)),</span> <span class="s2">&quot;Abbreviation clash&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_fe</span><span class="p">(</span><span class="n">fe</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a frame element.</span>

<span class="sd">    :param fe: The frame element to be printed.</span>
<span class="sd">    :type fe: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the frame element.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fekeys</span> <span class="o">=</span> <span class="n">fe</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;frame element (</span><span class="si">{0.ID}</span><span class="s2">): </span><span class="si">{0.name}</span><span class="se">\n</span><span class="s2">    of </span><span class="si">{1.name}</span><span class="s2">(</span><span class="si">{1.ID}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">fe</span><span class="p">,</span> <span class="n">fe</span><span class="o">.</span><span class="n">frame</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;definition&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[definition]</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="n">_pretty_longstring</span><span class="p">(</span><span class="n">fe</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="s2">&quot;  &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;abbrev&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[abbrev] </span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">abbrev</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;coreType&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[coreType] </span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">coreType</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;requiresFE&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[requiresFE] &quot;</span>
        <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;&lt;None&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;excludesFE&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[excludesFE] &quot;</span>
        <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;&lt;None&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;semType&quot;</span> <span class="ow">in</span> <span class="n">fekeys</span><span class="p">:</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[semType] &quot;</span>
        <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">semType</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;&lt;None&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">semType</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">semType</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">outstr</span>


<span class="k">def</span> <span class="nf">_pretty_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function for pretty-printing a frame.</span>

<span class="sd">    :param frame: The frame to be printed.</span>
<span class="sd">    :type frame: AttrDict</span>
<span class="sd">    :return: A nicely formatted string representation of the frame.</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;frame (</span><span class="si">{0.ID}</span><span class="s2">): </span><span class="si">{0.name}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[URL] </span><span class="si">{</span><span class="n">frame</span><span class="o">.</span><span class="n">URL</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;[definition]</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="n">_pretty_longstring</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">definition</span><span class="p">,</span> <span class="s2">&quot;  &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;[semTypes] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span><span class="si">}</span><span class="s2"> semantic types</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="s2">&quot;  &quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">semTypes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[frameRelations] </span><span class="si">{}</span><span class="s2"> frame relations</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;  &quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">frel</span><span class="p">)</span> <span class="k">for</span> <span class="n">frel</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[lexUnit] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="p">)</span><span class="si">}</span><span class="s2"> lexical units</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">lustrs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">luName</span><span class="p">,</span> <span class="n">lu</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="n">tmpstr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">luName</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">lu</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="n">lustrs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmpstr</span><span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_pretty_longstring</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lustrs</span><span class="p">),</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;  &quot;</span><span class="p">))</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[FE] </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">FE</span><span class="p">)</span><span class="si">}</span><span class="s2"> frame elements</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">fes</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">feName</span><span class="p">,</span> <span class="n">fe</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fes</span><span class="p">[</span><span class="n">fe</span><span class="o">.</span><span class="n">coreType</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">feName</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">fes</span><span class="p">[</span><span class="n">fe</span><span class="o">.</span><span class="n">coreType</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">fes</span><span class="p">[</span><span class="n">fe</span><span class="o">.</span><span class="n">coreType</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">feName</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">fe</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="n">fes</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span>
        <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ct2</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;Core&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Core-Unexpressed&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Peripheral&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Extra-Thematic&quot;</span><span class="p">,</span>
        <span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ct2</span><span class="p">),</span>
    <span class="p">):</span>
        <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{:&gt;16}</span><span class="s2">: </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">fes</span><span class="p">[</span><span class="n">ct</span><span class="p">])))</span>

    <span class="n">outstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[FEcoreSets] </span><span class="si">{}</span><span class="s2"> frame element core sets</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">FEcoreSets</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">outstr</span> <span class="o">+=</span> <span class="p">(</span>
        <span class="s2">&quot;  &quot;</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">coreSet</span><span class="p">])</span> <span class="k">for</span> <span class="n">coreSet</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">FEcoreSets</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">outstr</span>


<div class="viewcode-block" id="FramenetError"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetError">[docs]</a><span class="k">class</span> <span class="nc">FramenetError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;An exception class for framenet-related errors.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="AttrDict"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.AttrDict">[docs]</a><span class="k">class</span> <span class="nc">AttrDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;A class that wraps a dict and allows accessing the keys of the</span>
<span class="sd">    dict as if they were attributes. Taken from here:</span>
<span class="sd">    https://stackoverflow.com/a/14620633/8879</span>

<span class="sd">    &gt;&gt;&gt; foo = {&#39;a&#39;:1, &#39;b&#39;:2, &#39;c&#39;:3}</span>
<span class="sd">    &gt;&gt;&gt; bar = AttrDict(foo)</span>
<span class="sd">    &gt;&gt;&gt; pprint(dict(bar))</span>
<span class="sd">    {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}</span>
<span class="sd">    &gt;&gt;&gt; bar.b</span>
<span class="sd">    2</span>
<span class="sd">    &gt;&gt;&gt; bar.d = 4</span>
<span class="sd">    &gt;&gt;&gt; pprint(dict(bar))</span>
<span class="sd">    {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3, &#39;d&#39;: 4}</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="AttrDict.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.AttrDict.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>
        <span class="c1"># self.__dict__ = self</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;_short_repr&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_repr</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Future</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">_short_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;_type&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;relation&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> ID=</span><span class="si">{}</span><span class="s2"> name=</span><span class="si">{}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>  <span class="c1"># no ID--e.g., for _type=lusubcorpus</span>
                    <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> name=</span><span class="si">{}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># no name--e.g., for _type=lusentence</span>
                    <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{}</span><span class="s2"> ID=</span><span class="si">{}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_any</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;frame&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;fe&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_fe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;lu&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_lu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;luexemplars&quot;</span><span class="p">:</span>  <span class="c1"># list of ALL exemplars for LU</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_exemplars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">LU</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;fulltext_annotation&quot;</span>
        <span class="p">):</span>  <span class="c1"># list of all sentences for full-text doc</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_fulltext_sentences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;lusentence&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;fulltext_sentence&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_fulltext_sentence</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;luannotationset&quot;</span><span class="p">,</span> <span class="s2">&quot;fulltext_annotationset&quot;</span><span class="p">):</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aset_level</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;posannotationset&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_pos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;semtype&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_semtype</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;framerelationtype&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_frame_relation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;framerelation&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_frame_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;ferelation&quot;</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_fe_relation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_any</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># ensure result is unicode string prior to applying the</span>
        <span class="c1">#  decorator (because non-ASCII characters</span>
        <span class="c1"># could in principle occur in the data and would trigger an encoding error when</span>
        <span class="c1"># passed as arguments to str.format()).</span>
        <span class="c1"># assert isinstance(outstr, unicode) # not in Python 3.2</span>
        <span class="k">return</span> <span class="n">outstr</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>


<div class="viewcode-block" id="SpecialList"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.SpecialList">[docs]</a><span class="k">class</span> <span class="nc">SpecialList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list subclass which adds a &#39;_type&#39; attribute for special printing</span>
<span class="sd">    (similar to an AttrDict, though this is NOT an AttrDict subclass).</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SpecialList.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.SpecialList.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typ</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">=</span> <span class="n">typ</span></div>

    <span class="k">def</span> <span class="nf">_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="s2">&quot;[]&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="o">==</span> <span class="s2">&quot;luexemplars&quot;</span><span class="p">:</span>  <span class="c1"># list of ALL exemplars for LU</span>
            <span class="n">outstr</span> <span class="o">=</span> <span class="n">_pretty_exemplars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">LU</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
        <span class="k">return</span> <span class="n">outstr</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>


<div class="viewcode-block" id="Future"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.Future">[docs]</a><span class="k">class</span> <span class="nc">Future</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps and acts as a proxy for a value to be loaded lazily (on demand).</span>
<span class="sd">    Adapted from https://gist.github.com/sergey-miryanov/2935416</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Future.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.Future.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">loader</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param loader: when called with no arguments, returns the value to be stored</span>
<span class="sd">        :type loader: callable</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span> <span class="o">=</span> <span class="n">loader</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_d</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_loader</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loader</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># the data is now cached</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_d</span>

    <span class="k">def</span> <span class="nf">__nonzero__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span><span class="o">.</span><span class="fm">__getattr__</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">()</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span></div>


<div class="viewcode-block" id="PrettyDict"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyDict">[docs]</a><span class="k">class</span> <span class="nc">PrettyDict</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an abbreviated repr of values where possible.</span>
<span class="sd">    Inherits from AttrDict, so a callable value will</span>
<span class="sd">    be lazily converted to an actual value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PrettyDict.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyDict.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">_BREAK_LINES</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;breakLines&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">dict</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_BREAK_LINES&quot;</span><span class="p">,</span> <span class="n">_BREAK_LINES</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">kv</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">kv</span> <span class="o">+=</span> <span class="n">v</span><span class="o">.</span><span class="n">_short_repr</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">kv</span> <span class="o">+=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kv</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;{&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2"> &quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BREAK_LINES</span> <span class="k">else</span> <span class="s2">&quot;, &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span></div>


<div class="viewcode-block" id="PrettyList"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyList">[docs]</a><span class="k">class</span> <span class="nc">PrettyList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an abbreviated repr of only the first several elements, not the whole list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># from nltk.util</span>
<div class="viewcode-block" id="PrettyList.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyList.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;maxReprSize&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_BREAK_LINES</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;breakLines&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation for this corpus view that is</span>
<span class="sd">        similar to a list&#39;s representation; but if it would be more</span>
<span class="sd">        than 60 characters long, it is truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">5</span>

        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">pieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">elt</span><span class="o">.</span><span class="n">_short_repr</span><span class="p">()</span>
            <span class="p">)</span>  <span class="c1"># key difference from inherited version: call to _short_repr()</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="ow">and</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">, ...]&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2"> &quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BREAK_LINES</span> <span class="k">else</span> <span class="s2">&quot;, &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="n">pieces</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;,</span><span class="se">\n</span><span class="s2"> &quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_BREAK_LINES</span> <span class="k">else</span> <span class="s2">&quot;, &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span></div>


<div class="viewcode-block" id="PrettyLazyMap"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyLazyMap">[docs]</a><span class="k">class</span> <span class="nc">PrettyLazyMap</span><span class="p">(</span><span class="n">LazyMap</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an abbreviated repr of only the first several elements, not the whole list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># from nltk.util</span>
    <span class="n">_MAX_REPR_SIZE</span> <span class="o">=</span> <span class="mi">60</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation for this corpus view that is</span>
<span class="sd">        similar to a list&#39;s representation; but if it would be more</span>
<span class="sd">        than 60 characters long, it is truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">pieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">elt</span><span class="o">.</span><span class="n">_short_repr</span><span class="p">()</span>
            <span class="p">)</span>  <span class="c1"># key difference from inherited version: call to _short_repr()</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">, ...]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span></div>


<div class="viewcode-block" id="PrettyLazyIteratorList"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyLazyIteratorList">[docs]</a><span class="k">class</span> <span class="nc">PrettyLazyIteratorList</span><span class="p">(</span><span class="n">LazyIteratorList</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an abbreviated repr of only the first several elements, not the whole list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># from nltk.util</span>
    <span class="n">_MAX_REPR_SIZE</span> <span class="o">=</span> <span class="mi">60</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation for this corpus view that is</span>
<span class="sd">        similar to a list&#39;s representation; but if it would be more</span>
<span class="sd">        than 60 characters long, it is truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">pieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">elt</span><span class="o">.</span><span class="n">_short_repr</span><span class="p">()</span>
            <span class="p">)</span>  <span class="c1"># key difference from inherited version: call to _short_repr()</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">, ...]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span></div>


<div class="viewcode-block" id="PrettyLazyConcatenation"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.PrettyLazyConcatenation">[docs]</a><span class="k">class</span> <span class="nc">PrettyLazyConcatenation</span><span class="p">(</span><span class="n">LazyConcatenation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays an abbreviated repr of only the first several elements, not the whole list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># from nltk.util</span>
    <span class="n">_MAX_REPR_SIZE</span> <span class="o">=</span> <span class="mi">60</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string representation for this corpus view that is</span>
<span class="sd">        similar to a list&#39;s representation; but if it would be more</span>
<span class="sd">        than 60 characters long, it is truncated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">pieces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">elt</span><span class="o">.</span><span class="n">_short_repr</span><span class="p">()</span>
            <span class="p">)</span>  <span class="c1"># key difference from inherited version: call to _short_repr()</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">length</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MAX_REPR_SIZE</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">, ...]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list concatenating self with other.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list concatenating other with self.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span></div>


<div class="viewcode-block" id="FramenetCorpusReader"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader">[docs]</a><span class="k">class</span> <span class="nc">FramenetCorpusReader</span><span class="p">(</span><span class="n">XMLCorpusReader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A corpus reader for the Framenet Corpus.</span>

<span class="sd">    &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">    &gt;&gt;&gt; fn.lu(3238).frame.lexUnit[&#39;glint.v&#39;] is fn.lu(3238)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; fn.frame_by_name(&#39;Replacing&#39;) is fn.lus(&#39;replace.v&#39;)[0].frame</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; fn.lus(&#39;prejudice.n&#39;)[0].frame.frameRelations == fn.frame_relations(&#39;Partiality&#39;)</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_bad_statuses</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Problem&quot;</span><span class="p">]</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When loading LUs for a frame, those whose status is in this list will be ignored.</span>
<span class="sd">    Due to caching, if user code modifies this, it should do so before loading any data.</span>
<span class="sd">    &#39;Problem&#39; should always be listed for FrameNet 1.5, as these LUs are not included</span>
<span class="sd">    in the XML index.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_warnings</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="FramenetCorpusReader.warnings"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.warnings">[docs]</a>    <span class="k">def</span> <span class="nf">warnings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable or disable warnings of data integrity issues as they are encountered.</span>
<span class="sd">        If v is truthy, warnings will be enabled.</span>

<span class="sd">        (This is a function rather than just an attribute/property to ensure that if</span>
<span class="sd">        enabling warnings is the first action taken, the corpus reader is instantiated first.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warnings</span> <span class="o">=</span> <span class="n">v</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.__init__"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">fileids</span><span class="p">):</span>
        <span class="n">XMLCorpusReader</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">fileids</span><span class="p">)</span>

        <span class="c1"># framenet corpus sub dirs</span>
        <span class="c1"># sub dir containing the xml files for frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_dir</span> <span class="o">=</span> <span class="s2">&quot;frame&quot;</span>
        <span class="c1"># sub dir containing the xml files for lexical units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lu_dir</span> <span class="o">=</span> <span class="s2">&quot;lu&quot;</span>
        <span class="c1"># sub dir containing the xml files for fulltext annotation files</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_dir</span> <span class="o">=</span> <span class="s2">&quot;fulltext&quot;</span>

        <span class="c1"># location of latest development version of FrameNet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fnweb_url</span> <span class="o">=</span> <span class="s2">&quot;https://framenet2.icsi.berkeley.edu/fnReports/data&quot;</span>

        <span class="c1"># Indexes used for faster look-ups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_frames</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># name -&gt; ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_freltyp_idx</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># frame relation types (Inheritance, Using, etc.)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># frame-to-frame relation instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># FE-to-FE relation instances</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frel_f_idx</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># frame-to-frame relations associated with each frame</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_readme</span> <span class="o">=</span> <span class="s2">&quot;README.txt&quot;</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.help"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.help">[docs]</a>    <span class="k">def</span> <span class="nf">help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attrname</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Display help information summarizing the main methods.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">attrname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">help</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">attrname</span><span class="p">))</span>

        <span class="c1"># No need to mention frame_by_name() or frame_by_id(),</span>
        <span class="c1"># as it&#39;s easier to just call frame().</span>
        <span class="c1"># Also not mentioning lu_basic().</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Citation: Nathan Schneider and Chuck Wooters (2017),</span>
<span class="s2">&quot;The NLTK FrameNet API: Designing for Discoverability with a Rich Linguistic Resource&quot;.</span>
<span class="s2">Proceedings of EMNLP: System Demonstrations. https://arxiv.org/abs/1703.07438</span>

<span class="s2">Use the following methods to access data in FrameNet.</span>
<span class="s2">Provide a method name to `help()` for more information.</span>

<span class="s2">FRAMES</span>
<span class="s2">======</span>

<span class="s2">frame() to look up a frame by its exact name or ID</span>
<span class="s2">frames() to get frames matching a name pattern</span>
<span class="s2">frames_by_lemma() to get frames containing an LU matching a name pattern</span>
<span class="s2">frame_ids_and_names() to get a mapping from frame IDs to names</span>

<span class="s2">FRAME ELEMENTS</span>
<span class="s2">==============</span>

<span class="s2">fes() to get frame elements (a.k.a. roles) matching a name pattern, optionally constrained</span>
<span class="s2">  by a frame name pattern</span>

<span class="s2">LEXICAL UNITS</span>
<span class="s2">=============</span>

<span class="s2">lu() to look up an LU by its ID</span>
<span class="s2">lus() to get lexical units matching a name pattern, optionally constrained by frame</span>
<span class="s2">lu_ids_and_names() to get a mapping from LU IDs to names</span>

<span class="s2">RELATIONS</span>
<span class="s2">=========</span>

<span class="s2">frame_relation_types() to get the different kinds of frame-to-frame relations</span>
<span class="s2">  (Inheritance, Subframe, Using, etc.).</span>
<span class="s2">frame_relations() to get the relation instances, optionally constrained by</span>
<span class="s2">  frame(s) or relation type</span>
<span class="s2">fe_relations() to get the frame element pairs belonging to a frame-to-frame relation</span>

<span class="s2">SEMANTIC TYPES</span>
<span class="s2">==============</span>

<span class="s2">semtypes() to get the different kinds of semantic types that can be applied to</span>
<span class="s2">  FEs, LUs, and entire frames</span>
<span class="s2">semtype() to look up a particular semtype by name, ID, or abbreviation</span>
<span class="s2">semtype_inherits() to check whether two semantic types have a subtype-supertype</span>
<span class="s2">  relationship in the semtype hierarchy</span>
<span class="s2">propagate_semtypes() to apply inference rules that distribute semtypes over relations</span>
<span class="s2">  between FEs</span>

<span class="s2">ANNOTATIONS</span>
<span class="s2">===========</span>

<span class="s2">annotations() to get annotation sets, in which a token in a sentence is annotated</span>
<span class="s2">  with a lexical unit in a frame, along with its frame elements and their syntactic properties;</span>
<span class="s2">  can be constrained by LU name pattern and limited to lexicographic exemplars or full-text.</span>
<span class="s2">  Sentences of full-text annotation can have multiple annotation sets.</span>
<span class="s2">sents() to get annotated sentences illustrating one or more lexical units</span>
<span class="s2">exemplars() to get sentences of lexicographic annotation, most of which have</span>
<span class="s2">  just 1 annotation set; can be constrained by LU name pattern, frame, and overt FE(s)</span>
<span class="s2">doc() to look up a document of full-text annotation by its ID</span>
<span class="s2">docs() to get documents of full-text annotation that match a name pattern</span>
<span class="s2">docs_metadata() to get metadata about all full-text documents without loading them</span>
<span class="s2">ft_sents() to iterate over sentences of full-text annotation</span>

<span class="s2">UTILITIES</span>
<span class="s2">=========</span>

<span class="s2">buildindexes() loads metadata about all frames, LUs, etc. into memory to avoid</span>
<span class="s2">  delay when one is accessed for the first time. It does not load annotations.</span>
<span class="s2">readme() gives the text of the FrameNet README file</span>
<span class="s2">warnings(True) to display corpus consistency warnings when loading data</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_buildframeindex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The total number of Frames in Framenet is fairly small (~1200) so</span>
        <span class="c1"># this index should not be very large</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span>  <span class="c1"># always load frame relations before frames,</span>
            <span class="c1"># otherwise weird ordering effects might result in incomplete information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;frameIndex.xml&quot;</span><span class="p">),</span> <span class="s2">&quot;frameIndex/frame&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_elt</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">f</span>

    <span class="k">def</span> <span class="nf">_buildcorpusindex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The total number of fulltext annotated documents in Framenet</span>
        <span class="c1"># is fairly small (~90) so this index should not be very large</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;fulltextIndex.xml&quot;</span><span class="p">),</span>
            <span class="s2">&quot;fulltextIndex/corpus&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fulltextindex_elt</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">doclist</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">doclist</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="p">[</span><span class="n">doc</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span>

    <span class="k">def</span> <span class="nf">_buildluindex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># The number of LUs in Framenet is about 13,000 so this index</span>
        <span class="c1"># should not be very large</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;luIndex.xml&quot;</span><span class="p">),</span> <span class="s2">&quot;luIndex/lu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_elt</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">lu</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">[</span>
                    <span class="n">lu</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">lu</span>  <span class="c1"># populate with LU index entries. if any of these</span>
                <span class="c1"># are looked up they will be replaced by full LU objects.</span>

    <span class="k">def</span> <span class="nf">_buildrelationindex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># print(&#39;building relation index...&#39;, file=sys.stderr)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_freltyp_idx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frel_f_idx</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;frRelation.xml&quot;</span><span class="p">),</span>
            <span class="s2">&quot;frameRelations/frameRelationType&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle_framerelationtype_elt</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">freltyp</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_freltyp_idx</span><span class="p">[</span><span class="n">freltyp</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">freltyp</span>
                <span class="k">for</span> <span class="n">frel</span> <span class="ow">in</span> <span class="n">freltyp</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">:</span>
                    <span class="n">supF</span> <span class="o">=</span> <span class="n">frel</span><span class="o">.</span><span class="n">superFrame</span> <span class="o">=</span> <span class="n">frel</span><span class="p">[</span><span class="n">freltyp</span><span class="o">.</span><span class="n">superFrameName</span><span class="p">]</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                        <span class="p">(</span><span class="k">lambda</span> <span class="n">fID</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_id</span><span class="p">(</span><span class="n">fID</span><span class="p">))(</span><span class="n">frel</span><span class="o">.</span><span class="n">supID</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">subF</span> <span class="o">=</span> <span class="n">frel</span><span class="o">.</span><span class="n">subFrame</span> <span class="o">=</span> <span class="n">frel</span><span class="p">[</span><span class="n">freltyp</span><span class="o">.</span><span class="n">subFrameName</span><span class="p">]</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                        <span class="p">(</span><span class="k">lambda</span> <span class="n">fID</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_id</span><span class="p">(</span><span class="n">fID</span><span class="p">))(</span><span class="n">frel</span><span class="o">.</span><span class="n">subID</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span><span class="p">[</span><span class="n">frel</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">frel</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_frel_f_idx</span><span class="p">[</span><span class="n">frel</span><span class="o">.</span><span class="n">supID</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">frel</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_frel_f_idx</span><span class="p">[</span><span class="n">frel</span><span class="o">.</span><span class="n">subID</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">frel</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">ferel</span> <span class="ow">in</span> <span class="n">frel</span><span class="o">.</span><span class="n">feRelations</span><span class="p">:</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">superFrame</span> <span class="o">=</span> <span class="n">supF</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">subFrame</span> <span class="o">=</span> <span class="n">subF</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">superFE</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                            <span class="p">(</span><span class="k">lambda</span> <span class="n">fer</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">fer</span><span class="o">.</span><span class="n">superFrame</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="n">fer</span><span class="o">.</span><span class="n">superFEName</span><span class="p">])(</span>
                                <span class="n">ferel</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">subFE</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                            <span class="p">(</span><span class="k">lambda</span> <span class="n">fer</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">fer</span><span class="o">.</span><span class="n">subFrame</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="n">fer</span><span class="o">.</span><span class="n">subFEName</span><span class="p">])(</span><span class="n">ferel</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span><span class="p">[</span><span class="n">ferel</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">ferel</span>
        <span class="c1"># print(&#39;...done building relation index&#39;, file=sys.stderr)</span>

    <span class="k">def</span> <span class="nf">_warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">message</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warnings</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">message</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="FramenetCorpusReader.buildindexes"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.buildindexes">[docs]</a>    <span class="k">def</span> <span class="nf">buildindexes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build the internal indexes to make look-ups faster.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildframeindex</span><span class="p">()</span>
        <span class="c1"># LUs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>
        <span class="c1"># Fulltext annotation corpora index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildcorpusindex</span><span class="p">()</span>
        <span class="c1"># frame and FE relations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.doc"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.doc">[docs]</a>    <span class="k">def</span> <span class="nf">doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_docid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the annotated document whose id number is</span>
<span class="sd">        ``fn_docid``. This id number can be obtained by calling the</span>
<span class="sd">        Documents() function.</span>

<span class="sd">        The dict that is returned from this function will contain the</span>
<span class="sd">        following keys:</span>

<span class="sd">        - &#39;_type&#39;      : &#39;fulltextannotation&#39;</span>
<span class="sd">        - &#39;sentence&#39;   : a list of sentences in the document</span>
<span class="sd">           - Each item in the list is a dict containing the following keys:</span>
<span class="sd">              - &#39;ID&#39;    : the ID number of the sentence</span>
<span class="sd">              - &#39;_type&#39; : &#39;sentence&#39;</span>
<span class="sd">              - &#39;text&#39;  : the text of the sentence</span>
<span class="sd">              - &#39;paragNo&#39; : the paragraph number</span>
<span class="sd">              - &#39;sentNo&#39;  : the sentence number</span>
<span class="sd">              - &#39;docID&#39;   : the document ID number</span>
<span class="sd">              - &#39;corpID&#39;  : the corpus ID number</span>
<span class="sd">              - &#39;aPos&#39;    : the annotation position</span>
<span class="sd">              - &#39;annotationSet&#39; : a list of annotation layers for the sentence</span>
<span class="sd">                 - Each item in the list is a dict containing the following keys:</span>
<span class="sd">                    - &#39;ID&#39;       : the ID number of the annotation set</span>
<span class="sd">                    - &#39;_type&#39;    : &#39;annotationset&#39;</span>
<span class="sd">                    - &#39;status&#39;   : either &#39;MANUAL&#39; or &#39;UNANN&#39;</span>
<span class="sd">                    - &#39;luName&#39;   : (only if status is &#39;MANUAL&#39;)</span>
<span class="sd">                    - &#39;luID&#39;     : (only if status is &#39;MANUAL&#39;)</span>
<span class="sd">                    - &#39;frameID&#39;  : (only if status is &#39;MANUAL&#39;)</span>
<span class="sd">                    - &#39;frameName&#39;: (only if status is &#39;MANUAL&#39;)</span>
<span class="sd">                    - &#39;layer&#39; : a list of labels for the layer</span>
<span class="sd">                       - Each item in the layer is a dict containing the following keys:</span>
<span class="sd">                          - &#39;_type&#39;: &#39;layer&#39;</span>
<span class="sd">                          - &#39;rank&#39;</span>
<span class="sd">                          - &#39;name&#39;</span>
<span class="sd">                          - &#39;label&#39; : a list of labels in the layer</span>
<span class="sd">                             - Each item is a dict containing the following keys:</span>
<span class="sd">                                - &#39;start&#39;</span>
<span class="sd">                                - &#39;end&#39;</span>
<span class="sd">                                - &#39;name&#39;</span>
<span class="sd">                                - &#39;feID&#39; (optional)</span>

<span class="sd">        :param fn_docid: The Framenet id number of the document</span>
<span class="sd">        :type fn_docid: int</span>
<span class="sd">        :return: Information about the annotated document</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xmlfname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="p">[</span><span class="n">fn_docid</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c1"># happens when self._fulltext_idx == None</span>
            <span class="c1"># build the index</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildcorpusindex</span><span class="p">()</span>
            <span class="n">xmlfname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="p">[</span><span class="n">fn_docid</span><span class="p">]</span><span class="o">.</span><span class="n">filename</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># probably means that fn_docid was not in the index</span>
            <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown document id: </span><span class="si">{</span><span class="n">fn_docid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="c1"># construct the path name for the xml file containing the document info</span>
        <span class="n">locpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_dir</span><span class="p">,</span> <span class="n">xmlfname</span><span class="p">)</span>

        <span class="c1"># Grab the top-level xml element containing the fulltext annotation</span>
        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span><span class="n">locpath</span><span class="p">,</span> <span class="s2">&quot;fullTextAnnotation&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="n">elt</span> <span class="o">=</span> <span class="n">view</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fulltextannotation_elt</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
        <span class="c1"># add metadata</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="p">[</span><span class="n">fn_docid</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="k">return</span> <span class="n">info</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame_by_id"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame_by_id">[docs]</a>    <span class="k">def</span> <span class="nf">frame_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_fid</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details for the specified Frame using the frame&#39;s id</span>
<span class="sd">        number.</span>

<span class="sd">        Usage examples:</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; f = fn.frame_by_id(256)</span>
<span class="sd">        &gt;&gt;&gt; f.ID</span>
<span class="sd">        256</span>
<span class="sd">        &gt;&gt;&gt; f.name</span>
<span class="sd">        &#39;Medical_specialties&#39;</span>
<span class="sd">        &gt;&gt;&gt; f.definition # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        &quot;This frame includes words that name medical specialties and is closely related to the</span>
<span class="sd">        Medical_professionals frame.  The FE Type characterizing a sub-are in a Specialty may also be</span>
<span class="sd">        expressed. &#39;Ralph practices paediatric oncology.&#39;&quot;</span>

<span class="sd">        :param fn_fid: The Framenet id number of the frame</span>
<span class="sd">        :type fn_fid: int</span>
<span class="sd">        :param ignorekeys: The keys to ignore. These keys will not be</span>
<span class="sd">            included in the output. (optional)</span>
<span class="sd">        :type ignorekeys: list(str)</span>
<span class="sd">        :return: Information about a frame</span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        Also see the ``frame()`` function for details about what is</span>
<span class="sd">        contained in the dict that is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># get the name of the frame with this id number</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fentry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">[</span><span class="n">fn_fid</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;_type&quot;</span> <span class="ow">in</span> <span class="n">fentry</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">fentry</span>  <span class="c1"># full frame object is cached</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">fentry</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildframeindex</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">[</span><span class="n">fn_fid</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown frame id: </span><span class="si">{</span><span class="n">fn_fid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">,</span> <span class="n">check_cache</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame_by_name"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">frame_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_fname</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[],</span> <span class="n">check_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details for the specified Frame using the frame&#39;s name.</span>

<span class="sd">        Usage examples:</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; f = fn.frame_by_name(&#39;Medical_specialties&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f.ID</span>
<span class="sd">        256</span>
<span class="sd">        &gt;&gt;&gt; f.name</span>
<span class="sd">        &#39;Medical_specialties&#39;</span>
<span class="sd">        &gt;&gt;&gt; f.definition # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">         &quot;This frame includes words that name medical specialties and is closely related to the</span>
<span class="sd">          Medical_professionals frame.  The FE Type characterizing a sub-are in a Specialty may also be</span>
<span class="sd">          expressed. &#39;Ralph practices paediatric oncology.&#39;&quot;</span>

<span class="sd">        :param fn_fname: The name of the frame</span>
<span class="sd">        :type fn_fname: str</span>
<span class="sd">        :param ignorekeys: The keys to ignore. These keys will not be</span>
<span class="sd">            included in the output. (optional)</span>
<span class="sd">        :type ignorekeys: list(str)</span>
<span class="sd">        :return: Information about a frame</span>
<span class="sd">        :rtype: dict</span>

<span class="sd">        Also see the ``frame()`` function for details about what is</span>
<span class="sd">        contained in the dict that is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">check_cache</span> <span class="ow">and</span> <span class="n">fn_fname</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cached_frames</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cached_frames</span><span class="p">[</span><span class="n">fn_fname</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildframeindex</span><span class="p">()</span>

        <span class="c1"># construct the path name for the xml file containing the Frame info</span>
        <span class="n">locpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_dir</span><span class="p">,</span> <span class="n">fn_fname</span> <span class="o">+</span> <span class="s2">&quot;.xml&quot;</span><span class="p">)</span>
        <span class="c1"># print(locpath, file=sys.stderr)</span>
        <span class="c1"># Grab the xml for the frame</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span><span class="n">locpath</span><span class="p">,</span> <span class="s2">&quot;frame&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
                <span class="n">elt</span> <span class="o">=</span> <span class="n">view</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown frame: </span><span class="si">{</span><span class="n">fn_fname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="n">fentry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_frame_elt</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">fentry</span>

        <span class="n">fentry</span><span class="o">.</span><span class="n">URL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fnweb_url</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_dir</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">fn_fname</span> <span class="o">+</span> <span class="s2">&quot;.xml&quot;</span>

        <span class="c1"># INFERENCE RULE: propagate lexical semtypes from the frame to all its LUs</span>
        <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">fentry</span><span class="o">.</span><span class="n">semTypes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">rootType</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Lexical_type&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">lu</span> <span class="ow">in</span> <span class="n">fentry</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span>
                        <span class="n">x</span> <span class="ow">is</span> <span class="n">st</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span>
                    <span class="p">):</span>  <span class="c1"># identity containment check</span>
                        <span class="n">lu</span><span class="o">.</span><span class="n">semTypes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">[</span><span class="n">fentry</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">fentry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_frames</span><span class="p">[</span><span class="n">fentry</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fentry</span><span class="o">.</span><span class="n">ID</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        # now set up callables to resolve the LU pointers lazily.</span>
<span class="sd">        # (could also do this here--caching avoids infinite recursion.)</span>
<span class="sd">        for luName,luinfo in fentry.lexUnit.items():</span>
<span class="sd">            fentry.lexUnit[luName] = (lambda luID: Future(lambda: self.lu(luID)))(luinfo.ID)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">fentry</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame">[docs]</a>    <span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_fid_or_fname</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the details for the specified Frame using the frame&#39;s name</span>
<span class="sd">        or id number.</span>

<span class="sd">        Usage examples:</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; f = fn.frame(256)</span>
<span class="sd">        &gt;&gt;&gt; f.name</span>
<span class="sd">        &#39;Medical_specialties&#39;</span>
<span class="sd">        &gt;&gt;&gt; f = fn.frame(&#39;Medical_specialties&#39;)</span>
<span class="sd">        &gt;&gt;&gt; f.ID</span>
<span class="sd">        256</span>
<span class="sd">        &gt;&gt;&gt; # ensure non-ASCII character in definition doesn&#39;t trigger an encoding error:</span>
<span class="sd">        &gt;&gt;&gt; fn.frame(&#39;Imposing_obligation&#39;) # doctest: +ELLIPSIS</span>
<span class="sd">        frame (1494): Imposing_obligation...</span>


<span class="sd">        The dict that is returned from this function will contain the</span>
<span class="sd">        following information about the Frame:</span>

<span class="sd">        - &#39;name&#39;       : the name of the Frame (e.g. &#39;Birth&#39;, &#39;Apply_heat&#39;, etc.)</span>
<span class="sd">        - &#39;definition&#39; : textual definition of the Frame</span>
<span class="sd">        - &#39;ID&#39;         : the internal ID number of the Frame</span>
<span class="sd">        - &#39;semTypes&#39;   : a list of semantic types for this frame</span>
<span class="sd">           - Each item in the list is a dict containing the following keys:</span>
<span class="sd">              - &#39;name&#39; : can be used with the semtype() function</span>
<span class="sd">              - &#39;ID&#39;   : can be used with the semtype() function</span>

<span class="sd">        - &#39;lexUnit&#39;    : a dict containing all of the LUs for this frame.</span>
<span class="sd">                         The keys in this dict are the names of the LUs and</span>
<span class="sd">                         the value for each key is itself a dict containing</span>
<span class="sd">                         info about the LU (see the lu() function for more info.)</span>

<span class="sd">        - &#39;FE&#39; : a dict containing the Frame Elements that are part of this frame</span>
<span class="sd">                 The keys in this dict are the names of the FEs (e.g. &#39;Body_system&#39;)</span>
<span class="sd">                 and the values are dicts containing the following keys</span>

<span class="sd">              - &#39;definition&#39; : The definition of the FE</span>
<span class="sd">              - &#39;name&#39;       : The name of the FE e.g. &#39;Body_system&#39;</span>
<span class="sd">              - &#39;ID&#39;         : The id number</span>
<span class="sd">              - &#39;_type&#39;      : &#39;fe&#39;</span>
<span class="sd">              - &#39;abbrev&#39;     : Abbreviation e.g. &#39;bod&#39;</span>
<span class="sd">              - &#39;coreType&#39;   : one of &quot;Core&quot;, &quot;Peripheral&quot;, or &quot;Extra-Thematic&quot;</span>
<span class="sd">              - &#39;semType&#39;    : if not None, a dict with the following two keys:</span>
<span class="sd">                 - &#39;name&#39; : name of the semantic type. can be used with</span>
<span class="sd">                            the semtype() function</span>
<span class="sd">                 - &#39;ID&#39;   : id number of the semantic type. can be used with</span>
<span class="sd">                            the semtype() function</span>
<span class="sd">              - &#39;requiresFE&#39; : if not None, a dict with the following two keys:</span>
<span class="sd">                 - &#39;name&#39; : the name of another FE in this frame</span>
<span class="sd">                 - &#39;ID&#39;   : the id of the other FE in this frame</span>
<span class="sd">              - &#39;excludesFE&#39; : if not None, a dict with the following two keys:</span>
<span class="sd">                 - &#39;name&#39; : the name of another FE in this frame</span>
<span class="sd">                 - &#39;ID&#39;   : the id of the other FE in this frame</span>

<span class="sd">        - &#39;frameRelation&#39;      : a list of objects describing frame relations</span>
<span class="sd">        - &#39;FEcoreSets&#39;  : a list of Frame Element core sets for this frame</span>
<span class="sd">           - Each item in the list is a list of FE objects</span>

<span class="sd">        :param fn_fid_or_fname: The Framenet name or id number of the frame</span>
<span class="sd">        :type fn_fid_or_fname: int or str</span>
<span class="sd">        :param ignorekeys: The keys to ignore. These keys will not be</span>
<span class="sd">            included in the output. (optional)</span>
<span class="sd">        :type ignorekeys: list(str)</span>
<span class="sd">        :return: Information about a frame</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># get the frame info by name or id number</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fn_fid_or_fname</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_name</span><span class="p">(</span><span class="n">fn_fid_or_fname</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_id</span><span class="p">(</span><span class="n">fn_fid_or_fname</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">f</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frames_by_lemma"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frames_by_lemma">[docs]</a>    <span class="k">def</span> <span class="nf">frames_by_lemma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pat</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all frames that contain LUs in which the</span>
<span class="sd">        ``name`` attribute of the LU matches the given regular expression</span>
<span class="sd">        ``pat``. Note that LU names are composed of &quot;lemma.POS&quot;, where</span>
<span class="sd">        the &quot;lemma&quot; part can be made up of either a single lexeme</span>
<span class="sd">        (e.g. &#39;run&#39;) or multiple lexemes (e.g. &#39;a little&#39;).</span>

<span class="sd">        Note: if you are going to be doing a lot of this type of</span>
<span class="sd">        searching, you&#39;d want to build an index that maps from lemmas to</span>
<span class="sd">        frames because each time frames_by_lemma() is called, it has to</span>
<span class="sd">        search through ALL of the frame XML files in the db.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; from nltk.corpus.reader.framenet import PrettyList</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(sorted(fn.frames_by_lemma(r&#39;(?i)a little&#39;), key=itemgetter(&#39;ID&#39;))) # doctest: +ELLIPSIS</span>
<span class="sd">        [&lt;frame ID=189 name=Quanti...&gt;, &lt;frame ID=2001 name=Degree&gt;]</span>

<span class="sd">        :return: A list of frame objects.</span>
<span class="sd">        :rtype: list(AttrDict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
            <span class="n">f</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">pat</span><span class="p">,</span> <span class="n">luName</span><span class="p">)</span> <span class="k">for</span> <span class="n">luName</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">lexUnit</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.lu_basic"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.lu_basic">[docs]</a>    <span class="k">def</span> <span class="nf">lu_basic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_luid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns basic information about the LU whose id is</span>
<span class="sd">        ``fn_luid``. This is basically just a wrapper around the</span>
<span class="sd">        ``lu()`` function with &quot;subCorpus&quot; info excluded.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; lu = PrettyDict(fn.lu_basic(256), breakLines=True)</span>
<span class="sd">        &gt;&gt;&gt; # ellipses account for differences between FN 1.5 and 1.7</span>
<span class="sd">        &gt;&gt;&gt; lu # doctest: +ELLIPSIS</span>
<span class="sd">        {&#39;ID&#39;: 256,</span>
<span class="sd">         &#39;POS&#39;: &#39;V&#39;,</span>
<span class="sd">         &#39;URL&#39;: &#39;https://framenet2.icsi.berkeley.edu/fnReports/data/lu/lu256.xml&#39;,</span>
<span class="sd">         &#39;_type&#39;: &#39;lu&#39;,</span>
<span class="sd">         &#39;cBy&#39;: ...,</span>
<span class="sd">         &#39;cDate&#39;: &#39;02/08/2001 01:27:50 PST Thu&#39;,</span>
<span class="sd">         &#39;definition&#39;: &#39;COD: be aware of beforehand; predict.&#39;,</span>
<span class="sd">         &#39;definitionMarkup&#39;: &#39;COD: be aware of beforehand; predict.&#39;,</span>
<span class="sd">         &#39;frame&#39;: &lt;frame ID=26 name=Expectation&gt;,</span>
<span class="sd">         &#39;lemmaID&#39;: 15082,</span>
<span class="sd">         &#39;lexemes&#39;: [{&#39;POS&#39;: &#39;V&#39;, &#39;breakBefore&#39;: &#39;false&#39;, &#39;headword&#39;: &#39;false&#39;, &#39;name&#39;: &#39;foresee&#39;, &#39;order&#39;: 1}],</span>
<span class="sd">         &#39;name&#39;: &#39;foresee.v&#39;,</span>
<span class="sd">         &#39;semTypes&#39;: [],</span>
<span class="sd">         &#39;sentenceCount&#39;: {&#39;annotated&#39;: ..., &#39;total&#39;: ...},</span>
<span class="sd">         &#39;status&#39;: &#39;FN1_Sent&#39;}</span>

<span class="sd">        :param fn_luid: The id number of the desired LU</span>
<span class="sd">        :type fn_luid: int</span>
<span class="sd">        :return: Basic information about the lexical unit</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lu</span><span class="p">(</span><span class="n">fn_luid</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;subCorpus&quot;</span><span class="p">,</span> <span class="s2">&quot;exemplars&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.lu"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.lu">[docs]</a>    <span class="k">def</span> <span class="nf">lu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn_luid</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[],</span> <span class="n">luName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frameID</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frameName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Access a lexical unit by its ID. luName, frameID, and frameName are used</span>
<span class="sd">        only in the event that the LU does not have a file in the database</span>
<span class="sd">        (which is the case for LUs with &quot;Problem&quot; status); in this case,</span>
<span class="sd">        a placeholder LU is created which just contains its name, ID, and frame.</span>


<span class="sd">        Usage examples:</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; fn.lu(256).name</span>
<span class="sd">        &#39;foresee.v&#39;</span>
<span class="sd">        &gt;&gt;&gt; fn.lu(256).definition</span>
<span class="sd">        &#39;COD: be aware of beforehand; predict.&#39;</span>
<span class="sd">        &gt;&gt;&gt; fn.lu(256).frame.name</span>
<span class="sd">        &#39;Expectation&#39;</span>
<span class="sd">        &gt;&gt;&gt; list(map(PrettyDict, fn.lu(256).lexemes))</span>
<span class="sd">        [{&#39;POS&#39;: &#39;V&#39;, &#39;breakBefore&#39;: &#39;false&#39;, &#39;headword&#39;: &#39;false&#39;, &#39;name&#39;: &#39;foresee&#39;, &#39;order&#39;: 1}]</span>

<span class="sd">        &gt;&gt;&gt; fn.lu(227).exemplars[23] # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        exemplar sentence (352962):</span>
<span class="sd">        [sentNo] 0</span>
<span class="sd">        [aPos] 59699508</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [LU] (227) guess.v in Coming_to_believe</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [frame] (23) Coming_to_believe</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [annotationSet] 2 annotation sets</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [POS] 18 tags</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [POS_tagset] BNC</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [GF] 3 relations</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [PT] 3 phrases</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [Other] 1 entry</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        [text] + [Target] + [FE]</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        When he was inside the house , Culley noticed the characteristic</span>
<span class="sd">                                                      ------------------</span>
<span class="sd">                                                      Content</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        he would n&#39;t have guessed at .</span>
<span class="sd">        --                ******* --</span>
<span class="sd">        Co                        C1 [Evidence:INI]</span>
<span class="sd">         (Co=Cognizer, C1=Content)</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>
<span class="sd">        &lt;BLANKLINE&gt;</span>

<span class="sd">        The dict that is returned from this function will contain most of the</span>
<span class="sd">        following information about the LU. Note that some LUs do not contain</span>
<span class="sd">        all of these pieces of information - particularly &#39;totalAnnotated&#39; and</span>
<span class="sd">        &#39;incorporatedFE&#39; may be missing in some LUs:</span>

<span class="sd">        - &#39;name&#39;       : the name of the LU (e.g. &#39;merger.n&#39;)</span>
<span class="sd">        - &#39;definition&#39; : textual definition of the LU</span>
<span class="sd">        - &#39;ID&#39;         : the internal ID number of the LU</span>
<span class="sd">        - &#39;_type&#39;      : &#39;lu&#39;</span>
<span class="sd">        - &#39;status&#39;     : e.g. &#39;Created&#39;</span>
<span class="sd">        - &#39;frame&#39;      : Frame that this LU belongs to</span>
<span class="sd">        - &#39;POS&#39;        : the part of speech of this LU (e.g. &#39;N&#39;)</span>
<span class="sd">        - &#39;totalAnnotated&#39; : total number of examples annotated with this LU</span>
<span class="sd">        - &#39;incorporatedFE&#39; : FE that incorporates this LU (e.g. &#39;Ailment&#39;)</span>
<span class="sd">        - &#39;sentenceCount&#39;  : a dict with the following two keys:</span>
<span class="sd">                 - &#39;annotated&#39;: number of sentences annotated with this LU</span>
<span class="sd">                 - &#39;total&#39;    : total number of sentences with this LU</span>

<span class="sd">        - &#39;lexemes&#39;  : a list of dicts describing the lemma of this LU.</span>
<span class="sd">           Each dict in the list contains these keys:</span>

<span class="sd">           - &#39;POS&#39;     : part of speech e.g. &#39;N&#39;</span>
<span class="sd">           - &#39;name&#39;    : either single-lexeme e.g. &#39;merger&#39; or</span>
<span class="sd">                         multi-lexeme e.g. &#39;a little&#39;</span>
<span class="sd">           - &#39;order&#39;: the order of the lexeme in the lemma (starting from 1)</span>
<span class="sd">           - &#39;headword&#39;: a boolean (&#39;true&#39; or &#39;false&#39;)</span>
<span class="sd">           - &#39;breakBefore&#39;: Can this lexeme be separated from the previous lexeme?</span>
<span class="sd">                Consider: &quot;take over.v&quot; as in::</span>

<span class="sd">                         Germany took over the Netherlands in 2 days.</span>
<span class="sd">                         Germany took the Netherlands over in 2 days.</span>

<span class="sd">                In this case, &#39;breakBefore&#39; would be &quot;true&quot; for the lexeme</span>
<span class="sd">                &quot;over&quot;. Contrast this with &quot;take after.v&quot; as in::</span>

<span class="sd">                         Mary takes after her grandmother.</span>
<span class="sd">                        *Mary takes her grandmother after.</span>

<span class="sd">                In this case, &#39;breakBefore&#39; would be &quot;false&quot; for the lexeme &quot;after&quot;</span>

<span class="sd">        - &#39;lemmaID&#39;    : Can be used to connect lemmas in different LUs</span>
<span class="sd">        - &#39;semTypes&#39;   : a list of semantic type objects for this LU</span>
<span class="sd">        - &#39;subCorpus&#39;  : a list of subcorpora</span>
<span class="sd">           - Each item in the list is a dict containing the following keys:</span>
<span class="sd">              - &#39;name&#39; :</span>
<span class="sd">              - &#39;sentence&#39; : a list of sentences in the subcorpus</span>
<span class="sd">                 - each item in the list is a dict with the following keys:</span>
<span class="sd">                    - &#39;ID&#39;:</span>
<span class="sd">                    - &#39;sentNo&#39;:</span>
<span class="sd">                    - &#39;text&#39;: the text of the sentence</span>
<span class="sd">                    - &#39;aPos&#39;:</span>
<span class="sd">                    - &#39;annotationSet&#39;: a list of annotation sets</span>
<span class="sd">                       - each item in the list is a dict with the following keys:</span>
<span class="sd">                          - &#39;ID&#39;:</span>
<span class="sd">                          - &#39;status&#39;:</span>
<span class="sd">                          - &#39;layer&#39;: a list of layers</span>
<span class="sd">                             - each layer is a dict containing the following keys:</span>
<span class="sd">                                - &#39;name&#39;: layer name (e.g. &#39;BNC&#39;)</span>
<span class="sd">                                - &#39;rank&#39;:</span>
<span class="sd">                                - &#39;label&#39;: a list of labels for the layer</span>
<span class="sd">                                   - each label is a dict containing the following keys:</span>
<span class="sd">                                      - &#39;start&#39;: start pos of label in sentence &#39;text&#39; (0-based)</span>
<span class="sd">                                      - &#39;end&#39;: end pos of label in sentence &#39;text&#39; (0-based)</span>
<span class="sd">                                      - &#39;name&#39;: name of label (e.g. &#39;NN1&#39;)</span>

<span class="sd">        Under the hood, this implementation looks up the lexical unit information</span>
<span class="sd">        in the *frame* definition file. That file does not contain</span>
<span class="sd">        corpus annotations, so the LU files will be accessed on demand if those are</span>
<span class="sd">        needed. In principle, valence patterns could be loaded here too,</span>
<span class="sd">        though these are not currently supported.</span>

<span class="sd">        :param fn_luid: The id number of the lexical unit</span>
<span class="sd">        :type fn_luid: int</span>
<span class="sd">        :param ignorekeys: The keys to ignore. These keys will not be</span>
<span class="sd">            included in the output. (optional)</span>
<span class="sd">        :type ignorekeys: list(str)</span>
<span class="sd">        :return: All information about the lexical unit</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># look for this LU in cache</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>
        <span class="n">OOV</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
        <span class="n">luinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fn_luid</span><span class="p">,</span> <span class="n">OOV</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">luinfo</span> <span class="ow">is</span> <span class="n">OOV</span><span class="p">:</span>
            <span class="c1"># LU not in the index. We create a placeholder by falling back to</span>
            <span class="c1"># luName, frameID, and frameName. However, this will not be listed</span>
            <span class="c1"># among the LUs for its frame.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                <span class="s2">&quot;LU ID not found: </span><span class="si">{}</span><span class="s2"> (</span><span class="si">{}</span><span class="s2">) in </span><span class="si">{}</span><span class="s2"> (</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">luName</span><span class="p">,</span> <span class="n">fn_luid</span><span class="p">,</span> <span class="n">frameName</span><span class="p">,</span> <span class="n">frameID</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">luinfo</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;lu&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ID&quot;</span><span class="p">:</span> <span class="n">fn_luid</span><span class="p">,</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">luName</span><span class="p">,</span>
                    <span class="s2">&quot;frameID&quot;</span><span class="p">:</span> <span class="n">frameID</span><span class="p">,</span>
                    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;Problem&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_id</span><span class="p">(</span><span class="n">luinfo</span><span class="o">.</span><span class="n">frameID</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">frameName</span><span class="p">,</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">frameName</span><span class="p">)</span>
            <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">[</span><span class="n">fn_luid</span><span class="p">]</span> <span class="o">=</span> <span class="n">luinfo</span>
        <span class="k">elif</span> <span class="s2">&quot;_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">luinfo</span><span class="p">:</span>
            <span class="c1"># we only have an index entry for the LU. loading the frame will replace this.</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_id</span><span class="p">(</span><span class="n">luinfo</span><span class="o">.</span><span class="n">frameID</span><span class="p">)</span>
            <span class="n">luinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">[</span><span class="n">fn_luid</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ignorekeys</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AttrDict</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">luinfo</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">})</span>

        <span class="k">return</span> <span class="n">luinfo</span></div>

    <span class="k">def</span> <span class="nf">_lu_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lu</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Augment the LU information that was loaded from the frame file</span>
<span class="sd">        with additional information from the LU file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fn_luid</span> <span class="o">=</span> <span class="n">lu</span><span class="o">.</span><span class="n">ID</span>

        <span class="n">fname</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;lu</span><span class="si">{</span><span class="n">fn_luid</span><span class="si">}</span><span class="s2">.xml&quot;</span>
        <span class="n">locpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_dir</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
        <span class="c1"># print(locpath, file=sys.stderr)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span><span class="n">locpath</span><span class="p">,</span> <span class="s2">&quot;lexUnit&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
                <span class="n">elt</span> <span class="o">=</span> <span class="n">view</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown LU id: </span><span class="si">{</span><span class="n">fn_luid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="n">lu2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_lexunit_elt</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">)</span>
        <span class="n">lu</span><span class="o">.</span><span class="n">URL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fnweb_url</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_dir</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">fname</span>
        <span class="n">lu</span><span class="o">.</span><span class="n">subCorpus</span> <span class="o">=</span> <span class="n">lu2</span><span class="o">.</span><span class="n">subCorpus</span>
        <span class="n">lu</span><span class="o">.</span><span class="n">exemplars</span> <span class="o">=</span> <span class="n">SpecialList</span><span class="p">(</span>
            <span class="s2">&quot;luexemplars&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">sent</span> <span class="k">for</span> <span class="n">subc</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">subCorpus</span> <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">subc</span><span class="o">.</span><span class="n">sentence</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">exemplars</span><span class="p">:</span>
            <span class="n">sent</span><span class="p">[</span><span class="s2">&quot;LU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lu</span>
            <span class="n">sent</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lu</span><span class="o">.</span><span class="n">frame</span>
            <span class="k">for</span> <span class="n">aset</span> <span class="ow">in</span> <span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">:</span>
                <span class="n">aset</span><span class="p">[</span><span class="s2">&quot;LU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lu</span>
                <span class="n">aset</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lu</span><span class="o">.</span><span class="n">frame</span>

        <span class="k">return</span> <span class="n">lu</span>

    <span class="k">def</span> <span class="nf">_loadsemtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the semantic types index.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">XMLCorpusView</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;semTypes.xml&quot;</span><span class="p">),</span>
            <span class="s2">&quot;semTypes/semType&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle_semtype_elt</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">view</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="n">view</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">st</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">st</span><span class="p">[</span><span class="s2">&quot;abbrev&quot;</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">st</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">]</span>
                <span class="c1"># Both name and abbrev should be able to retrieve the</span>
                <span class="c1"># ID. The ID will retrieve the semantic type dict itself.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">st</span>
        <span class="c1"># now that all individual semtype XML is loaded, we can link them together</span>
        <span class="n">roots</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">st</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtypes</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">superType</span><span class="p">:</span>
                <span class="n">st</span><span class="o">.</span><span class="n">superType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">superType</span><span class="o">.</span><span class="n">supID</span><span class="p">)</span>
                <span class="n">st</span><span class="o">.</span><span class="n">superType</span><span class="o">.</span><span class="n">subTypes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">st</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">roots</span><span class="p">:</span>
                    <span class="n">roots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
                <span class="n">st</span><span class="o">.</span><span class="n">rootType</span> <span class="o">=</span> <span class="n">st</span>
        <span class="n">queue</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">roots</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">queue</span>
        <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">subTypes</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">rootType</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">rootType</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
        <span class="c1"># self.propagate_semtypes()  # apply inferencing over FE relations</span>

<div class="viewcode-block" id="FramenetCorpusReader.propagate_semtypes"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.propagate_semtypes">[docs]</a>    <span class="k">def</span> <span class="nf">propagate_semtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply inference rules to distribute semtypes over relations between FEs.</span>
<span class="sd">        For FrameNet 1.5, this results in 1011 semtypes being propagated.</span>
<span class="sd">        (Not done by default because it requires loading all frame files,</span>
<span class="sd">        which takes several seconds. If this needed to be fast, it could be rewritten</span>
<span class="sd">        to traverse the neighboring relations on demand for each FE semtype.)</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; x = sum(1 for f in fn.frames() for fe in f.FE.values() if fe.semType)</span>
<span class="sd">        &gt;&gt;&gt; fn.propagate_semtypes()</span>
<span class="sd">        &gt;&gt;&gt; y = sum(1 for f in fn.frames() for fe in f.FE.values() if fe.semType)</span>
<span class="sd">        &gt;&gt;&gt; y-x &gt; 1000</span>
<span class="sd">        True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loadsemtypes</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nPropagations</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">changed</span><span class="p">:</span>
            <span class="c1"># make a pass and see if anything needs to be propagated</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">ferel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fe_relations</span><span class="p">():</span>
                <span class="n">superST</span> <span class="o">=</span> <span class="n">ferel</span><span class="o">.</span><span class="n">superFE</span><span class="o">.</span><span class="n">semType</span>
                <span class="n">subST</span> <span class="o">=</span> <span class="n">ferel</span><span class="o">.</span><span class="n">subFE</span><span class="o">.</span><span class="n">semType</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">superST</span> <span class="ow">and</span> <span class="n">superST</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">subST</span><span class="p">:</span>
                        <span class="c1"># propagate downward</span>
                        <span class="k">assert</span> <span class="n">subST</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtype_inherits</span><span class="p">(</span><span class="n">subST</span><span class="p">,</span> <span class="n">superST</span><span class="p">),</span> <span class="p">(</span>
                            <span class="n">superST</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                            <span class="n">ferel</span><span class="p">,</span>
                            <span class="n">subST</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="k">if</span> <span class="n">subST</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">ferel</span><span class="o">.</span><span class="n">subFE</span><span class="o">.</span><span class="n">semType</span> <span class="o">=</span> <span class="n">subST</span> <span class="o">=</span> <span class="n">superST</span>
                            <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="n">nPropagations</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Perspective_on&quot;</span><span class="p">,</span> <span class="s2">&quot;Subframe&quot;</span><span class="p">,</span> <span class="s2">&quot;Precedes&quot;</span><span class="p">]</span>
                        <span class="ow">and</span> <span class="n">subST</span>
                        <span class="ow">and</span> <span class="n">subST</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">superST</span>
                    <span class="p">):</span>
                        <span class="c1"># propagate upward</span>
                        <span class="k">assert</span> <span class="n">superST</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="n">superST</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ferel</span><span class="p">,</span> <span class="n">subST</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                        <span class="n">ferel</span><span class="o">.</span><span class="n">superFE</span><span class="o">.</span><span class="n">semType</span> <span class="o">=</span> <span class="n">superST</span> <span class="o">=</span> <span class="n">subST</span>
                        <span class="n">changed</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">nPropagations</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="c1"># bug in the data! ignore</span>
                    <span class="c1"># print(ex, file=sys.stderr)</span>
                    <span class="k">continue</span></div>
            <span class="c1"># print(i, nPropagations, file=sys.stderr)</span>

<div class="viewcode-block" id="FramenetCorpusReader.semtype"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.semtype">[docs]</a>    <span class="k">def</span> <span class="nf">semtype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; fn.semtype(233).name</span>
<span class="sd">        &#39;Temperature&#39;</span>
<span class="sd">        &gt;&gt;&gt; fn.semtype(233).abbrev</span>
<span class="sd">        &#39;Temp&#39;</span>
<span class="sd">        &gt;&gt;&gt; fn.semtype(&#39;Temperature&#39;).ID</span>
<span class="sd">        233</span>

<span class="sd">        :param key: The name, abbreviation, or id number of the semantic type</span>
<span class="sd">        :type key: string or int</span>
<span class="sd">        :return: Information about a semantic type</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">stid</span> <span class="o">=</span> <span class="n">key</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">stid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_loadsemtypes</span><span class="p">()</span>
                <span class="n">stid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">stid</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loadsemtypes</span><span class="p">()</span>
            <span class="n">st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">stid</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">st</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.semtype_inherits"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.semtype_inherits">[docs]</a>    <span class="k">def</span> <span class="nf">semtype_inherits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="n">superST</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">st</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">superST</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">superST</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">superST</span><span class="p">)</span>
        <span class="n">par</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">superType</span>
        <span class="k">while</span> <span class="n">par</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">par</span> <span class="ow">is</span> <span class="n">superST</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="n">par</span> <span class="o">=</span> <span class="n">par</span><span class="o">.</span><span class="n">superType</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frames"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frames">[docs]</a>    <span class="k">def</span> <span class="nf">frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain details for a specific frame.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; len(fn.frames()) in (1019, 1221)    # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; x = PrettyList(fn.frames(r&#39;(?i)crim&#39;), maxReprSize=0, breakLines=True)</span>
<span class="sd">        &gt;&gt;&gt; x.sort(key=itemgetter(&#39;ID&#39;))</span>
<span class="sd">        &gt;&gt;&gt; x</span>
<span class="sd">        [&lt;frame ID=200 name=Criminal_process&gt;,</span>
<span class="sd">         &lt;frame ID=500 name=Criminal_investigation&gt;,</span>
<span class="sd">         &lt;frame ID=692 name=Crime_scenario&gt;,</span>
<span class="sd">         &lt;frame ID=700 name=Committing_crime&gt;]</span>

<span class="sd">        A brief intro to Frames (excerpted from &quot;FrameNet II: Extended</span>
<span class="sd">        Theory and Practice&quot; by Ruppenhofer et. al., 2010):</span>

<span class="sd">        A Frame is a script-like conceptual structure that describes a</span>
<span class="sd">        particular type of situation, object, or event along with the</span>
<span class="sd">        participants and props that are needed for that Frame. For</span>
<span class="sd">        example, the &quot;Apply_heat&quot; frame describes a common situation</span>
<span class="sd">        involving a Cook, some Food, and a Heating_Instrument, and is</span>
<span class="sd">        evoked by words such as bake, blanch, boil, broil, brown,</span>
<span class="sd">        simmer, steam, etc.</span>

<span class="sd">        We call the roles of a Frame &quot;frame elements&quot; (FEs) and the</span>
<span class="sd">        frame-evoking words are called &quot;lexical units&quot; (LUs).</span>

<span class="sd">        FrameNet includes relations between Frames. Several types of</span>
<span class="sd">        relations are defined, of which the most important are:</span>

<span class="sd">           - Inheritance: An IS-A relation. The child frame is a subtype</span>
<span class="sd">             of the parent frame, and each FE in the parent is bound to</span>
<span class="sd">             a corresponding FE in the child. An example is the</span>
<span class="sd">             &quot;Revenge&quot; frame which inherits from the</span>
<span class="sd">             &quot;Rewards_and_punishments&quot; frame.</span>

<span class="sd">           - Using: The child frame presupposes the parent frame as</span>
<span class="sd">             background, e.g the &quot;Speed&quot; frame &quot;uses&quot; (or presupposes)</span>
<span class="sd">             the &quot;Motion&quot; frame; however, not all parent FEs need to be</span>
<span class="sd">             bound to child FEs.</span>

<span class="sd">           - Subframe: The child frame is a subevent of a complex event</span>
<span class="sd">             represented by the parent, e.g. the &quot;Criminal_process&quot; frame</span>
<span class="sd">             has subframes of &quot;Arrest&quot;, &quot;Arraignment&quot;, &quot;Trial&quot;, and</span>
<span class="sd">             &quot;Sentencing&quot;.</span>

<span class="sd">           - Perspective_on: The child frame provides a particular</span>
<span class="sd">             perspective on an un-perspectivized parent frame. A pair of</span>
<span class="sd">             examples consists of the &quot;Hiring&quot; and &quot;Get_a_job&quot; frames,</span>
<span class="sd">             which perspectivize the &quot;Employment_start&quot; frame from the</span>
<span class="sd">             Employer&#39;s and the Employee&#39;s point of view, respectively.</span>

<span class="sd">        :param name: A regular expression pattern used to match against</span>
<span class="sd">            Frame names. If &#39;name&#39; is None, then a list of all</span>
<span class="sd">            Framenet Frames will be returned.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: A list of matching Frames (or all Frames).</span>
<span class="sd">        :rtype: list(AttrDict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fIDs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildframeindex</span><span class="p">()</span>
            <span class="n">fIDs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">fID</span><span class="p">)</span> <span class="k">for</span> <span class="n">fID</span><span class="p">,</span> <span class="n">finfo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_ids_and_names</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PrettyLazyMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">fIDs</span><span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame_ids_and_names"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame_ids_and_names">[docs]</a>    <span class="k">def</span> <span class="nf">frame_ids_and_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Uses the frame index, which is much faster than looking up each frame definition</span>
<span class="sd">        if only the names and IDs are needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildframeindex</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">fID</span><span class="p">:</span> <span class="n">finfo</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">fID</span><span class="p">,</span> <span class="n">finfo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_idx</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">finfo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.fes"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.fes">[docs]</a>    <span class="k">def</span> <span class="nf">fes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lists frame element objects. If &#39;name&#39; is provided, this is treated as</span>
<span class="sd">        a case-insensitive regular expression to filter by frame name.</span>
<span class="sd">        (Case-insensitivity is because casing of frame element names is not always</span>
<span class="sd">        consistent across frames.) Specify &#39;frame&#39; to filter by a frame name pattern,</span>
<span class="sd">        ID, or object.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; fn.fes(&#39;Noise_maker&#39;)</span>
<span class="sd">        [&lt;fe ID=6043 name=Noise_maker&gt;]</span>
<span class="sd">        &gt;&gt;&gt; sorted([(fe.frame.name,fe.name) for fe in fn.fes(&#39;sound&#39;)]) # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        [(&#39;Cause_to_make_noise&#39;, &#39;Sound_maker&#39;), (&#39;Make_noise&#39;, &#39;Sound&#39;),</span>
<span class="sd">         (&#39;Make_noise&#39;, &#39;Sound_source&#39;), (&#39;Sound_movement&#39;, &#39;Location_of_sound_source&#39;),</span>
<span class="sd">         (&#39;Sound_movement&#39;, &#39;Sound&#39;), (&#39;Sound_movement&#39;, &#39;Sound_source&#39;),</span>
<span class="sd">         (&#39;Sounds&#39;, &#39;Component_sound&#39;), (&#39;Sounds&#39;, &#39;Location_of_sound_source&#39;),</span>
<span class="sd">         (&#39;Sounds&#39;, &#39;Sound_source&#39;), (&#39;Vocalizations&#39;, &#39;Location_of_sound_source&#39;),</span>
<span class="sd">         (&#39;Vocalizations&#39;, &#39;Sound_source&#39;)]</span>
<span class="sd">        &gt;&gt;&gt; sorted([(fe.frame.name,fe.name) for fe in fn.fes(&#39;sound&#39;,r&#39;(?i)make_noise&#39;)]) # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        [(&#39;Cause_to_make_noise&#39;, &#39;Sound_maker&#39;),</span>
<span class="sd">         (&#39;Make_noise&#39;, &#39;Sound&#39;),</span>
<span class="sd">         (&#39;Make_noise&#39;, &#39;Sound_source&#39;)]</span>
<span class="sd">        &gt;&gt;&gt; sorted(set(fe.name for fe in fn.fes(&#39;^sound&#39;)))</span>
<span class="sd">        [&#39;Sound&#39;, &#39;Sound_maker&#39;, &#39;Sound_source&#39;]</span>
<span class="sd">        &gt;&gt;&gt; len(fn.fes(&#39;^sound$&#39;))</span>
<span class="sd">        2</span>

<span class="sd">        :param name: A regular expression pattern used to match against</span>
<span class="sd">            frame element names. If &#39;name&#39; is None, then a list of all</span>
<span class="sd">            frame elements will be returned.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: A list of matching frame elements</span>
<span class="sd">        :rtype: list(AttrDict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># what frames are we searching in?</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">frame</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">frame</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
            <span class="n">fe</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frames</span>
            <span class="k">for</span> <span class="n">fename</span><span class="p">,</span> <span class="n">fe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">fename</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.lus"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.lus">[docs]</a>    <span class="k">def</span> <span class="nf">lus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain details for lexical units.</span>
<span class="sd">        Optionally restrict by lexical unit name pattern, and/or to a certain frame</span>
<span class="sd">        or frames whose name matches a pattern.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; len(fn.lus()) in (11829, 13572) # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(sorted(fn.lus(r&#39;(?i)a little&#39;), key=itemgetter(&#39;ID&#39;)), maxReprSize=0, breakLines=True)</span>
<span class="sd">        [&lt;lu ID=14733 name=a little.n&gt;,</span>
<span class="sd">         &lt;lu ID=14743 name=a little.adv&gt;,</span>
<span class="sd">         &lt;lu ID=14744 name=a little bit.adv&gt;]</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(sorted(fn.lus(r&#39;interest&#39;, r&#39;(?i)stimulus&#39;), key=itemgetter(&#39;ID&#39;)))</span>
<span class="sd">        [&lt;lu ID=14894 name=interested.a&gt;, &lt;lu ID=14920 name=interesting.a&gt;]</span>

<span class="sd">        A brief intro to Lexical Units (excerpted from &quot;FrameNet II:</span>
<span class="sd">        Extended Theory and Practice&quot; by Ruppenhofer et. al., 2010):</span>

<span class="sd">        A lexical unit (LU) is a pairing of a word with a meaning. For</span>
<span class="sd">        example, the &quot;Apply_heat&quot; Frame describes a common situation</span>
<span class="sd">        involving a Cook, some Food, and a Heating Instrument, and is</span>
<span class="sd">        _evoked_ by words such as bake, blanch, boil, broil, brown,</span>
<span class="sd">        simmer, steam, etc. These frame-evoking words are the LUs in the</span>
<span class="sd">        Apply_heat frame. Each sense of a polysemous word is a different</span>
<span class="sd">        LU.</span>

<span class="sd">        We have used the word &quot;word&quot; in talking about LUs. The reality</span>
<span class="sd">        is actually rather complex. When we say that the word &quot;bake&quot; is</span>
<span class="sd">        polysemous, we mean that the lemma &quot;bake.v&quot; (which has the</span>
<span class="sd">        word-forms &quot;bake&quot;, &quot;bakes&quot;, &quot;baked&quot;, and &quot;baking&quot;) is linked to</span>
<span class="sd">        three different frames:</span>

<span class="sd">           - Apply_heat: &quot;Michelle baked the potatoes for 45 minutes.&quot;</span>

<span class="sd">           - Cooking_creation: &quot;Michelle baked her mother a cake for her birthday.&quot;</span>

<span class="sd">           - Absorb_heat: &quot;The potatoes have to bake for more than 30 minutes.&quot;</span>

<span class="sd">        These constitute three different LUs, with different</span>
<span class="sd">        definitions.</span>

<span class="sd">        Multiword expressions such as &quot;given name&quot; and hyphenated words</span>
<span class="sd">        like &quot;shut-eye&quot; can also be LUs. Idiomatic phrases such as</span>
<span class="sd">        &quot;middle of nowhere&quot; and &quot;give the slip (to)&quot; are also defined as</span>
<span class="sd">        LUs in the appropriate frames (&quot;Isolated_places&quot; and &quot;Evading&quot;,</span>
<span class="sd">        respectively), and their internal structure is not analyzed.</span>

<span class="sd">        Framenet provides multiple annotated examples of each sense of a</span>
<span class="sd">        word (i.e. each LU).  Moreover, the set of examples</span>
<span class="sd">        (approximately 20 per LU) illustrates all of the combinatorial</span>
<span class="sd">        possibilities of the lexical unit.</span>

<span class="sd">        Each LU is linked to a Frame, and hence to the other words which</span>
<span class="sd">        evoke that Frame. This makes the FrameNet database similar to a</span>
<span class="sd">        thesaurus, grouping together semantically similar words.</span>

<span class="sd">        In the simplest case, frame-evoking words are verbs such as</span>
<span class="sd">        &quot;fried&quot; in:</span>

<span class="sd">           &quot;Matilde fried the catfish in a heavy iron skillet.&quot;</span>

<span class="sd">        Sometimes event nouns may evoke a Frame. For example,</span>
<span class="sd">        &quot;reduction&quot; evokes &quot;Cause_change_of_scalar_position&quot; in:</span>

<span class="sd">           &quot;...the reduction of debt levels to $665 million from $2.6 billion.&quot;</span>

<span class="sd">        Adjectives may also evoke a Frame. For example, &quot;asleep&quot; may</span>
<span class="sd">        evoke the &quot;Sleep&quot; frame as in:</span>

<span class="sd">           &quot;They were asleep for hours.&quot;</span>

<span class="sd">        Many common nouns, such as artifacts like &quot;hat&quot; or &quot;tower&quot;,</span>
<span class="sd">        typically serve as dependents rather than clearly evoking their</span>
<span class="sd">        own frames.</span>

<span class="sd">        :param name: A regular expression pattern used to search the LU</span>
<span class="sd">            names. Note that LU names take the form of a dotted</span>
<span class="sd">            string (e.g. &quot;run.v&quot; or &quot;a little.adv&quot;) in which a</span>
<span class="sd">            lemma precedes the &quot;.&quot; and a POS follows the</span>
<span class="sd">            dot. The lemma may be composed of a single lexeme</span>
<span class="sd">            (e.g. &quot;run&quot;) or of multiple lexemes (e.g. &quot;a</span>
<span class="sd">            little&quot;). If &#39;name&#39; is not given, then all LUs will</span>
<span class="sd">            be returned.</span>

<span class="sd">            The valid POSes are:</span>

<span class="sd">                   v    - verb</span>
<span class="sd">                   n    - noun</span>
<span class="sd">                   a    - adjective</span>
<span class="sd">                   adv  - adverb</span>
<span class="sd">                   prep - preposition</span>
<span class="sd">                   num  - numbers</span>
<span class="sd">                   intj - interjection</span>
<span class="sd">                   art  - article</span>
<span class="sd">                   c    - conjunction</span>
<span class="sd">                   scon - subordinating conjunction</span>

<span class="sd">        :type name: str</span>
<span class="sd">        :type frame: str or int or frame</span>
<span class="sd">        :return: A list of selected (or all) lexical units</span>
<span class="sd">        :rtype: list of LU objects (dicts). See the lu() function for info</span>
<span class="sd">          about the specifics of LU objects.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># match LUs, then restrict by frame</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lu</span><span class="p">(</span><span class="n">luID</span><span class="p">)</span> <span class="k">for</span> <span class="n">luID</span><span class="p">,</span> <span class="n">luName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lu_ids_and_names</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">frameIDs</span> <span class="o">=</span> <span class="p">{</span><span class="n">frame</span><span class="p">}</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">frameIDs</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="o">.</span><span class="n">ID</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">(</span><span class="n">frame</span><span class="p">)}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">frameIDs</span> <span class="o">=</span> <span class="p">{</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span><span class="p">}</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">(</span><span class="n">lu</span> <span class="k">for</span> <span class="n">lu</span> <span class="ow">in</span> <span class="n">result</span> <span class="k">if</span> <span class="n">lu</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span> <span class="ow">in</span> <span class="n">frameIDs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># all LUs in matching frames</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">frame</span><span class="p">)]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">frame</span><span class="p">]</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
                <span class="nb">iter</span><span class="p">(</span><span class="n">LazyConcatenation</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">))</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># all LUs</span>
            <span class="n">luIDs</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">luID</span>
                <span class="k">for</span> <span class="n">luID</span><span class="p">,</span> <span class="n">lu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">lu</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bad_statuses</span>
            <span class="p">]</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">PrettyLazyMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lu</span><span class="p">,</span> <span class="n">luIDs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.lu_ids_and_names"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.lu_ids_and_names">[docs]</a>    <span class="k">def</span> <span class="nf">lu_ids_and_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Uses the LU index, which is much faster than looking up each LU definition</span>
<span class="sd">        if only the names and IDs are needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">luID</span><span class="p">:</span> <span class="n">luinfo</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">luID</span><span class="p">,</span> <span class="n">luinfo</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">luinfo</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bad_statuses</span>
            <span class="ow">and</span> <span class="p">(</span><span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">luinfo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.docs_metadata"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.docs_metadata">[docs]</a>    <span class="k">def</span> <span class="nf">docs_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return an index of the annotated documents in Framenet.</span>

<span class="sd">        Details for a specific annotated document can be obtained using this</span>
<span class="sd">        class&#39;s doc() function and pass it the value of the &#39;ID&#39; field.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; len(fn.docs()) in (78, 107) # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; set([x.corpname for x in fn.docs_metadata()])&gt;=set([&#39;ANC&#39;, &#39;KBEval&#39;, \</span>
<span class="sd">                    &#39;LUCorpus-v0.3&#39;, &#39;Miscellaneous&#39;, &#39;NTI&#39;, &#39;PropBank&#39;])</span>
<span class="sd">        True</span>

<span class="sd">        :param name: A regular expression pattern used to search the</span>
<span class="sd">            file name of each annotated document. The document&#39;s</span>
<span class="sd">            file name contains the name of the corpus that the</span>
<span class="sd">            document is from, followed by two underscores &quot;__&quot;</span>
<span class="sd">            followed by the document name. So, for example, the</span>
<span class="sd">            file name &quot;LUCorpus-v0.3__20000410_nyt-NEW.xml&quot; is</span>
<span class="sd">            from the corpus named &quot;LUCorpus-v0.3&quot; and the</span>
<span class="sd">            document name is &quot;20000410_nyt-NEW.xml&quot;.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: A list of selected (or all) annotated documents</span>
<span class="sd">        :rtype: list of dicts, where each dict object contains the following</span>
<span class="sd">                keys:</span>

<span class="sd">                - &#39;name&#39;</span>
<span class="sd">                - &#39;ID&#39;</span>
<span class="sd">                - &#39;corpid&#39;</span>
<span class="sd">                - &#39;corpname&#39;</span>
<span class="sd">                - &#39;description&#39;</span>
<span class="sd">                - &#39;filename&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ftlist</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildcorpusindex</span><span class="p">()</span>
            <span class="n">ftlist</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_idx</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ftlist</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
                <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ftlist</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">])</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.docs"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.docs">[docs]</a>    <span class="k">def</span> <span class="nf">docs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of the annotated full-text documents in FrameNet,</span>
<span class="sd">        optionally filtered by a regex to be matched against the document name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrettyLazyMap</span><span class="p">((</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">ID</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">docs_metadata</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.sents"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.sents">[docs]</a>    <span class="k">def</span> <span class="nf">sents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exemplars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">full_text</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Annotated sentences matching the specified criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">exemplars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">full_text</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exemplars</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ft_sents</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exemplars</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">full_text</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ft_sents</span><span class="p">()</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.annotations"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.annotations">[docs]</a>    <span class="k">def</span> <span class="nf">annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">luNamePattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exemplars</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">full_text</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Frame annotation sets matching the specified criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">exemplars</span><span class="p">:</span>
            <span class="n">epart</span> <span class="o">=</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
                <span class="n">sent</span><span class="o">.</span><span class="n">frameAnnotation</span> <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exemplars</span><span class="p">(</span><span class="n">luNamePattern</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">epart</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">full_text</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">matchedLUIDs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lu_ids_and_names</span><span class="p">(</span><span class="n">luNamePattern</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">ftpart</span> <span class="o">=</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
                <span class="n">aset</span>
                <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ft_sents</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">aset</span> <span class="ow">in</span> <span class="n">sent</span><span class="o">.</span><span class="n">annotationSet</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">if</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">aset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;luID&quot;</span><span class="p">,</span> <span class="s2">&quot;CXN_ASET&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">matchedLUIDs</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ftpart</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">exemplars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">full_text</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">epart</span> <span class="o">+</span> <span class="n">ftpart</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">epart</span>
        <span class="k">elif</span> <span class="n">full_text</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ftpart</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.exemplars"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.exemplars">[docs]</a>    <span class="k">def</span> <span class="nf">exemplars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">luNamePattern</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fe</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fe2</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lexicographic exemplar sentences, optionally filtered by LU name and/or 1-2 FEs that</span>
<span class="sd">        are realized overtly. &#39;frame&#39; may be a name pattern, frame ID, or frame instance.</span>
<span class="sd">        &#39;fe&#39; may be a name pattern or FE instance; if specified, &#39;fe2&#39; may also</span>
<span class="sd">        be specified to retrieve sentences with both overt FEs (in either order).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fe</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span><span class="s2">&quot;exemplars(..., fe=None, fe2=&lt;value&gt;) is not allowed&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">fe</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe2</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="c1"># fe2 is specific to a particular frame. swap fe and fe2 so fe is always used to determine the frame.</span>
                    <span class="n">fe</span><span class="p">,</span> <span class="n">fe2</span> <span class="o">=</span> <span class="n">fe2</span><span class="p">,</span> <span class="n">fe</span>
                <span class="k">elif</span> <span class="n">fe</span><span class="o">.</span><span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">fe2</span><span class="o">.</span><span class="n">frame</span><span class="p">:</span>  <span class="c1"># ensure frames match</span>
                    <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span>
                        <span class="s2">&quot;exemplars() call with inconsistent `fe` and `fe2` specification (frames must match)&quot;</span>
                    <span class="p">)</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">fe</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">fe</span><span class="o">.</span><span class="n">frame</span>

        <span class="c1"># narrow down to frames matching criteria</span>

        <span class="n">lusByFrame</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span>
            <span class="nb">list</span>
        <span class="p">)</span>  <span class="c1"># frame name -&gt; matching LUs, if luNamePattern is specified</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">lu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lus</span><span class="p">(</span><span class="n">luNamePattern</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">):</span>
                        <span class="n">frames</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">lu</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
                        <span class="n">lusByFrame</span><span class="p">[</span><span class="n">lu</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lu</span><span class="p">)</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="n">LazyMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">frames</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">frame</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># frame object</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">frame</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">lusByFrame</span> <span class="o">=</span> <span class="p">{</span><span class="n">frame</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lus</span><span class="p">(</span><span class="n">luNamePattern</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">frame</span><span class="p">)}</span>

            <span class="k">if</span> <span class="n">fe</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># narrow to frames that define this FE</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
                        <span class="n">f</span>
                        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frames</span>
                        <span class="k">if</span> <span class="n">fe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span>
                        <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="n">ffe</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">frame</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span>
                            <span class="s2">&quot;exemplars() call with inconsistent `frame` and `fe` specification&quot;</span>
                        <span class="p">)</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="p">[</span><span class="n">fe</span><span class="o">.</span><span class="n">frame</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">fe2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># narrow to frames that ALSO define this FE</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe2</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                        <span class="n">frames</span> <span class="o">=</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
                            <span class="n">f</span>
                            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frames</span>
                            <span class="k">if</span> <span class="n">fe2</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span>
                            <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">fe2</span><span class="p">,</span> <span class="n">ffe</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                        <span class="p">)</span>
                    <span class="c1"># else we already narrowed it to a single frame</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># frame, luNamePattern are None. fe, fe2 are None or strings</span>
            <span class="k">if</span> <span class="n">fe</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">{</span><span class="n">ffe</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fes</span><span class="p">(</span><span class="n">fe</span><span class="p">)}</span>
                <span class="k">if</span> <span class="n">fe2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">frames2</span> <span class="o">=</span> <span class="p">{</span><span class="n">ffe</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">ID</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fes</span><span class="p">(</span><span class="n">fe2</span><span class="p">)}</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="n">frames</span> <span class="o">&amp;</span> <span class="n">frames2</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="n">LazyMap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">frames</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">()</span>

        <span class="c1"># we&#39;ve narrowed down &#39;frames&#39;</span>
        <span class="c1"># now get exemplars for relevant LUs in those frames</span>

        <span class="k">def</span> <span class="nf">_matching_exs</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">frames</span><span class="p">:</span>
                <span class="n">fes</span> <span class="o">=</span> <span class="n">fes2</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># FEs of interest</span>
                <span class="k">if</span> <span class="n">fe</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fes</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="p">{</span><span class="n">ffe</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="n">ffe</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)}</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                        <span class="k">else</span> <span class="p">{</span><span class="n">fe</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">fe2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fes2</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="p">{</span><span class="n">ffe</span> <span class="k">for</span> <span class="n">ffe</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">fe2</span><span class="p">,</span> <span class="n">ffe</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">I</span><span class="p">)}</span>
                            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe2</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                            <span class="k">else</span> <span class="p">{</span><span class="n">fe2</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
                        <span class="p">)</span>

                <span class="k">for</span> <span class="n">lu</span> <span class="ow">in</span> <span class="p">(</span>
                    <span class="n">lusByFrame</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">luNamePattern</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="k">else</span> <span class="n">f</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">lu</span><span class="o">.</span><span class="n">exemplars</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">fes</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exemplar_of_fes</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">fes</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span>
                            <span class="n">fes2</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exemplar_of_fes</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">fes2</span><span class="p">)</span>
                        <span class="p">):</span>
                            <span class="k">yield</span> <span class="n">ex</span>

        <span class="k">return</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span><span class="n">_matching_exs</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">_exemplar_of_fes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">fes</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given an exemplar sentence and a set of FE names, return the subset of FE names</span>
<span class="sd">        that are realized overtly in the sentence on the FE, FE2, or FE3 layer.</span>

<span class="sd">        If &#39;fes&#39; is None, returns all overt FE names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">overtNames</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">ex</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;FE2&quot;</span> <span class="ow">in</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">overtNames</span> <span class="o">|=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">ex</span><span class="o">.</span><span class="n">FE2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">FE2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;FE3&quot;</span> <span class="ow">in</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">overtNames</span> <span class="o">|=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">ex</span><span class="o">.</span><span class="n">FE3</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="n">ex</span><span class="o">.</span><span class="n">FE3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">overtNames</span> <span class="o">&amp;</span> <span class="n">fes</span> <span class="k">if</span> <span class="n">fes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">overtNames</span>

<div class="viewcode-block" id="FramenetCorpusReader.ft_sents"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.ft_sents">[docs]</a>    <span class="k">def</span> <span class="nf">ft_sents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docNamePattern</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Full-text annotation sentences, optionally filtered by document name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">PrettyLazyIteratorList</span><span class="p">(</span>
            <span class="n">sent</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">docs</span><span class="p">(</span><span class="n">docNamePattern</span><span class="p">)</span> <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">sentence</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame_relation_types"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame_relation_types">[docs]</a>    <span class="k">def</span> <span class="nf">frame_relation_types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a list of frame relation types.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; frts = sorted(fn.frame_relation_types(), key=itemgetter(&#39;ID&#39;))</span>
<span class="sd">        &gt;&gt;&gt; isinstance(frts, list)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; len(frts) in (9, 10)    # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; PrettyDict(frts[0], breakLines=True)</span>
<span class="sd">        {&#39;ID&#39;: 1,</span>
<span class="sd">         &#39;_type&#39;: &#39;framerelationtype&#39;,</span>
<span class="sd">         &#39;frameRelations&#39;: [&lt;Parent=Event -- Inheritance -&gt; Child=Change_of_consistency&gt;, &lt;Parent=Event -- Inheritance -&gt; Child=Rotting&gt;, ...],</span>
<span class="sd">         &#39;name&#39;: &#39;Inheritance&#39;,</span>
<span class="sd">         &#39;subFrameName&#39;: &#39;Child&#39;,</span>
<span class="sd">         &#39;superFrameName&#39;: &#39;Parent&#39;}</span>

<span class="sd">        :return: A list of all of the frame relation types in framenet</span>
<span class="sd">        :rtype: list(dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freltyp_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_freltyp_idx</span><span class="o">.</span><span class="n">values</span><span class="p">()</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.frame_relations"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.frame_relations">[docs]</a>    <span class="k">def</span> <span class="nf">frame_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frame2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param frame: (optional) frame object, name, or ID; only relations involving</span>
<span class="sd">            this frame will be returned</span>
<span class="sd">        :param frame2: (optional; &#39;frame&#39; must be a different frame) only show relations</span>
<span class="sd">            between the two specified frames, in either direction</span>
<span class="sd">        :param type: (optional) frame relation type (name or object); show only relations</span>
<span class="sd">            of this type</span>
<span class="sd">        :type frame: int or str or AttrDict</span>
<span class="sd">        :return: A list of all of the frame relations in framenet</span>
<span class="sd">        :rtype: list(dict)</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; frels = fn.frame_relations()</span>
<span class="sd">        &gt;&gt;&gt; isinstance(frels, list)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; len(frels) in (1676, 2070)  # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(fn.frame_relations(&#39;Cooking_creation&#39;), maxReprSize=0, breakLines=True)</span>
<span class="sd">        [&lt;Parent=Intentionally_create -- Inheritance -&gt; Child=Cooking_creation&gt;,</span>
<span class="sd">         &lt;Parent=Apply_heat -- Using -&gt; Child=Cooking_creation&gt;,</span>
<span class="sd">         &lt;MainEntry=Apply_heat -- See_also -&gt; ReferringEntry=Cooking_creation&gt;]</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(fn.frame_relations(274), breakLines=True)</span>
<span class="sd">        [&lt;Parent=Avoiding -- Inheritance -&gt; Child=Dodging&gt;,</span>
<span class="sd">         &lt;Parent=Avoiding -- Inheritance -&gt; Child=Evading&gt;, ...]</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(fn.frame_relations(fn.frame(&#39;Cooking_creation&#39;)), breakLines=True)</span>
<span class="sd">        [&lt;Parent=Intentionally_create -- Inheritance -&gt; Child=Cooking_creation&gt;,</span>
<span class="sd">         &lt;Parent=Apply_heat -- Using -&gt; Child=Cooking_creation&gt;, ...]</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(fn.frame_relations(&#39;Cooking_creation&#39;, type=&#39;Inheritance&#39;))</span>
<span class="sd">        [&lt;Parent=Intentionally_create -- Inheritance -&gt; Child=Cooking_creation&gt;]</span>
<span class="sd">        &gt;&gt;&gt; PrettyList(fn.frame_relations(&#39;Cooking_creation&#39;, &#39;Apply_heat&#39;), breakLines=True) # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        [&lt;Parent=Apply_heat -- Using -&gt; Child=Cooking_creation&gt;,</span>
<span class="sd">        &lt;MainEntry=Apply_heat -- See_also -&gt; ReferringEntry=Cooking_creation&gt;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relation_type</span> <span class="o">=</span> <span class="nb">type</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span>

        <span class="n">rels</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">relation_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">relation_type</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="p">[</span><span class="n">rt</span> <span class="k">for</span> <span class="n">rt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_relation_types</span><span class="p">()</span> <span class="k">if</span> <span class="n">rt</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">type</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>

        <span class="c1"># lookup by &#39;frame&#39;</span>
        <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;frameRelations&quot;</span> <span class="ow">in</span> <span class="n">frame</span><span class="p">:</span>
                <span class="n">rels</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">ID</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_name</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span><span class="o">.</span><span class="n">ID</span>
                <span class="n">rels</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span><span class="p">[</span><span class="n">frelID</span><span class="p">]</span> <span class="k">for</span> <span class="n">frelID</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frel_f_idx</span><span class="p">[</span><span class="n">frame</span><span class="p">]]</span>

            <span class="c1"># filter by &#39;type&#39;</span>
            <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">rels</span> <span class="o">=</span> <span class="p">[</span><span class="n">rel</span> <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">rels</span> <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">type</span> <span class="ow">is</span> <span class="nb">type</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># lookup by &#39;type&#39;</span>
            <span class="n">rels</span> <span class="o">=</span> <span class="nb">type</span><span class="o">.</span><span class="n">frameRelations</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frel_idx</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>

        <span class="c1"># filter by &#39;frame2&#39;</span>
        <span class="k">if</span> <span class="n">frame2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span>
                    <span class="s2">&quot;frame_relations(frame=None, frame2=&lt;value&gt;) is not allowed&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame2</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame2</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">frame2</span> <span class="o">=</span> <span class="n">frame2</span><span class="o">.</span><span class="n">ID</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">frame2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_by_name</span><span class="p">(</span><span class="n">frame2</span><span class="p">)</span><span class="o">.</span><span class="n">ID</span>
            <span class="k">if</span> <span class="n">frame</span> <span class="o">==</span> <span class="n">frame2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FramenetError</span><span class="p">(</span>
                    <span class="s2">&quot;The two frame arguments to frame_relations() must be different frames&quot;</span>
                <span class="p">)</span>
            <span class="n">rels</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">rel</span>
                <span class="k">for</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">rels</span>
                <span class="k">if</span> <span class="n">rel</span><span class="o">.</span><span class="n">superFrame</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">frame2</span> <span class="ow">or</span> <span class="n">rel</span><span class="o">.</span><span class="n">subFrame</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">frame2</span>
            <span class="p">]</span>

        <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
            <span class="nb">sorted</span><span class="p">(</span>
                <span class="n">rels</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">frel</span><span class="p">:</span> <span class="p">(</span><span class="n">frel</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">frel</span><span class="o">.</span><span class="n">superFrameName</span><span class="p">,</span> <span class="n">frel</span><span class="o">.</span><span class="n">subFrameName</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.fe_relations"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.fe_relations">[docs]</a>    <span class="k">def</span> <span class="nf">fe_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a list of frame element relations.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; ferels = fn.fe_relations()</span>
<span class="sd">        &gt;&gt;&gt; isinstance(ferels, list)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; len(ferels) in (10020, 12393)   # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; PrettyDict(ferels[0], breakLines=True) # doctest: +NORMALIZE_WHITESPACE</span>
<span class="sd">        {&#39;ID&#39;: 14642,</span>
<span class="sd">        &#39;_type&#39;: &#39;ferelation&#39;,</span>
<span class="sd">        &#39;frameRelation&#39;: &lt;Parent=Abounding_with -- Inheritance -&gt; Child=Lively_place&gt;,</span>
<span class="sd">        &#39;subFE&#39;: &lt;fe ID=11370 name=Degree&gt;,</span>
<span class="sd">        &#39;subFEName&#39;: &#39;Degree&#39;,</span>
<span class="sd">        &#39;subFrame&#39;: &lt;frame ID=1904 name=Lively_place&gt;,</span>
<span class="sd">        &#39;subID&#39;: 11370,</span>
<span class="sd">        &#39;supID&#39;: 2271,</span>
<span class="sd">        &#39;superFE&#39;: &lt;fe ID=2271 name=Degree&gt;,</span>
<span class="sd">        &#39;superFEName&#39;: &#39;Degree&#39;,</span>
<span class="sd">        &#39;superFrame&#39;: &lt;frame ID=262 name=Abounding_with&gt;,</span>
<span class="sd">        &#39;type&#39;: &lt;framerelationtype ID=1 name=Inheritance&gt;}</span>

<span class="sd">        :return: A list of all of the frame element relations in framenet</span>
<span class="sd">        :rtype: list(dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buildrelationindex</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
            <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ferel_idx</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ferel</span><span class="p">:</span> <span class="p">(</span>
                    <span class="n">ferel</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span>
                    <span class="n">ferel</span><span class="o">.</span><span class="n">frameRelation</span><span class="o">.</span><span class="n">superFrameName</span><span class="p">,</span>
                    <span class="n">ferel</span><span class="o">.</span><span class="n">superFEName</span><span class="p">,</span>
                    <span class="n">ferel</span><span class="o">.</span><span class="n">frameRelation</span><span class="o">.</span><span class="n">subFrameName</span><span class="p">,</span>
                    <span class="n">ferel</span><span class="o">.</span><span class="n">subFEName</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="FramenetCorpusReader.semtypes"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.FramenetCorpusReader.semtypes">[docs]</a>    <span class="k">def</span> <span class="nf">semtypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a list of semantic types.</span>

<span class="sd">        &gt;&gt;&gt; from nltk.corpus import framenet as fn</span>
<span class="sd">        &gt;&gt;&gt; stypes = fn.semtypes()</span>
<span class="sd">        &gt;&gt;&gt; len(stypes) in (73, 109) # FN 1.5 and 1.7, resp.</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; sorted(stypes[0].keys())</span>
<span class="sd">        [&#39;ID&#39;, &#39;_type&#39;, &#39;abbrev&#39;, &#39;definition&#39;, &#39;definitionMarkup&#39;, &#39;name&#39;, &#39;rootType&#39;, &#39;subTypes&#39;, &#39;superType&#39;]</span>

<span class="sd">        :return: A list of all of the semantic types in framenet</span>
<span class="sd">        :rtype: list(dict)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loadsemtypes</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">PrettyList</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_semtypes</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_load_xml_attributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts a subset of the attributes from the given element and</span>
<span class="sd">        returns them in a dictionary.</span>

<span class="sd">        :param d: A dictionary in which to store the attributes.</span>
<span class="sd">        :type d: dict</span>
<span class="sd">        :param elt: An ElementTree Element</span>
<span class="sd">        :type elt: Element</span>
<span class="sd">        :return: Returns the input dict ``d`` possibly including attributes from ``elt``</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">d</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">)(</span><span class="n">d</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">attr_dict</span> <span class="o">=</span> <span class="n">elt</span><span class="o">.</span><span class="n">attrib</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>

        <span class="k">if</span> <span class="n">attr_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>

        <span class="c1"># Ignore these attributes when loading attributes from an xml node</span>
        <span class="n">ignore_attrs</span> <span class="o">=</span> <span class="p">[</span>  <span class="c1">#&#39;cBy&#39;, &#39;cDate&#39;, &#39;mDate&#39;, # &lt;-- annotation metadata that could be of interest</span>
            <span class="s2">&quot;xsi&quot;</span><span class="p">,</span>
            <span class="s2">&quot;schemaLocation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;xmlns&quot;</span><span class="p">,</span>
            <span class="s2">&quot;bgColor&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fgColor&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attr_dict</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">attr</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ignore_attrs</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="n">val</span> <span class="o">=</span> <span class="n">attr_dict</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                <span class="n">d</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>

        <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">_strip_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets rid of all tags and newline characters from the given input</span>

<span class="sd">        :return: A cleaned-up version of the input string</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            # Look for boundary issues in markup. (Sometimes FEs are pluralized in definitions.)</span>
<span class="sd">            m = re.search(r&#39;\w[&lt;][^/]|[&lt;][/][^&gt;]+[&gt;](s\w|[a-rt-z0-9])&#39;, data)</span>
<span class="sd">            if m:</span>
<span class="sd">                print(&#39;Markup boundary:&#39;, data[max(0,m.start(0)-10):m.end(0)+10].replace(&#39;\n&#39;,&#39; &#39;), file=sys.stderr)</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;t&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/t&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;&lt;fex name=&quot;[^&quot;]+&quot;&gt;&#39;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/fex&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;fen&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/fen&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;m&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/m&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;ment&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/ment&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;ex&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/ex&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;gov&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/gov&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;x&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/x&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="c1"># Get rid of &lt;def-root&gt; and &lt;/def-root&gt; tags</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;def-root&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;/def-root&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">_handle_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">tagspec</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extracts and returns the attributes of the given element&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_handle_fulltextindex_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">tagspec</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts corpus/document info from the fulltextIndex.xml file.</span>

<span class="sd">        Note that this function &quot;flattens&quot; the information contained</span>
<span class="sd">        in each of the &quot;corpus&quot; elements, so that each &quot;document&quot;</span>
<span class="sd">        element will contain attributes for the corpus and</span>
<span class="sd">        corpusid. Also, each of the &quot;document&quot; items will contain a</span>
<span class="sd">        new attribute called &quot;filename&quot; that is the base file name of</span>
<span class="sd">        the xml file for the document in the &quot;fulltext&quot; subdir of the</span>
<span class="sd">        Framenet corpus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ftinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">corpname</span> <span class="o">=</span> <span class="n">ftinfo</span><span class="o">.</span><span class="n">name</span>
        <span class="n">corpid</span> <span class="o">=</span> <span class="n">ftinfo</span><span class="o">.</span><span class="n">ID</span>
        <span class="n">retlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;document&quot;</span><span class="p">):</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
                    <span class="n">docname</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">name</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">docname</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">description</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">corpname</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">docname</span><span class="si">}</span><span class="s2">.xml&quot;</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">URL</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_fnweb_url</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fulltext_dir</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">doc</span><span class="o">.</span><span class="n">filename</span>
                <span class="p">)</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">corpname</span> <span class="o">=</span> <span class="n">corpname</span>
                <span class="n">doc</span><span class="o">.</span><span class="n">corpid</span> <span class="o">=</span> <span class="n">corpid</span>
                <span class="n">retlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">retlist</span>

    <span class="k">def</span> <span class="nf">_handle_frame_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;Load the info for a Frame from a frame xml file&quot;&quot;&quot;</span>
        <span class="n">frinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>

        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;frame&quot;</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;FE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyDict</span><span class="p">()</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;FEcoreSets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;lexUnit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyDict</span><span class="p">()</span>
        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">frinfo</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">frinfo</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;definition&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;FE&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;FE&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">feinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fe_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;FE&quot;</span><span class="p">][</span><span class="n">feinfo</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">feinfo</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frinfo</span>  <span class="c1"># backpointer</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;FEcoreSet&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;FEcoreSet&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">coreset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fecoreset_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="c1"># assumes all FEs have been loaded before coresets</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;FEcoreSets&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">PrettyList</span><span class="p">(</span><span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;FE&quot;</span><span class="p">][</span><span class="n">fe</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="k">for</span> <span class="n">fe</span> <span class="ow">in</span> <span class="n">coreset</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;lexUnit&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;lexUnit&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">luentry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_framelexunit_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bad_statuses</span><span class="p">:</span>
                    <span class="c1"># problematic LU entry; ignore it</span>
                    <span class="k">continue</span>
                <span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">frinfo</span>
                <span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;URL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_fnweb_url</span>
                    <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                    <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_dir</span>
                    <span class="o">+</span> <span class="s2">&quot;/&quot;</span>
                    <span class="o">+</span> <span class="s2">&quot;lu</span><span class="si">{}</span><span class="s2">.xml&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">])</span>
                <span class="p">)</span>
                <span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;subCorpus&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                    <span class="p">(</span><span class="k">lambda</span> <span class="n">lu</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_file</span><span class="p">(</span><span class="n">lu</span><span class="p">)</span><span class="o">.</span><span class="n">subCorpus</span><span class="p">)(</span><span class="n">luentry</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">luentry</span><span class="p">[</span><span class="s2">&quot;exemplars&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span>
                    <span class="p">(</span><span class="k">lambda</span> <span class="n">lu</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_file</span><span class="p">(</span><span class="n">lu</span><span class="p">)</span><span class="o">.</span><span class="n">exemplars</span><span class="p">)(</span><span class="n">luentry</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;lexUnit&quot;</span><span class="p">][</span><span class="n">luentry</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">luentry</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_buildluindex</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_lu_idx</span><span class="p">[</span><span class="n">luentry</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">luentry</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;semType&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;semTypes&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">semtypeinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">semtypeinfo</span><span class="o">.</span><span class="n">ID</span><span class="p">))</span>

        <span class="n">frinfo</span><span class="p">[</span><span class="s2">&quot;frameRelations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame_relations</span><span class="p">(</span><span class="n">frame</span><span class="o">=</span><span class="n">frinfo</span><span class="p">)</span>

        <span class="c1"># resolve &#39;requires&#39; and &#39;excludes&#39; links between FEs of this frame</span>
        <span class="k">for</span> <span class="n">fe</span> <span class="ow">in</span> <span class="n">frinfo</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">ID</span> <span class="o">=</span> <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="o">.</span><span class="n">ID</span>
                <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span> <span class="o">=</span> <span class="n">frinfo</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">fe</span><span class="o">.</span><span class="n">requiresFE</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">ID</span>
            <span class="k">if</span> <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="p">:</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">ID</span> <span class="o">=</span> <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="o">.</span><span class="n">ID</span>
                <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span> <span class="o">=</span> <span class="n">frinfo</span><span class="o">.</span><span class="n">FE</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">fe</span><span class="o">.</span><span class="n">excludesFE</span><span class="o">.</span><span class="n">ID</span> <span class="o">==</span> <span class="n">ID</span>

        <span class="k">return</span> <span class="n">frinfo</span>

    <span class="k">def</span> <span class="nf">_handle_fecoreset_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load fe coreset info from xml.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">tmp</span>

    <span class="k">def</span> <span class="nf">_handle_framerelationtype_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load frame-relation element and its child fe-relation elements from frRelation.xml.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;framerelationtype&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;frameRelations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;frameRelation&quot;</span><span class="p">):</span>
                <span class="n">frel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_framerelation_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="n">frel</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>  <span class="c1"># backpointer</span>
                <span class="k">for</span> <span class="n">ferel</span> <span class="ow">in</span> <span class="n">frel</span><span class="o">.</span><span class="n">feRelations</span><span class="p">:</span>
                    <span class="n">ferel</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;frameRelations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frel</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_framerelation_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load frame-relation element and its child fe-relation elements from frRelation.xml.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;superFrameName&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;subFrameName&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;framerelation&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;feRelations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;FERelation&quot;</span><span class="p">):</span>
                <span class="n">ferel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="n">ferel</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ferelation&quot;</span>
                <span class="n">ferel</span><span class="p">[</span><span class="s2">&quot;frameRelation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>  <span class="c1"># backpointer</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;feRelations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ferel</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_fulltextannotation_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load full annotation info for a document from its xml</span>
<span class="sd">        file. The main element (fullTextAnnotation) contains a &#39;header&#39;</span>
<span class="sd">        element (which we ignore here) and a bunch of &#39;sentence&#39;</span>
<span class="sd">        elements.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fulltext_annotation&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;header&quot;</span><span class="p">):</span>
                <span class="k">continue</span>  <span class="c1"># not used</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;sentence&quot;</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fulltext_sentence_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="n">s</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">info</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_fulltext_sentence_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load information from the given &#39;sentence&#39; element. Each</span>
<span class="sd">        &#39;sentence&#39; element contains a &quot;text&quot; and &quot;annotationSet&quot; sub</span>
<span class="sd">        elements.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fulltext_sentence&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">target_spans</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_ascii&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span>
            <span class="n">_annotation_ascii</span><span class="p">,</span> <span class="n">info</span>
        <span class="p">)</span>  <span class="c1"># attach a method for this instance</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">):</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">):</span>
                <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_fulltextannotationset_elt</span><span class="p">(</span>
                    <span class="n">sub</span><span class="p">,</span> <span class="n">is_pos</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;cxnID&quot;</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>  <span class="c1"># ignoring construction annotations for now</span>
                    <span class="k">continue</span>
                <span class="n">a</span><span class="o">.</span><span class="n">sent</span> <span class="o">=</span> <span class="n">info</span>
                <span class="n">a</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">text</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;Target&quot;</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">tspan</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">Target</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">tspan</span> <span class="ow">in</span> <span class="n">target_spans</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                <span class="s1">&#39;Duplicate target span &quot;</span><span class="si">{}</span><span class="s1">&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">info</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="nb">slice</span><span class="p">(</span><span class="o">*</span><span class="n">tspan</span><span class="p">)]</span>
                                <span class="p">),</span>
                                <span class="n">tspan</span><span class="p">,</span>
                                <span class="s2">&quot;in sentence&quot;</span><span class="p">,</span>
                                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;ID&quot;</span><span class="p">],</span>
                                <span class="n">info</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="c1"># this can happen in cases like &quot;chemical and biological weapons&quot;</span>
                            <span class="c1"># being annotated as &quot;chemical weapons&quot; and &quot;biological weapons&quot;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">target_spans</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tspan</span><span class="p">)</span>
                    <span class="n">info</span><span class="p">[</span><span class="s2">&quot;targets&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">a</span><span class="o">.</span><span class="n">Target</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">luName</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">frameName</span><span class="p">))</span>

        <span class="k">assert</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;UNANN&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;POS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">POS</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;POS_tagset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">POS_tagset</span>
        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_fulltextannotationset_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">is_pos</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load information from the given &#39;annotationSet&#39; element. Each</span>
<span class="sd">        &#39;annotationSet&#39; contains several &quot;layer&quot; elements.&quot;&quot;&quot;</span>

        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_luannotationset_elt</span><span class="p">(</span><span class="n">elt</span><span class="p">,</span> <span class="n">is_pos</span><span class="o">=</span><span class="n">is_pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_pos</span><span class="p">:</span>
            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fulltext_annotationset&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;cxnID&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>  <span class="c1"># ignoring construction annotations for now</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;LU&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lu</span><span class="p">(</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">luID</span><span class="p">,</span>
                    <span class="n">luName</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">luName</span><span class="p">,</span>
                    <span class="n">frameID</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">frameID</span><span class="p">,</span>
                    <span class="n">frameName</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">frameName</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">LU</span><span class="o">.</span><span class="n">frame</span>
        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_fulltextlayer_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load information from the given &#39;layer&#39; element. Each</span>
<span class="sd">        &#39;layer&#39; contains several &quot;label&quot; elements.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;layer&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">):</span>
                <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_framelexunit_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the lexical unit info from an xml element in a frame&#39;s xml file.&quot;&quot;&quot;</span>
        <span class="n">luinfo</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lu&quot;</span>
        <span class="n">luinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">luinfo</span><span class="p">,</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;sentenceCount&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyDict</span><span class="p">()</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;lexemes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>  <span class="c1"># multiword LUs have multiple lexemes</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>  <span class="c1"># an LU can have multiple semtypes</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">):</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;sentenceCount&quot;</span><span class="p">):</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;sentenceCount&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">PrettyDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;lexeme&quot;</span><span class="p">):</span>
                <span class="n">lexemeinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">PrettyDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lexemeinfo</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="c1"># some lexeme names are ints by default: e.g.,</span>
                    <span class="c1"># thousand.num has lexeme with name=&quot;1000&quot;</span>
                    <span class="n">lexemeinfo</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">lexemeinfo</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;lexemes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lexemeinfo</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;semType&quot;</span><span class="p">):</span>
                <span class="n">semtypeinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">PrettyDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">semtypeinfo</span><span class="o">.</span><span class="n">ID</span><span class="p">))</span>

        <span class="c1"># sort lexemes by &#39;order&#39; attribute</span>
        <span class="c1"># otherwise, e.g., &#39;write down.v&#39; may have lexemes in wrong order</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;lexemes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">luinfo</span>

    <span class="k">def</span> <span class="nf">_handle_lexunit_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">ignorekeys</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load full info for a lexical unit from its xml file.</span>
<span class="sd">        This should only be called when accessing corpus annotations</span>
<span class="sd">        (which are not included in frame files).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">luinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lu&quot;</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;subCorpus&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;lexemes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>  <span class="c1"># multiword LUs have multiple lexemes</span>
        <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>  <span class="c1"># an LU can have multiple semtypes</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">luinfo</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">luinfo</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;header&quot;</span><span class="p">):</span>
                <span class="k">continue</span>  <span class="c1"># not used</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;valences&quot;</span><span class="p">):</span>
                <span class="k">continue</span>  <span class="c1"># not used</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;definition&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;subCorpus&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;subCorpus&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">sc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_lusubcorpus_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">sc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;subCorpus&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;lexeme&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;lexeme&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;lexemes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">PrettyDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;semType&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;semType&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignorekeys</span><span class="p">:</span>
                <span class="n">semtypeinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">luinfo</span><span class="p">[</span><span class="s2">&quot;semTypes&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">semtypeinfo</span><span class="o">.</span><span class="n">ID</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">luinfo</span>

    <span class="k">def</span> <span class="nf">_handle_lusubcorpus_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load a subcorpus of a lexical unit from the given xml.&quot;&quot;&quot;</span>
        <span class="n">sc</span> <span class="o">=</span> <span class="n">AttrDict</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">elt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">sc</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lusubcorpus&quot;</span>
        <span class="n">sc</span><span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;sentence&quot;</span><span class="p">):</span>
                <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_lusentence_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">sc</span><span class="p">[</span><span class="s2">&quot;sentence&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sc</span>

    <span class="k">def</span> <span class="nf">_handle_lusentence_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load a sentence from a subcorpus of an LU from xml.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lusentence&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_ascii&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span>
            <span class="n">_annotation_ascii</span><span class="p">,</span> <span class="n">info</span>
        <span class="p">)</span>  <span class="c1"># attach a method for this instance</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">):</span>
                <span class="n">info</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">):</span>
                <span class="n">annset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_luannotationset_elt</span><span class="p">(</span>
                    <span class="n">sub</span><span class="p">,</span> <span class="n">is_pos</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">annset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="n">annset</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;UNANN&quot;</span> <span class="ow">or</span> <span class="s2">&quot;FE&quot;</span> <span class="ow">in</span> <span class="n">annset</span><span class="p">,</span> <span class="n">annset</span>
                    <span class="k">if</span> <span class="n">annset</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="s2">&quot;UNANN&quot;</span><span class="p">:</span>
                        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;frameAnnotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annset</span>
                    <span class="c1"># copy layer info up to current level</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span>
                        <span class="s2">&quot;Target&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;FE&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;FE2&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;FE3&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;GF&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;PT&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;POS&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;POS_tagset&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Other&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Sent&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Verb&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Noun&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Adj&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Adv&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Prep&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Scon&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;Art&quot;</span><span class="p">,</span>
                    <span class="p">):</span>
                        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">annset</span><span class="p">:</span>
                            <span class="n">info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">annset</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="n">info</span><span class="p">[</span><span class="s2">&quot;annotationSet&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">annset</span><span class="p">)</span>
                    <span class="n">annset</span><span class="p">[</span><span class="s2">&quot;sent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span>
                    <span class="n">annset</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">text</span>
        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_luannotationset_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">is_pos</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load an annotation set from a sentence in an subcorpus of an LU&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;posannotationset&quot;</span> <span class="k">if</span> <span class="n">is_pos</span> <span class="k">else</span> <span class="s2">&quot;luannotationset&quot;</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;_ascii&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span>
            <span class="n">_annotation_ascii</span><span class="p">,</span> <span class="n">info</span>
        <span class="p">)</span>  <span class="c1"># attach a method for this instance</span>

        <span class="k">if</span> <span class="s2">&quot;cxnID&quot;</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>  <span class="c1"># ignoring construction annotations for now.</span>
            <span class="k">return</span> <span class="n">info</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;layer&quot;</span><span class="p">):</span>
                <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_lulayer_elt</span><span class="p">(</span><span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">l</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">overt</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">ni</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># null instantiations</span>

                    <span class="n">info</span><span class="p">[</span><span class="s2">&quot;layer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">label</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;start&quot;</span> <span class="ow">in</span> <span class="n">lbl</span><span class="p">:</span>
                            <span class="n">thespan</span> <span class="o">=</span> <span class="p">(</span><span class="n">lbl</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">lbl</span><span class="o">.</span><span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">lbl</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                                <span class="s2">&quot;Sent&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Other&quot;</span><span class="p">,</span>
                            <span class="p">):</span>  <span class="c1"># &#39;Sent&#39; and &#39;Other&#39; layers sometimes contain accidental duplicate spans</span>
                                <span class="k">assert</span> <span class="n">thespan</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">,</span> <span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">thespan</span><span class="p">)</span>
                            <span class="n">overt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thespan</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>  <span class="c1"># null instantiation</span>
                            <span class="k">if</span> <span class="n">lbl</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">ni</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                    <span class="s2">&quot;FE with multiple NI entries:&quot;</span><span class="p">,</span>
                                    <span class="n">lbl</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                    <span class="n">ni</span><span class="p">[</span><span class="n">lbl</span><span class="o">.</span><span class="n">name</span><span class="p">],</span>
                                    <span class="n">lbl</span><span class="o">.</span><span class="n">itype</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ni</span><span class="p">[</span><span class="n">lbl</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">lbl</span><span class="o">.</span><span class="n">itype</span>
                    <span class="n">overt</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">overt</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Target&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">overt</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                <span class="s2">&quot;Skipping empty Target layer in annotation set ID=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">info</span><span class="o">.</span><span class="n">ID</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
                            <span class="k">continue</span>
                        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">lblname</span> <span class="o">==</span> <span class="s2">&quot;Target&quot;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">lblname</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">)</span>
                        <span class="k">if</span> <span class="s2">&quot;Target&quot;</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                <span class="s2">&quot;Annotation set </span><span class="si">{}</span><span class="s2"> has multiple Target layers&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                                    <span class="n">info</span><span class="o">.</span><span class="n">ID</span>
                                <span class="p">)</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;Target&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="n">overt</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;FE&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="k">assert</span> <span class="s2">&quot;FE&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info</span>
                            <span class="n">info</span><span class="p">[</span><span class="s2">&quot;FE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">overt</span><span class="p">,</span> <span class="n">ni</span><span class="p">)</span>
                            <span class="c1"># assert False,info</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># sometimes there are 3 FE layers! e.g. Change_position_on_a_scale.fall.v</span>
                            <span class="k">assert</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="n">l</span><span class="o">.</span><span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">rank</span>
                            <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;FE&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">rank</span><span class="p">)</span>
                            <span class="k">assert</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info</span>
                            <span class="n">info</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">overt</span><span class="p">,</span> <span class="n">ni</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;GF&quot;</span><span class="p">,</span> <span class="s2">&quot;PT&quot;</span><span class="p">):</span>
                        <span class="k">assert</span> <span class="n">l</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span>
                        <span class="n">info</span><span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">overt</span>
                    <span class="k">elif</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;BNC&quot;</span><span class="p">,</span> <span class="s2">&quot;PENN&quot;</span><span class="p">):</span>
                        <span class="k">assert</span> <span class="n">l</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span>
                        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;POS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overt</span>
                        <span class="n">info</span><span class="p">[</span><span class="s2">&quot;POS_tagset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_pos</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;NER&quot;</span><span class="p">,</span> <span class="s2">&quot;WSL&quot;</span><span class="p">):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                    <span class="s2">&quot;Unexpected layer in sentence annotationset:&quot;</span><span class="p">,</span>
                                    <span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span>
                                <span class="s2">&quot;Sent&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Verb&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Noun&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Adj&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Adv&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Prep&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Scon&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Art&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;Other&quot;</span><span class="p">,</span>
                            <span class="p">):</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span>
                                    <span class="s2">&quot;Unexpected layer in frame annotationset:&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">name</span>
                                <span class="p">)</span>
                        <span class="n">info</span><span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">overt</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_pos</span> <span class="ow">and</span> <span class="s2">&quot;cxnID&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;Target&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing target in annotation set ID=</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">ID</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="s2">&quot;FE&quot;</span> <span class="ow">in</span> <span class="n">info</span>
            <span class="k">if</span> <span class="s2">&quot;FE3&quot;</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
                <span class="k">assert</span> <span class="s2">&quot;FE2&quot;</span> <span class="ow">in</span> <span class="n">info</span>

        <span class="k">return</span> <span class="n">info</span>

    <span class="k">def</span> <span class="nf">_handle_lulayer_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load a layer from an annotation set&quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lulayer&quot;</span>
        <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">):</span>
                <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">l</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">layer</span>

    <span class="k">def</span> <span class="nf">_handle_fe_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">):</span>
        <span class="n">feinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;fe&quot;</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;semType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;requiresFE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;excludesFE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;definition&quot;</span><span class="p">):</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;semType&quot;</span><span class="p">):</span>
                <span class="n">stinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;semType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semtype</span><span class="p">(</span><span class="n">stinfo</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;requiresFE&quot;</span><span class="p">):</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;requiresFE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sub</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;excludesFE&quot;</span><span class="p">):</span>
                <span class="n">feinfo</span><span class="p">[</span><span class="s2">&quot;excludesFE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">feinfo</span>

    <span class="k">def</span> <span class="nf">_handle_semtype_elt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">elt</span><span class="p">,</span> <span class="n">tagspec</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">semt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">elt</span><span class="p">)</span>
        <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;semtype&quot;</span>
        <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;superType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;subTypes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">PrettyList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">elt</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;definitionMarkup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">text</span>
                <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;definition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_tags</span><span class="p">(</span><span class="n">sub</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">supertypeinfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_xml_attributes</span><span class="p">(</span><span class="n">AttrDict</span><span class="p">(),</span> <span class="n">sub</span><span class="p">)</span>
                <span class="n">semt</span><span class="p">[</span><span class="s2">&quot;superType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">supertypeinfo</span>
                <span class="c1"># the supertype may not have been loaded yet</span>

        <span class="k">return</span> <span class="n">semt</span></div>


<span class="c1">#</span>
<span class="c1"># Demo</span>
<span class="c1">#</span>
<div class="viewcode-block" id="demo"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.framenet.html#nltk.corpus.reader.demo">[docs]</a><span class="k">def</span> <span class="nf">demo</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">framenet</span> <span class="k">as</span> <span class="n">fn</span>

    <span class="c1">#</span>
    <span class="c1"># It is not necessary to explicitly build the indexes by calling</span>
    <span class="c1"># buildindexes(). We do this here just for demo purposes. If the</span>
    <span class="c1"># indexes are not built explicitly, they will be built as needed.</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Building the indexes...&quot;</span><span class="p">)</span>
    <span class="n">fn</span><span class="o">.</span><span class="n">buildindexes</span><span class="p">()</span>

    <span class="c1">#</span>
    <span class="c1"># Get some statistics about the corpus</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of Frames:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">frames</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of Lexical Units:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">lus</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of annotated documents:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">docs</span><span class="p">()))</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1">#</span>
    <span class="c1"># Frames</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s1">&#39;getting frames whose name matches the (case insensitive) regex: &quot;(?i)medical&quot;&#39;</span>
    <span class="p">)</span>
    <span class="n">medframes</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">frames</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(?i)medical&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">medframes</span><span class="p">)</span><span class="si">}</span><span class="s1"> Frames whose name matches &quot;(?i)medical&quot;:&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">([(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">ID</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">medframes</span><span class="p">])</span>

    <span class="c1">#</span>
    <span class="c1"># store the first frame in the list of frames</span>
    <span class="c1">#</span>
    <span class="n">tmp_id</span> <span class="o">=</span> <span class="n">medframes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ID</span>
    <span class="n">m_frame</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">tmp_id</span><span class="p">)</span>  <span class="c1"># reads all info for the frame</span>

    <span class="c1">#</span>
    <span class="c1"># get the frame relations</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Number of frame relations for the &quot;</span><span class="si">{}</span><span class="s1">&quot; (</span><span class="si">{}</span><span class="s1">) frame:&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">m_frame</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">ID</span>
        <span class="p">),</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">m_frame</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">fr</span> <span class="ow">in</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">frameRelations</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="n">fr</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># get the names of the Frame Elements</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Number of Frame Elements in the &quot;</span><span class="si">{</span><span class="n">m_frame</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; frame:&#39;</span><span class="p">,</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">m_frame</span><span class="o">.</span><span class="n">FE</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">FE</span><span class="p">])</span>

    <span class="c1">#</span>
    <span class="c1"># get the names of the &quot;Core&quot; Frame Elements</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">The &quot;core&quot; Frame Elements in the &quot;</span><span class="si">{</span><span class="n">m_frame</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; frame:&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">FE</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">coreType</span> <span class="o">==</span> <span class="s2">&quot;Core&quot;</span><span class="p">])</span>

    <span class="c1">#</span>
    <span class="c1"># get all of the Lexical Units that are incorporated in the</span>
    <span class="c1"># &#39;Ailment&#39; FE of the &#39;Medical_conditions&#39; frame (id=239)</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">All Lexical Units that are incorporated in the &quot;Ailment&quot; FE:&#39;</span><span class="p">)</span>
    <span class="n">m_frame</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="mi">239</span><span class="p">)</span>
    <span class="n">ailment_lus</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">x</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;incorporatedFE&quot;</span> <span class="ow">in</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">x</span><span class="o">.</span><span class="n">incorporatedFE</span> <span class="o">==</span> <span class="s2">&quot;Ailment&quot;</span>
    <span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   &quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ailment_lus</span><span class="p">])</span>

    <span class="c1">#</span>
    <span class="c1"># get all of the Lexical Units for the frame</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Number of Lexical Units in the &quot;</span><span class="si">{</span><span class="n">m_frame</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; frame:&#39;</span><span class="p">,</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">m_frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="o">.</span><span class="n">values</span><span class="p">()][:</span><span class="mi">5</span><span class="p">],</span> <span class="s2">&quot;...&quot;</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># get basic info on the second LU in the frame</span>
    <span class="c1">#</span>
    <span class="n">tmp_id</span> <span class="o">=</span> <span class="n">m_frame</span><span class="o">.</span><span class="n">lexUnit</span><span class="p">[</span><span class="s2">&quot;ailment.n&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">ID</span>  <span class="c1"># grab the id of the specified LU</span>
    <span class="n">luinfo</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">lu_basic</span><span class="p">(</span><span class="n">tmp_id</span><span class="p">)</span>  <span class="c1"># get basic info on the LU</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Information on the LU: </span><span class="si">{</span><span class="n">luinfo</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">luinfo</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># Get a list of all of the corpora used for fulltext annotation</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Names of all of the corpora used for fulltext annotation:&quot;</span><span class="p">)</span>
    <span class="n">allcorpora</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">corpname</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">fn</span><span class="o">.</span><span class="n">docs_metadata</span><span class="p">()}</span>
    <span class="n">pprint</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">allcorpora</span><span class="p">))</span>

    <span class="c1">#</span>
    <span class="c1"># Get the names of the annotated documents in the first corpus</span>
    <span class="c1">#</span>
    <span class="n">firstcorp</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">allcorpora</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">firstcorp_docs</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">docs</span><span class="p">(</span><span class="n">firstcorp</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Names of the annotated documents in the &quot;</span><span class="si">{</span><span class="n">firstcorp</span><span class="si">}</span><span class="s1">&quot; corpus:&#39;</span><span class="p">)</span>
    <span class="n">pprint</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">filename</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">firstcorp_docs</span><span class="p">])</span>

    <span class="c1">#</span>
    <span class="c1"># Search for frames containing LUs whose name attribute matches a</span>
    <span class="c1"># regexp pattern.</span>
    <span class="c1">#</span>
    <span class="c1"># Note: if you were going to be doing a lot of this type of</span>
    <span class="c1">#       searching, you&#39;d want to build an index that maps from</span>
    <span class="c1">#       lemmas to frames because each time frames_by_lemma() is</span>
    <span class="c1">#       called, it has to search through ALL of the frame XML files</span>
    <span class="c1">#       in the db.</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Searching for all Frames that have a lemma that matches the regexp: &quot;^run.v$&quot;:&#39;</span>
    <span class="p">)</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">frames_by_lemma</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^run.v$&quot;</span><span class="p">))</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">demo</span><span class="p">()</span>
</pre></div>

        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>