<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>NLTK :: nltk.stem.lancaster</title>
  

  <link rel="stylesheet" href="../../../_static/css/nltk_theme.css"/>
  <link rel="stylesheet" href="../../../_static/css/custom.css"/>

  <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
  

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script> 
</head>

<body>
  <div id="nltk-theme-container">
    <header>
      <div id="logo-container">
          
          <h1>
            <a href="../../../index.html">NLTK</a>
          </h1>
          
      </div>
      <div id="project-container">
        
        <h1>Documentation</h1>
        
      </div>

      <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

      <script type="text/javascript">
        $("#menu-toggle").click(function() {
          $("#menu-toggle").toggleClass("toggled");
          $("#side-menu-container").slideToggle(300);
        });
      </script>
    </header>

    <div id="content-container">

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
            <input type="text" name="q" placeholder="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">
          
  
    
  
  
    <p class="caption" role="heading"><span class="caption-text">NLTK Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/nltk.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../howto.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki">Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/wiki/FAQ">FAQ</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk/issues">Open Issues</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nltk/nltk">NLTK on GitHub</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data.html">Installing NLTK Data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">More</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../news.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute.html">Contributing to NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../team.html">NLTK Team</a></li>
</ul>

  

        </div>

        
      </div>

      <div id="main-content-container">
        <div id="main-content" role="main">
          
  <h1>Source code for nltk.stem.lancaster</h1><div class="highlight"><pre>
<span></span><span class="c1"># Natural Language Toolkit: Stemmers</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2001-2023 NLTK Project</span>
<span class="c1"># Author: Steven Tomcavage &lt;stomcava@law.upenn.edu&gt;</span>
<span class="c1"># URL: &lt;https://www.nltk.org/&gt;</span>
<span class="c1"># For license information, see LICENSE.TXT</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A word stemmer based on the Lancaster (Paice/Husk) stemming algorithm.</span>
<span class="sd">Paice, Chris D. &quot;Another Stemmer.&quot; ACM SIGIR Forum 24.3 (1990): 56-61.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">nltk.stem.api</span> <span class="kn">import</span> <span class="n">StemmerI</span>


<div class="viewcode-block" id="LancasterStemmer"><a class="viewcode-back" href="../../../api/nltk.stem.lancaster.html#nltk.stem.LancasterStemmer">[docs]</a><span class="k">class</span> <span class="nc">LancasterStemmer</span><span class="p">(</span><span class="n">StemmerI</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Lancaster Stemmer</span>

<span class="sd">        &gt;&gt;&gt; from nltk.stem.lancaster import LancasterStemmer</span>
<span class="sd">        &gt;&gt;&gt; st = LancasterStemmer()</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;maximum&#39;)     # Remove &quot;-um&quot; when word is intact</span>
<span class="sd">        &#39;maxim&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;presumably&#39;)  # Don&#39;t remove &quot;-um&quot; when word is not intact</span>
<span class="sd">        &#39;presum&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;multiply&#39;)    # No action taken if word ends with &quot;-ply&quot;</span>
<span class="sd">        &#39;multiply&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;provision&#39;)   # Replace &quot;-sion&quot; with &quot;-j&quot; to trigger &quot;j&quot; set of rules</span>
<span class="sd">        &#39;provid&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;owed&#39;)        # Word starting with vowel must contain at least 2 letters</span>
<span class="sd">        &#39;ow&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;ear&#39;)         # ditto</span>
<span class="sd">        &#39;ear&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;saying&#39;)      # Words starting with consonant must contain at least 3</span>
<span class="sd">        &#39;say&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;crying&#39;)      #     letters and one of those letters must be a vowel</span>
<span class="sd">        &#39;cry&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;string&#39;)      # ditto</span>
<span class="sd">        &#39;string&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;meant&#39;)       # ditto</span>
<span class="sd">        &#39;meant&#39;</span>
<span class="sd">        &gt;&gt;&gt; st.stem(&#39;cement&#39;)      # ditto</span>
<span class="sd">        &#39;cem&#39;</span>
<span class="sd">        &gt;&gt;&gt; st_pre = LancasterStemmer(strip_prefix_flag=True)</span>
<span class="sd">        &gt;&gt;&gt; st_pre.stem(&#39;kilometer&#39;) # Test Prefix</span>
<span class="sd">        &#39;met&#39;</span>
<span class="sd">        &gt;&gt;&gt; st_custom = LancasterStemmer(rule_tuple=(&quot;ssen4&gt;&quot;, &quot;s1t.&quot;))</span>
<span class="sd">        &gt;&gt;&gt; st_custom.stem(&quot;ness&quot;) # Change s to t</span>
<span class="sd">        &#39;nest&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># The rule list is static since it doesn&#39;t change between instances</span>
    <span class="n">default_rule_tuple</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;ai*2.&quot;</span><span class="p">,</span>  <span class="c1"># -ia &gt; -   if intact</span>
        <span class="s2">&quot;a*1.&quot;</span><span class="p">,</span>  <span class="c1"># -a &gt; -    if intact</span>
        <span class="s2">&quot;bb1.&quot;</span><span class="p">,</span>  <span class="c1"># -bb &gt; -b</span>
        <span class="s2">&quot;city3s.&quot;</span><span class="p">,</span>  <span class="c1"># -ytic &gt; -ys</span>
        <span class="s2">&quot;ci2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ic &gt; -</span>
        <span class="s2">&quot;cn1t&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -nc &gt; -nt</span>
        <span class="s2">&quot;dd1.&quot;</span><span class="p">,</span>  <span class="c1"># -dd &gt; -d</span>
        <span class="s2">&quot;dei3y&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ied &gt; -y</span>
        <span class="s2">&quot;deec2ss.&quot;</span><span class="p">,</span>  <span class="c1"># -ceed &gt;&quot;, -cess</span>
        <span class="s2">&quot;dee1.&quot;</span><span class="p">,</span>  <span class="c1"># -eed &gt; -ee</span>
        <span class="s2">&quot;de2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ed &gt; -</span>
        <span class="s2">&quot;dooh4&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -hood &gt; -</span>
        <span class="s2">&quot;e1&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -e &gt; -</span>
        <span class="s2">&quot;feil1v.&quot;</span><span class="p">,</span>  <span class="c1"># -lief &gt; -liev</span>
        <span class="s2">&quot;fi2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -if &gt; -</span>
        <span class="s2">&quot;gni3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ing &gt; -</span>
        <span class="s2">&quot;gai3y.&quot;</span><span class="p">,</span>  <span class="c1"># -iag &gt; -y</span>
        <span class="s2">&quot;ga2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ag &gt; -</span>
        <span class="s2">&quot;gg1.&quot;</span><span class="p">,</span>  <span class="c1"># -gg &gt; -g</span>
        <span class="s2">&quot;ht*2.&quot;</span><span class="p">,</span>  <span class="c1"># -th &gt; -   if intact</span>
        <span class="s2">&quot;hsiug5ct.&quot;</span><span class="p">,</span>  <span class="c1"># -guish &gt; -ct</span>
        <span class="s2">&quot;hsi3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ish &gt; -</span>
        <span class="s2">&quot;i*1.&quot;</span><span class="p">,</span>  <span class="c1"># -i &gt; -    if intact</span>
        <span class="s2">&quot;i1y&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -i &gt; -y</span>
        <span class="s2">&quot;ji1d.&quot;</span><span class="p">,</span>  <span class="c1"># -ij &gt; -id   --  see nois4j&gt; &amp; vis3j&gt;</span>
        <span class="s2">&quot;juf1s.&quot;</span><span class="p">,</span>  <span class="c1"># -fuj &gt; -fus</span>
        <span class="s2">&quot;ju1d.&quot;</span><span class="p">,</span>  <span class="c1"># -uj &gt; -ud</span>
        <span class="s2">&quot;jo1d.&quot;</span><span class="p">,</span>  <span class="c1"># -oj &gt; -od</span>
        <span class="s2">&quot;jeh1r.&quot;</span><span class="p">,</span>  <span class="c1"># -hej &gt; -her</span>
        <span class="s2">&quot;jrev1t.&quot;</span><span class="p">,</span>  <span class="c1"># -verj &gt; -vert</span>
        <span class="s2">&quot;jsim2t.&quot;</span><span class="p">,</span>  <span class="c1"># -misj &gt; -mit</span>
        <span class="s2">&quot;jn1d.&quot;</span><span class="p">,</span>  <span class="c1"># -nj &gt; -nd</span>
        <span class="s2">&quot;j1s.&quot;</span><span class="p">,</span>  <span class="c1"># -j &gt; -s</span>
        <span class="s2">&quot;lbaifi6.&quot;</span><span class="p">,</span>  <span class="c1"># -ifiabl &gt; -</span>
        <span class="s2">&quot;lbai4y.&quot;</span><span class="p">,</span>  <span class="c1"># -iabl &gt; -y</span>
        <span class="s2">&quot;lba3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -abl &gt; -</span>
        <span class="s2">&quot;lbi3.&quot;</span><span class="p">,</span>  <span class="c1"># -ibl &gt; -</span>
        <span class="s2">&quot;lib2l&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -bil &gt; -bl</span>
        <span class="s2">&quot;lc1.&quot;</span><span class="p">,</span>  <span class="c1"># -cl &gt; c</span>
        <span class="s2">&quot;lufi4y.&quot;</span><span class="p">,</span>  <span class="c1"># -iful &gt; -y</span>
        <span class="s2">&quot;luf3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ful &gt; -</span>
        <span class="s2">&quot;lu2.&quot;</span><span class="p">,</span>  <span class="c1"># -ul &gt; -</span>
        <span class="s2">&quot;lai3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ial &gt; -</span>
        <span class="s2">&quot;lau3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ual &gt; -</span>
        <span class="s2">&quot;la2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -al &gt; -</span>
        <span class="s2">&quot;ll1.&quot;</span><span class="p">,</span>  <span class="c1"># -ll &gt; -l</span>
        <span class="s2">&quot;mui3.&quot;</span><span class="p">,</span>  <span class="c1"># -ium &gt; -</span>
        <span class="s2">&quot;mu*2.&quot;</span><span class="p">,</span>  <span class="c1"># -um &gt; -   if intact</span>
        <span class="s2">&quot;msi3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ism &gt; -</span>
        <span class="s2">&quot;mm1.&quot;</span><span class="p">,</span>  <span class="c1"># -mm &gt; -m</span>
        <span class="s2">&quot;nois4j&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -sion &gt; -j</span>
        <span class="s2">&quot;noix4ct.&quot;</span><span class="p">,</span>  <span class="c1"># -xion &gt; -ct</span>
        <span class="s2">&quot;noi3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ion &gt; -</span>
        <span class="s2">&quot;nai3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ian &gt; -</span>
        <span class="s2">&quot;na2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -an &gt; -</span>
        <span class="s2">&quot;nee0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -een</span>
        <span class="s2">&quot;ne2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -en &gt; -</span>
        <span class="s2">&quot;nn1.&quot;</span><span class="p">,</span>  <span class="c1"># -nn &gt; -n</span>
        <span class="s2">&quot;pihs4&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ship &gt; -</span>
        <span class="s2">&quot;pp1.&quot;</span><span class="p">,</span>  <span class="c1"># -pp &gt; -p</span>
        <span class="s2">&quot;re2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -er &gt; -</span>
        <span class="s2">&quot;rae0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -ear</span>
        <span class="s2">&quot;ra2.&quot;</span><span class="p">,</span>  <span class="c1"># -ar &gt; -</span>
        <span class="s2">&quot;ro2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -or &gt; -</span>
        <span class="s2">&quot;ru2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ur &gt; -</span>
        <span class="s2">&quot;rr1.&quot;</span><span class="p">,</span>  <span class="c1"># -rr &gt; -r</span>
        <span class="s2">&quot;rt1&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -tr &gt; -t</span>
        <span class="s2">&quot;rei3y&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ier &gt; -y</span>
        <span class="s2">&quot;sei3y&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ies &gt; -y</span>
        <span class="s2">&quot;sis2.&quot;</span><span class="p">,</span>  <span class="c1"># -sis &gt; -s</span>
        <span class="s2">&quot;si2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -is &gt; -</span>
        <span class="s2">&quot;ssen4&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ness &gt; -</span>
        <span class="s2">&quot;ss0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -ss</span>
        <span class="s2">&quot;suo3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ous &gt; -</span>
        <span class="s2">&quot;su*2.&quot;</span><span class="p">,</span>  <span class="c1"># -us &gt; -   if intact</span>
        <span class="s2">&quot;s*1&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -s &gt; -    if intact</span>
        <span class="s2">&quot;s0.&quot;</span><span class="p">,</span>  <span class="c1"># -s &gt; -s</span>
        <span class="s2">&quot;tacilp4y.&quot;</span><span class="p">,</span>  <span class="c1"># -plicat &gt; -ply</span>
        <span class="s2">&quot;ta2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -at &gt; -</span>
        <span class="s2">&quot;tnem4&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ment &gt; -</span>
        <span class="s2">&quot;tne3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ent &gt; -</span>
        <span class="s2">&quot;tna3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ant &gt; -</span>
        <span class="s2">&quot;tpir2b.&quot;</span><span class="p">,</span>  <span class="c1"># -ript &gt; -rib</span>
        <span class="s2">&quot;tpro2b.&quot;</span><span class="p">,</span>  <span class="c1"># -orpt &gt; -orb</span>
        <span class="s2">&quot;tcud1.&quot;</span><span class="p">,</span>  <span class="c1"># -duct &gt; -duc</span>
        <span class="s2">&quot;tpmus2.&quot;</span><span class="p">,</span>  <span class="c1"># -sumpt &gt; -sum</span>
        <span class="s2">&quot;tpec2iv.&quot;</span><span class="p">,</span>  <span class="c1"># -cept &gt; -ceiv</span>
        <span class="s2">&quot;tulo2v.&quot;</span><span class="p">,</span>  <span class="c1"># -olut &gt; -olv</span>
        <span class="s2">&quot;tsis0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -sist</span>
        <span class="s2">&quot;tsi3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ist &gt; -</span>
        <span class="s2">&quot;tt1.&quot;</span><span class="p">,</span>  <span class="c1"># -tt &gt; -t</span>
        <span class="s2">&quot;uqi3.&quot;</span><span class="p">,</span>  <span class="c1"># -iqu &gt; -</span>
        <span class="s2">&quot;ugo1.&quot;</span><span class="p">,</span>  <span class="c1"># -ogu &gt; -og</span>
        <span class="s2">&quot;vis3j&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -siv &gt; -j</span>
        <span class="s2">&quot;vie0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -eiv</span>
        <span class="s2">&quot;vi2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -iv &gt; -</span>
        <span class="s2">&quot;ylb1&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -bly &gt; -bl</span>
        <span class="s2">&quot;yli3y&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ily &gt; -y</span>
        <span class="s2">&quot;ylp0.&quot;</span><span class="p">,</span>  <span class="c1"># protect  -ply</span>
        <span class="s2">&quot;yl2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ly &gt; -</span>
        <span class="s2">&quot;ygo1.&quot;</span><span class="p">,</span>  <span class="c1"># -ogy &gt; -og</span>
        <span class="s2">&quot;yhp1.&quot;</span><span class="p">,</span>  <span class="c1"># -phy &gt; -ph</span>
        <span class="s2">&quot;ymo1.&quot;</span><span class="p">,</span>  <span class="c1"># -omy &gt; -om</span>
        <span class="s2">&quot;ypo1.&quot;</span><span class="p">,</span>  <span class="c1"># -opy &gt; -op</span>
        <span class="s2">&quot;yti3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ity &gt; -</span>
        <span class="s2">&quot;yte3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ety &gt; -</span>
        <span class="s2">&quot;ytl2.&quot;</span><span class="p">,</span>  <span class="c1"># -lty &gt; -l</span>
        <span class="s2">&quot;yrtsi5.&quot;</span><span class="p">,</span>  <span class="c1"># -istry &gt; -</span>
        <span class="s2">&quot;yra3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ary &gt; -</span>
        <span class="s2">&quot;yro3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ory &gt; -</span>
        <span class="s2">&quot;yfi3.&quot;</span><span class="p">,</span>  <span class="c1"># -ify &gt; -</span>
        <span class="s2">&quot;ycn2t&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -ncy &gt; -nt</span>
        <span class="s2">&quot;yca3&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -acy &gt; -</span>
        <span class="s2">&quot;zi2&gt;&quot;</span><span class="p">,</span>  <span class="c1"># -iz &gt; -</span>
        <span class="s2">&quot;zy1s.&quot;</span><span class="p">,</span>  <span class="c1"># -yz &gt; -ys</span>
    <span class="p">)</span>

<div class="viewcode-block" id="LancasterStemmer.__init__"><a class="viewcode-back" href="../../../api/nltk.stem.lancaster.html#nltk.stem.LancasterStemmer.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule_tuple</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">strip_prefix_flag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an instance of the Lancaster stemmer.&quot;&quot;&quot;</span>
        <span class="c1"># Setup an empty rule dictionary - this will be filled in later</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># Check if a user wants to strip prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_strip_prefix</span> <span class="o">=</span> <span class="n">strip_prefix_flag</span>
        <span class="c1"># Check if a user wants to use his/her own rule tuples.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rule_tuple</span> <span class="o">=</span> <span class="n">rule_tuple</span> <span class="k">if</span> <span class="n">rule_tuple</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_rule_tuple</span></div>

<div class="viewcode-block" id="LancasterStemmer.parseRules"><a class="viewcode-back" href="../../../api/nltk.stem.lancaster.html#nltk.stem.LancasterStemmer.parseRules">[docs]</a>    <span class="k">def</span> <span class="nf">parseRules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule_tuple</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validate the set of rules used in this stemmer.</span>

<span class="sd">        If this function is called as an individual method, without using stem</span>
<span class="sd">        method, rule_tuple argument will be compiled into self.rule_dictionary.</span>
<span class="sd">        If this function is called within stem, self._rule_tuple will be used.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If there is no argument for the function, use class&#39; own rule tuple.</span>
        <span class="n">rule_tuple</span> <span class="o">=</span> <span class="n">rule_tuple</span> <span class="k">if</span> <span class="n">rule_tuple</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rule_tuple</span>
        <span class="n">valid_rule</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-z]+\*?\d[a-z]*[&gt;\.]?$&quot;</span><span class="p">)</span>
        <span class="c1"># Empty any old rules from the rule set before adding new ones</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">rule_tuple</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">valid_rule</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">rule</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The rule </span><span class="si">{</span><span class="n">rule</span><span class="si">}</span><span class="s2"> is invalid&quot;</span><span class="p">)</span>
            <span class="n">first_letter</span> <span class="o">=</span> <span class="n">rule</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">first_letter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span><span class="p">[</span><span class="n">first_letter</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span><span class="p">[</span><span class="n">first_letter</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">rule</span><span class="p">]</span></div>

<div class="viewcode-block" id="LancasterStemmer.stem"><a class="viewcode-back" href="../../../api/nltk.stem.lancaster.html#nltk.stem.LancasterStemmer.stem">[docs]</a>    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stem a word using the Lancaster stemmer.&quot;&quot;&quot;</span>
        <span class="c1"># Lower-case the word, since all the rules are lower-cased</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__stripPrefix</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_strip_prefix</span> <span class="k">else</span> <span class="n">word</span>

        <span class="c1"># Save a copy of the original word</span>
        <span class="n">intact_word</span> <span class="o">=</span> <span class="n">word</span>

        <span class="c1"># If rule dictionary is empty, parse rule tuple.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parseRules</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__doStemming</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">intact_word</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__doStemming</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">intact_word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform the actual word stemming&quot;&quot;&quot;</span>

        <span class="n">valid_rule</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^([a-z]+)(\*?)(\d)([a-z]*)([&gt;\.]?)$&quot;</span><span class="p">)</span>

        <span class="n">proceed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">while</span> <span class="n">proceed</span><span class="p">:</span>

            <span class="c1"># Find the position of the last letter of the word to be stemmed</span>
            <span class="n">last_letter_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getLastLetter</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

            <span class="c1"># Only stem the word if it has a last letter and a rule matching that last letter</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">last_letter_position</span> <span class="o">&lt;</span> <span class="mi">0</span>
                <span class="ow">or</span> <span class="n">word</span><span class="p">[</span><span class="n">last_letter_position</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span>
            <span class="p">):</span>
                <span class="n">proceed</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">rule_was_applied</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="c1"># Go through each rule that matches the word&#39;s final letter</span>
                <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rule_dictionary</span><span class="p">[</span><span class="n">word</span><span class="p">[</span><span class="n">last_letter_position</span><span class="p">]]:</span>
                    <span class="n">rule_match</span> <span class="o">=</span> <span class="n">valid_rule</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">rule_match</span><span class="p">:</span>
                        <span class="p">(</span>
                            <span class="n">ending_string</span><span class="p">,</span>
                            <span class="n">intact_flag</span><span class="p">,</span>
                            <span class="n">remove_total</span><span class="p">,</span>
                            <span class="n">append_string</span><span class="p">,</span>
                            <span class="n">cont_flag</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">=</span> <span class="n">rule_match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>

                        <span class="c1"># Convert the number of chars to remove when stemming</span>
                        <span class="c1"># from a string to an integer</span>
                        <span class="n">remove_total</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">remove_total</span><span class="p">)</span>

                        <span class="c1"># Proceed if word&#39;s ending matches rule&#39;s word ending</span>
                        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ending_string</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                            <span class="k">if</span> <span class="n">intact_flag</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">word</span> <span class="o">==</span> <span class="n">intact_word</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isAcceptable</span><span class="p">(</span>
                                    <span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span>
                                <span class="p">):</span>
                                    <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__applyRule</span><span class="p">(</span>
                                        <span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span><span class="p">,</span> <span class="n">append_string</span>
                                    <span class="p">)</span>
                                    <span class="n">rule_was_applied</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="k">if</span> <span class="n">cont_flag</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
                                        <span class="n">proceed</span> <span class="o">=</span> <span class="kc">False</span>
                                    <span class="k">break</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isAcceptable</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span><span class="p">):</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__applyRule</span><span class="p">(</span>
                                    <span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span><span class="p">,</span> <span class="n">append_string</span>
                                <span class="p">)</span>
                                <span class="n">rule_was_applied</span> <span class="o">=</span> <span class="kc">True</span>
                                <span class="k">if</span> <span class="n">cont_flag</span> <span class="o">==</span> <span class="s2">&quot;.&quot;</span><span class="p">:</span>
                                    <span class="n">proceed</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                <span class="c1"># If no rules apply, the word doesn&#39;t need any more stemming</span>
                <span class="k">if</span> <span class="n">rule_was_applied</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="n">proceed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">word</span>

    <span class="k">def</span> <span class="nf">__getLastLetter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the zero-based index of the last alphabetic character in this string&quot;&quot;&quot;</span>
        <span class="n">last_letter</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">position</span><span class="p">]</span><span class="o">.</span><span class="n">isalpha</span><span class="p">():</span>
                <span class="n">last_letter</span> <span class="o">=</span> <span class="n">position</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">last_letter</span>

    <span class="k">def</span> <span class="nf">__isAcceptable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Determine if the word is acceptable for stemming.&quot;&quot;&quot;</span>
        <span class="n">word_is_acceptable</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># If the word starts with a vowel, it must be at least 2</span>
        <span class="c1"># characters long to be stemmed</span>
        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;aeiouy&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">-</span> <span class="n">remove_total</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">word_is_acceptable</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1"># If the word starts with a consonant, it must be at least 3</span>
        <span class="c1"># characters long (including one vowel) to be stemmed</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">-</span> <span class="n">remove_total</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;aeiouy&quot;</span><span class="p">:</span>
                <span class="n">word_is_acceptable</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;aeiouy&quot;</span><span class="p">:</span>
                <span class="n">word_is_acceptable</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">word_is_acceptable</span>

    <span class="k">def</span> <span class="nf">__applyRule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">remove_total</span><span class="p">,</span> <span class="n">append_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply the stemming rule to the word&quot;&quot;&quot;</span>
        <span class="c1"># Remove letters from the end of the word</span>
        <span class="n">new_word_length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">-</span> <span class="n">remove_total</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">new_word_length</span><span class="p">]</span>

        <span class="c1"># And add new letters to the end of the truncated word</span>
        <span class="k">if</span> <span class="n">append_string</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">+=</span> <span class="n">append_string</span>
        <span class="k">return</span> <span class="n">word</span>

    <span class="k">def</span> <span class="nf">__stripPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove prefix from a word.</span>

<span class="sd">        This function originally taken from Whoosh.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">(</span>
            <span class="s2">&quot;kilo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;micro&quot;</span><span class="p">,</span>
            <span class="s2">&quot;milli&quot;</span><span class="p">,</span>
            <span class="s2">&quot;intra&quot;</span><span class="p">,</span>
            <span class="s2">&quot;ultra&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mega&quot;</span><span class="p">,</span>
            <span class="s2">&quot;nano&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pico&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pseudo&quot;</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">word</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="p">:]</span>
        <span class="k">return</span> <span class="n">word</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;LancasterStemmer&gt;&quot;</span></div>
</pre></div>

        </div>
      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            

            
                <li class="footer-element">
                    <a href="https://github.com/nltk/nltk/tree/3.8.1">3.8.1</a>
                </li>
            

            
                <li class="footer-element">
                    Jan 02, 2023
                </li>
            
        </ul>

        
            <div id="copyright">
                &copy; 2023, NLTK Project
            </div>
        

        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/tomaarsen/nltk_theme">NLTK Theme</a>
        </div>
    </div>
</footer> 

</div>

</body>
</html>